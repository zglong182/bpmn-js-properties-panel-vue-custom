{"version":3,"sources":["webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ListenerDetailProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/CallActivityProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConnectorDetailProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Properties.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/CreateHelper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/InputParametersProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/EventProps.js","webpack:///./node_modules/lodash/_getFuncName.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ElementHelper.js","webpack:///./node_modules/lodash/_createCtor.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/HistoryTimeToLiveProps.js","webpack:///./node_modules/lodash/_castFunction.js","webpack:///./node_modules/lodash/isEmpty.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/CandidateStarter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/LinkEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Callable.js","webpack:///./node_modules/bpmn-js-properties-panel/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/CreateBusinessObjectListHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/TimerEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/External.js","webpack:///./node_modules/@bpmn-io/extract-process-variables/dist/index.esm.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/CustomElementsPropertiesActivator.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ListenerFieldInjectionProps.js","webpack:///./node_modules/lodash/_realNames.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/NameProps.js","webpack:///./node_modules/lodash/_baseValues.js","webpack:///./node_modules/lodash/bind.js","webpack:///./node_modules/lodash/_getData.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/Name.js","webpack:///./node_modules/lodash/wrapperLodash.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/ElementTemplates.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConnectorOutputParametersProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/CmdHelper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ExtensionElementsHelper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/UserTaskProps.js","webpack:///./node_modules/lodash/_baseDifference.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ListenerProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/IdProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/Utils.js","webpack:///./node_modules/lodash/_composeArgsRight.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ProcessVariablesProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/Validator.js","webpack:///./node_modules/lodash/_isLaziable.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/InputParameters.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/HistoryTimeToLive.js","webpack:///./node_modules/lodash/values.js","webpack:///./node_modules/lodash/keyBy.js","webpack:///./node_modules/lodash/xor.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ServiceTaskDelegateProps.js","webpack:///./node_modules/lodash/_baseLodash.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/ChooserProps.js","webpack:///./node_modules/lodash/_createCurry.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/cmd/ChangeElementTemplateHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/MultiInstanceLoopProps.js","webpack:///./node_modules/lodash/isUndefined.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/TextBoxEntryFactory.js","webpack:///./node_modules/lodash/_setWrapToString.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/AsyncCapableHelper.js","webpack:///./node_modules/lodash/transform.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/SignalEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/UpdateBusinessObjectListHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/InputOutputHelper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ErrorEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/TableEntryFactory.js","webpack:///./node_modules/lodash/_getHolder.js","webpack:///./node_modules/lodash/_baseReduce.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/FieldInjectionProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ScriptTaskProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/LabelFactory.js","webpack:///./node_modules/lodash/_LazyWrapper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConditionalProps.js","webpack:///./node_modules/lodash/isBoolean.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/JobPriority.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/index.js","webpack:///./node_modules/lodash/_arrayReduce.js","webpack:///./node_modules/lodash/_createHybrid.js","webpack:///./node_modules/lodash/_metaMap.js","webpack:///./node_modules/lodash/forEach.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/TasklistProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/LinkProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/ElementTemplatesLoader.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/ComboEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ExternalTaskConfigurationProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ExtensionElements.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Listener.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/cmd/index.js","webpack:///./node_modules/selection-update/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/index.js","webpack:///./node_modules/lodash/_basePullAt.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/CamundaPropertiesProvider.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/index.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/EntryFieldDescription.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/MultiInstanceLoopCharacteristics.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/CollapsibleEntryFactory.js","webpack:///./node_modules/lodash/_createBind.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/ErrorEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/CheckboxEntryFactory.js","webpack:///./node_modules/lodash/filter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/AsynchronousContinuationProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/CategoryHelper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ImplementationType.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/OutputParametersProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/ProcessProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/FormHelper.js","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/lodash/flattenDeep.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/CustomProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/JobRetryTimeCycle.js","webpack:///./node_modules/lodash/_baseFilter.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Script.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ConnectorInputParametersProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/OutputParameters.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/CompensateEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Delegate.js","webpack:///./node_modules/lodash/_reorder.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/ElementReferenceProperty.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/InputOutputParameter.js","webpack:///./node_modules/lodash/_mergeData.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ResultVariable.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/StartEventInitiator.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/ErrorEventProps.js","webpack:///./node_modules/lodash/_baseSetData.js","webpack:///./node_modules/lodash/_countHolders.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/VersionTagProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/PropertiesActivator.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/PropertiesProps.js","webpack:///./node_modules/lodash/_getWrapDetails.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/OutputParametersProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ExternalTaskPriority.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/TextInputEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/DocumentationProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/AutoSuggestTextBoxFactory.js","webpack:///./node_modules/lodash/remove.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/ConditionalEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/CreateAndReferenceHandler.js","webpack:///./node_modules/lodash/_wrapperClone.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/VariableMappingProps.js","webpack:///./node_modules/lodash/reduce.js","webpack:///./node_modules/lodash/_composeArgs.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/InputParametersProps.js","webpack:///./node_modules/lodash/_createPartial.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/PropertiesPanel.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/MultiCommandHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/EventDefinitionHelper.js","webpack:///./node_modules/lodash/_insertWrapDetails.js","webpack:///./node_modules/lodash/assign.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ParticipantHelper.js","webpack:///./node_modules/lodash/map.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/DescriptionProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/SelectEntryFactory.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/cmd/UpdateBusinessObjectHandler.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/helper/ImplementationTypeHelper.js","webpack:///./node_modules/lodash/isString.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/ProcessVariables.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/AsyncContinuation.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/Helper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/ReplaceBehavior.js","webpack:///./node_modules/lodash/_createRecurry.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/EntryFactory.js","webpack:///./node_modules/lodash/_replaceHolders.js","webpack:///./node_modules/lodash/_createWrap.js","webpack:///./node_modules/lodash/_LodashWrapper.js","webpack:///./node_modules/lodash/isNull.js","webpack:///./node_modules/lodash/_baseXor.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/CandidateStarterProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/FormProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/Tasklist.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/ExecutableProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/element-templates/parts/Helper.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/EscalationEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/ToggleSwitchEntryFactory.js","webpack:///./node_modules/lodash/_setData.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/EventDefinitionReference.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/bpmn/parts/implementation/MessageEventDefinition.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/JobConfigurationProps.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/provider/camunda/parts/implementation/FieldInjection.js","webpack:///./node_modules/bpmn-js-properties-panel/lib/factory/ValidationAwareTextInput.js","webpack:///./node_modules/lodash/_updateWrapDetails.js","webpack:///./node_modules/mitt/dist/mitt.es.js","webpack:///./node_modules/scroll-tabs/index.js"],"names":["is","find","entryFactory","cmdHelper","ImplementationTypeHelper","scriptImplementation","timerImplementation","isTimeoutTaskListener","listener","eventType","event","getTimerEventDefinition","bo","eventDefinitions","module","exports","group","element","bpmnFactory","options","translate","LISTENER_TYPE_LABEL","class","expression","delegateExpression","script","getSelectedListener","classProp","expressionProp","delegateExpressionProp","scriptProp","executionListenerEventTypeOptions","isSequenceFlow","name","value","taskListenerEventTypeOptions","isSelected","node","entries","push","selectBox","id","label","modelProperty","emptyParameter","get","set","values","updateBusinessObject","selectOptions","eventTypeOptions","selectedListener","isTaskListener","isExecutionListener","hidden","textField","listenerId","undefined","update","validate","listenerType","getImplementationType","create","dataValueLabel","listenerValueLabel","listenerValue","html","template","isScript","timerEventDefinitionHandler","timerEventDefinition","createTimerEventDefinition","timerOptions","idPrefix","getBusinessObject","callable","flattenDeep","assign","getCallableType","boCalledElement","boCaseRef","callActivityType","DEFAULT_PROPS","calledElement","type","props","updateProperties","__depends__","default","__init__","propertiesProvider","InputOutputHelper","getServiceTaskLikeBusinessObject","getConnector","isConnector","connector","connectorId","factory","elementHelper","extensionElementsHelper","utils","forEach","generatePropertyId","nextId","getPropertyValues","parent","properties","getPropertiesElement","isExtensionElements","getPropertiesElementInsideExtensionElements","extensionElements","elem","getParent","modelProperties","createParent","addLabel","getElements","addElement","commands","result","cmd","createElement","addAndRemoveElementsFromList","propertyProps","prop","indexOf","property","addElementsTolist","updateElement","idx","validationError","isIdValid","removeElement","propertyValues","currentProperty","removeElementsFromList","length","removeEntry","table","createInputParameter","binding","parameterValue","parameterDefinition","scriptFormat","definition","createOutputParameter","source","createCamundaProperty","createCamundaIn","createCamundaInOutAttrs","createCamundaInWithBusinessKey","businessKey","createCamundaOut","createCamundaExecutionListenerScript","createCamundaFieldInjection","string","target","sourceExpression","variables","local","k","flatten","filter","findIndex","domClasses","classes","domEvent","domify","domQuery","query","findExtension","findInputParameter","escapeHTML","InputOutputParameter","CAMUNDA_INPUT_PARAMETER_TYPE","MAX_DESCRIPTION_LENGTH","EMPTY_PARAMETER","findEntry","entry","splice","createDescriptionEntry","description","show","descriptionText","toggleExpanded","expanded","add","textContent","expand","remove","descriptionShortened","appendChild","slice","bind","removeInputParameter","updates","inputOutput","inputParameter","createNewInputParameter","elementTemplates","inputEntries","onToggle","entryNode","currentEntryId","dataset","collapsible","setOpen","renderInputParameter","templateProperty","collapsibleEntry","parameterEntries","getParameter","parameter","isOpen","assignmentIsOn","inputImplementation","nameIdx","defaultGet","title","toggleSwitch","labelOn","labelOff","descriptionOff","isOn","isActive","inputParameters","p","concat","isAny","eventDefinitionHelper","message","signal","error","escalation","timer","compensation","condition","elementRegistry","events","messageEventDefinition","getMessageEventDefinition","signalEventDefinition","getSignalEventDefinition","errorEvents","errorEventDefinition","getErrorEventDefinition","escalationEvents","showEscalationCodeVariable","escalationEventDefinition","getEscalationEventDefinition","timerEvents","compensationEvents","compensateEventDefinition","getCompensateEventDefinition","conditionalEvents","conditionalEventDefinition","getConditionalEventDefinition","realNames","objectProto","Object","prototype","hasOwnProperty","getFuncName","func","array","call","data","otherFunc","ElementHelper","elementType","$parent","baseCreate","isObject","createCtor","Ctor","args","arguments","thisBinding","apply","historyTimeToLive","businessObject","identity","castFunction","baseKeys","getTag","isArguments","isArray","isArrayLike","isBuffer","isPrototype","isTypedArray","mapTag","setTag","isEmpty","tag","size","key","candidateStarterGroupsEntry","candidateStarterGroups","candidateStarterUsersEntry","candidateStarterUsers","entryFieldDescription","link","buttonLabel","showLink","handleClick","Error","resource","document","createDocumentFragment","cssClasses","resultVariable","attributeInfo","bpmn","version","versionTag","tenantId","cmmn","dmn","mapDecisionResultOptions","delegateVariableMappingOptions","getCamundaInWithBusinessKey","camundaIn","camundaInParams","getExtensionElements","param","setBusinessKey","text","camundaInWithBusinessKey","deleteBusinessKey","camundaInExtensions","isSupportedCallableType","bindingOptions","getAttribute","getCallActivityBindingValue","attr","getDelegateVariableMappingType","boVariableMappingClass","boVariableMappingDelegateExpression","delegateVariableMappingType","callableElementRef","callableElementLabel","newCallableElementRef","elementRef","bindingOption","callableBinding","attrVer","attrVerTag","callableVersion","checkbox","callableBusinessKey","hideResultVariable","mapDecisionResult","delegateVariableMapping","delegateVariableMappingLabel","CreateBusinessObjectListHandler","this","_elementRegistry","_bpmnFactory","ensureNotNull","ensureList","toString","$inject","execute","context","currentObject","propertyName","newObjects","changed","childObjects","self","obj","childObject","previousChilds","revert","getTimerDefinitionType","timeDate","timeCycle","timeDuration","getTimerDefinition","timerOrFunction","createFormalExpression","body","TimerEventDefinition","prefix","timerDefinition","timerDefinitionType","newType","oldType","isExternal","topicEntry","externalTopic","getInputOutput","getInputParameters","getParameters","getOutputParameters","getFormFields","formData","getFormData","getOutMappings","elements","extensionValues","$instanceOf","getParents","parents","current","eachElement","fn","depth","s","i","e","unique","canAdd","selfAndFlowElements","maxDepth","processedFlowElements","flowElements","selfAndAllFlowElements","allowDuplicates","getElement","elementId","rootElement","allElements","addVariableToList","variablesList","newVariable","foundIdx","variable","scope","origin","combineArrays","createProcessVariable","flowElement","defaultScope","getScope","globalScope","variableName","scopedParent","is$1","hasInputParameter","input","a","b","extractOutputParameters","containerElement","processVariables","outputParameters","extractResultVariables","getResultVariable","extractFormFields","formFields","field","extractOutMappings","outMappings","mapping","extractors","getProcessVariables","extractor","getVariablesForScope","allVariables","scopeElement","scopeVariables","parentsScopeVariables","combineArrays$1","inherits","getTemplateId","isBoolean","PropertiesActivator","HIGHER_PRIORITY","CustomElementsPropertiesActivator","eventBus","isEntryVisible","tab","templateId","isPropertyEditable","isEntryEditable","CUSTOM_PROPERTIES_PATTERN","DEFAULT_ENTRIES_VISIBLE","_all","isCustomEntry","test","entryId","entriesVisible","defaultVisible","entryVisible","getProperty","editable","index","replace","indexes","split","scopeName","parseInt","isNaN","scopes","fieldInjection","insideListener","fieldInjectionEntry","nameEntryFactory","createCategoryValue","canvas","initializeCategory","semantic","getRootElement","definitions","categoryValue","categoryValueRef","setGroupName","newLabel","getGroupName","nameOptions","arrayMap","baseValues","object","baseRest","createWrap","getHolder","replaceHolders","WRAP_BIND_FLAG","WRAP_PARTIAL_FLAG","thisArg","partials","bitmask","holders","placeholder","metaMap","noop","getData","nameEntry","textBox","LazyWrapper","LodashWrapper","baseLodash","isObjectLike","wrapperClone","lodash","constructor","isString","isUndefined","getTemplateVersion","ElementTemplates","_templates","templates","getDefault","getAll","appliesTo","isDefault","map","outputParametersEntry","insideConnector","CmdHelper","newProperties","listPropertyName","objectsToAdd","objectsToPrepend","referencePropertyName","objectsToRemove","setList","updatedObjectList","ExtensionElementsHelper","addEntry","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","LARGE_ARRAY_SIZE","baseDifference","iteratee","comparator","includes","isCommon","valuesLength","outer","computed","valuesIndex","listenerEntry","validationAwareTextField","setProperty","labelTarget","idValue","idError","domClear","clear","Ids","SPACE_REGEX","QNAME_REGEX","ID_REGEX","HTML_ESCAPE_MAP","'","selectedOption","selectedIndex","selectedType","elementSyntax","inputNode","typeSelect","getRoot","filterElementsByType","objectList","list","findRootElementsByType","referencedType","root","rootElements","removeAllChildren","domElement","firstChild","removeChild","addEmptyParameter","refreshOptionsModel","model","referableObjects","updateOptionsDropDown","domSelector","option","optionEntry","assigned","$model","ids","idExists","validateId","containsSpace","nextPrefixed","triggerClickEvent","evt","createEvent","MouseEvent","view","window","bubbles","cancelable","initEvent","dispatchEvent","createEventObject","fireEvent","str","match","createDropdown","dropdown","_onGlobalClick","menu","dropdownNode","buttonNode","menuNode","createOnGlobalClick","_event","onGlobalClick","contains","removeEventListener","addEventListener","toggle","menuItem","menuItemNode","onClick","nativeMax","Math","max","composeArgsRight","isCurried","argsIndex","argsLength","holdersIndex","holdersLength","rightIndex","rightLength","rangeLength","Array","isUncurried","offset","canHaveOverview","processVariablesEntries","DROPDOWN_TYPE","VALID_TYPES","PROPERTY_TYPE","CAMUNDA_PROPERTY_TYPE","CAMUNDA_OUTPUT_PARAMETER_TYPE","CAMUNDA_IN_TYPE","CAMUNDA_OUT_TYPE","CAMUNDA_IN_BUSINESS_KEY_TYPE","CAMUNDA_EXECUTION_LISTENER","CAMUNDA_FIELD","VALID_BINDING_TYPES","Validator","_templatesById","_validTemplates","_errors","addAll","_logError","err","_validateTemplate","_validateProperties","_validateScopes","validProperties","_validateProperty","bindingType","join","choices","every","isDropdownChoiceValid","getErrors","getValidTemplates","c","isLaziable","funcName","other","inputOutputHelper","getParametersHeading","createInputOutput","newElem","createParameter","generateElementId","scheduleCommands","_commands","_","getInputParameterEntries","params","onRemove","append","items","arrays","isInputOutputSupported","parametersOptions","historyTimeToLiveEntry","keys","baseAssignValue","createAggregator","keyBy","arrayFilter","baseXor","isArrayLikeObject","xor","implementationType","delegate","external","domClosest","closest","isDmnCapable","isExternalCapable","isServiceTaskLike","getTabNode","el","containerEl","hasDmnSupport","hasExternalSupport","hasServiceTaskLikeSupport","connectorTabEl","innerHTML","getOption","getOptions","ELEMENT_TEMPLATE_OPTION_EMPTY","isNull","pick","applyTemplate","newTemplate","oldTemplate","elementTemplateOption","optionId","createHybrid","createRecurry","createCurry","arity","wrapper","findExtensions","EventDefinitionHelper","CAMUNDA_SERVICE_TASK_LIKE","ChangeElementTemplateHandler","commandStack","modeling","_commandStack","_modeling","findOldBusinessObject","oldProperty","oldBinding","oldBindingType","oldBusinessObject","findOldProperty","newProperty","oldProperties","newBinding","newBindingName","newBindingType","oldBindingName","findOldScopeElement","findOldScopeTemplate","propertyChanged","conditionExpression","oldPropertyValue","preExecute","_updateCamundaModelerTemplate","_updateProperties","_updateCamundaExecutionListenerProperties","_updateCamundaFieldProperties","_updateCamundaInOutProperties","_updateCamundaInputOutputParameterProperties","_updateCamundaPropertyProperties","newScopeTemplate","_updateScopeProperties","_getOrCreateExtensionElements","oldExecutionListeners","newExecutionListeners","propertyValue","oldFields","oldField","oldInsAndOuts","newInOrOut","oldInOurOut","newPropertyValue","oldInputs","oldOutputs","newInputOrOutput","oldInputOrOutput","camundaProperties","oldCamundaProperties","oldCamundaProperty","_updateConditionExpression","language","camundaServiceTaskLikeProperty","oldScopeTemplate","multiInstanceLoopCharacteristics","jobRetryTimeCycle","asyncContinuation","getLoopCharacteristics","loopCharacteristics","ensureMultiInstanceSupported","labelPrefix","defaultParameters","canBeShown","isShown","getWrapDetails","insertWrapDetails","setToString","updateWrapDetails","setWrapToString","reference","isAsyncBefore","isAsyncAfter","isExclusive","getFailedJobRetryTimeCycle","removeFailedJobRetryTimeCycle","retryTimeCycles","cycle","arrayEach","baseForOwn","baseIteratee","getPrototype","isFunction","transform","accumulator","isArr","isArrLike","eventDefinitionReference","elementReferenceProperty","elementName","referenceProperty","newElementIdPrefix","shouldValidate","UpdateBusinessObjectListHandler","previousList","listCopy","parentObject","ModelUtil","implementationTypeHelper","elems","getInputParameter","getOutputParameter","areOutputParametersSupported","showErrorCodeVariable","showErrorMessageVariable","getValue","modelPropertyValue","setValue","domAttr","updateSelection","TABLE_ROW_DIV_SNIPPET","DELETE_ROW_BUTTON_SNIPPET","createInputRowTemplate","canRemove","createInputTemplate","columns","createLabelRowTemplate","labels","createLabelTemplate","newElement","diff","oldValues","valueEqual","oldValue","allKeys","n","o","getEntryNode","getContainer","getSelection","start","selectionStart","end","selectionEnd","setSelection","selection","labelRow","canUpdate","setControlValue","boElements","__invalidValues","invalidValues","action","__action","valuesToValidate","createListEntryTemplate","scopeNode","container","deleteElement","rowToDelete","delegateTarget","parentNode","rowNode","showTable","validateListItem","isReadOnly","activeElement","baseReduce","collection","initAccum","eachFunc","boResultVariable","scriptResultVariable","divider","labelText","showLabel","MAX_ARRAY_LENGTH","__wrapped__","__actions__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","isConditionalSource","conditionType","conditionLanguage","conditionOrConditionExpression","conditionProps","validationResult","isExpression","canClear","CONDITIONAL_SOURCES","baseGetTag","boolTag","jobPriorityEntry","jobPriority","customElementsPropertiesActivator","elementTemplatesLoader","replaceBehavior","arrayReduce","composeArgs","countHolders","reorder","WRAP_BIND_KEY_FLAG","WRAP_CURRY_FLAG","WRAP_CURRY_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_FLIP_FLAG","partialsRight","holdersRight","argPos","ary","isAry","isBind","isBindKey","isFlip","holdersCount","newHolders","reverse","WeakMap","baseEach","tasklist","getLinkEventDefinition","linkEventDefinition","eventDefinition","linkEvents","ElementTemplatesLoader","loadTemplates","_loadTemplates","_eventBus","_elementTemplates","on","reload","templateErrors","setTemplates","validator","errors","validTemplates","templatesChanged","fire","selectEntryFactory","comboBox","customValue","customName","isCustomValue","isCustom","comboOptions","showCustomInput","modifiedValues","comboBoxEntry","fragment","externalTaskPriority","getSelectBox","currentTab","getSelected","CREATE_EXTENSION_ELEMENT_ACTION","REMOVE_EXTENSION_ELEMENT_ACTION","idGeneration","createExtensionElement","canCreate","removeExtensionElement","onSelectionChange","hideElements","hideExtensionElements","canBeHidden","setOptionLabelValue","defaultSize","resizable","selectionChanged","createOption","initSelectionSize","optionsLength","extensionElementValue","deselect","generatedId","lastChild","selected","disableRemove","selectElement","extensionElementsEntry","getListeners","CAMUNDA_EXECUTION_LISTENER_ELEMENT","CAMUNDA_TASK_LISTENER_ELEMENT","executionListenerEntry","taskListenerEntry","listeners","initialEvent","processRef","registerHandlers","registerHandler","applyDefaultTemplate","shape","connection","command","commandContext","calculateUpdate","currentSelection","currentValue","newValue","currentCursor","newCursor","currentTail","substring","lastIndexOf","createDiff","newStart","newEnd","range","insert","l_str","l_char","s_str","s_char","l_idx","s_idx","charAt","l_start","s_start","complete","l_end","s_end","propertiesPanel","baseUnset","isIndex","arrayProto","basePullAt","lastIndex","previous","asyncCapableHelper","processProps","eventProps","linkProps","documentationProps","idProps","nameProps","executableProps","serviceTaskDelegateProps","userTaskProps","asynchronousContinuationProps","callActivityProps","multiInstanceProps","conditionalProps","scriptProps","errorProps","formProps","startEventInitiator","variableMapping","processVariablesProps","listenerProps","listenerDetails","listenerFields","elementTemplateDescriptionProps","elementTemplateChooserProps","elementTemplateCustomProps","elementTemplateInputParametersProps","elementTemplateOutputParametersProps","connectorDetails","connectorInputParameters","connectorOutputParameters","jobConfiguration","candidateStarter","externalTaskConfiguration","fieldInjections","isExternalTaskPriorityEnabled","externalBo","isExternalTask","isJobConfigEnabled","getListenerLabel","PROCESS_KEY_HINT","TASK_KEY_HINT","getIdOptions","getNameOptions","getProcessOptions","processIdDescription","createElementTemplateGroups","descriptionGroup","idOptions","elementTemplateInputParametersGroup","elementTemplateOutputParametersGroup","customFieldsGroups","createGeneralTabGroups","generalGroup","detailsGroup","multiInstanceGroup","asyncGroup","jobConfigurationGroup","enabled","externalTaskGroup","candidateStarterGroup","historyTimeToLiveGroup","tasklistGroup","documentationGroup","groups","createVariablesTabGroups","variablesGroup","createProcessVariablesTabGroups","processVariablesGroup","createFormsTabGroups","formGroup","createListenersTabGroups","listenersGroup","listenerDetailsGroup","listenerFieldsGroup","createInputOutputTabGroups","inputParametersGroup","outputParametersGroup","createConnectorTabGroups","connectorDetailsGroup","connectorInputParametersGroup","connectorOutputParametersGroup","createFieldInjectionsTabGroups","fieldGroup","createExtensionElementsGroups","propertiesGroup","CamundaPropertiesProvider","getTabs","generalTab","elementTemplateTab","variablesTab","processVariablesTab","formsTab","listenersTab","inputOutputTab","connectorTab","fieldInjectionsTab","extensionsTab","HANDLERS","CommandInitializer","handler","escapeText","escaped","pattern","exec","encodeURI","getBody","getLoopCardinality","getLoopCardinalityValue","loopCardinality","getCompletionCondition","getCompletionConditionValue","completionCondition","getCollection","getElementVariable","updateFormalExpression","expressionProps","existingExpression","isValid","notification","elementVariable","Collapsible","open","classList","actionId","createBind","canBeDisabled","disabled","res","isDisabled","isHidden","baseFilter","predicate","collectionAdd","CategoryHelper","category","DEFAULT_DELEGATE_PROPS","DELEGATE_PROPS","DMN_CAPABLE_PROPS","EXTERNAL_CAPABLE_PROPS","DEFAULT_OPTIONS","DMN_OPTION","EXTERNAL_OPTION","CONNECTOR_OPTION","SCRIPT_OPTION","getType","hasScriptSupport","implType","connectors","participantHelper","idEntry","getProcessBusinessObject","processId","modifyProcessBusinessObject","processIdError","processNameEntry","FormHelper","fields","getFormField","getConstraints","formField","validation","constraints","getEnumValues","baseMap","baseFlatten","INFINITY","findOutputParameter","findCamundaProperty","findCamundaInOut","CAMUNDA_EXECUTION_LISTENER_TYPE","BASIC_MODDLE_TYPES","EXTENSION_BINDING_TYPES","IO_BINDING_TYPES","IN_OUT_BINDING_TYPES","propertyGetter","getPropertyValue","objectWithKey","propertySetter","setPropertyValue","propertyValidator","validateValue","camundaProperty","ioParameter","ioElement","executionListener","bindingName","item","unknownPropertyBinding","existingCamundaProperty","newCamundaProperty","existingIoParameter","newIoParameter","existingInOut","newInOut","moddlePropertyDescriptor","$descriptor","propertiesByName","moddleType","existingFieldInjections","newFieldInjections","console","warn","notEmpty","maxLength","minLength","matchesPattern","propertyWithScope","regexp","RegExp","getDefaultType","renderCustomField","propertyType","entryOptions","customFieldsGroup","idScopeName","customScopeFieldsGroup","propertyId","scopedProperty","createExtensionElements","createFailedJobRetryTimeCycle","retryTimeCycleEntry","retryTimeCycle","newCycle","getScriptType","selector","parentElement","scriptLanguagePropName","scriptValuePropName","isFormatRequired","boScriptResource","boScript","boScriptFormat","scriptResourceValue","scriptType","scriptValue","clearScriptFormat","btnNode","canClearScriptFormat","clearScriptResource","canClearScriptResource","clearScript","canClearScript","isScriptResource","inputParametersEntry","getOutputParameterEntries","outputParameter","getContainedActivities","getFlowElements","getContainedBoundaryEvents","isCompensationEventAttachedToActivity","activity","boundaryEvents","activityId","boundaryEvent","attachedToRef","canActivityBeCompensated","triggeredByEvent","getActivitiesForCompensation","getActivitiesForActivityRef","activitiesForActivityRef","createActivityRefOptions","activities","waitForCompletion","activityRef","DELEGATE_TYPES","PROPERTIES","isDelegate","getDelegationLabel","delegateEntry","delegationLabel","copyArray","nativeMin","min","arrLength","oldArray","validationErrors","sortBy","isList","isMap","sortByName","isInsideExpression","openIndex","closeIndex","isInsideUnclosedExpression","findWordInContentEditable","word","editorNode","focusNode","children","childNodes","textBefore","child","innerText","wholeText","getDescription","typeInfo","nameValue","parameterType","$type","createParameterTypeElem","autoSuggest","getItems","withOutCurrent","sorted","canSuggest","globalIndex","newEntry","PLACEHOLDER","WRAP_CURRY_BOUND_FLAG","WRAP_REARG_FLAG","mergeData","srcBitmask","newBitmask","isCombo","resultVariableEntry","isCatchingErrorEvent","baseSetData","versionTagEntry","processBo","DEFAULT_PRIORITY","priority","propertiesEntry","reWrapDetails","reSplitDetails","removeOutputParameter","createNewOutputParameter","outputEntries","renderOutputParameter","externalTaskPriorityEntry","taskPriority","defaultButtonAction","defaultButtonShow","actionName","buttonAction","actionMethod","method","showName","buttonShow","showMethod","documentations","documentation","newObjectList","elementDocuEntry","processDocuEntry","debounce","CLASS_ACTIVE","FOCUS_LEAVE_DELAY","TEXT_NODE_NAME","SUGGESTION_LIST_BOX_THRESHOLD","autoSuggestTextBox","getSuggestionListPosition","listNode","getSelectionRange","cursorBounds","getBoundingClientRect","clientBounds","listBounds","coordinates","x","right","width","y","top","height","orientation","left","position","handleFocusLeave","clearSuggestionList","hideSuggestionList","suggestItems","caretPosition","getCaretPosition","updateSuggestionList","createSuggestionItem","setPosition","itemNode","handleItemClick","wordIndex","currentWord","selectRange","execCommand","getWordUnderCursor","results","itemLowerCase","toLowerCase","valueLowerCase","getRangeAt","startOffset","createRange","setStart","setEnd","removeAllRanges","addRange","currentCursorPositon","nodeName","allWords","findWords","matchValue","wordStart","wordEnd","matchAll","regex","matches","style","isEventSubProcess","isConditionalStartEvent","CreateAndReferenceElementHandler","referencingObject","newObject","newObjectContainer","newObjectParent","referencedObject","previousReference","clone","__chain__","__index__","__values__","getCamundaInOutMappings","getVariableMappings","camundaMappings","getInOutType","inOutType","CAMUNDA_IN_EXTENSION_ELEMENT","CAMUNDA_OUT_EXTENSION_ELEMENT","WHITESPACE_REGEX","inOutTypeOptions","inEntry","outEntry","variableMappings","mappingValue","mappingType","variablesMappings","sourceLabel","selectedMapping","reduce","leftIndex","leftLength","createPartial","domQueryAll","queryAll","domRemove","domDelegate","domMatches","scrollTabs","HIDE_CLASS","DEBOUNCE_DELAY","isToggle","isSelect","isContentEditable","getPropertyPlaceholders","placeholders","getFormControls","all","controls","getFormControlValuesInScope","controlNodes","controlNode","checked","getFormControlValues","listContainer","listNodes","valuesEqual","v","extractEntries","tabs","extractGroups","PropertiesPanel","config","_canvas","_propertiesProvider","_init","setInputValue","contentEditable","setSelectValue","setToggleValue","nodeValue","setTextValue","getContentEditableSelection","focusOffset","anchorOffset","setContentEditableSelection","domRange","domSelection","isImplicitRoot","newSelection","tabBarNode","_container","scroller","selectors","tabsContainer","ignore","active","newActiveNode","oldActiveNode","direction","linkNode","tabId","activateTab","_current","detach","_bindListeners","attachTo","jquery","_emit","panel","tabLinks","tabLink","visibleTabs","has","activeTab","visibleTabLinks","activeTabLink","activeTabId","activeTabNode","_entriesChanged","_create","_updateActivation","prevEntries","prevEntryIds","entryIds","handleChange","getEntry","onChangeAction","isEntryDirty","executeAction","applyChanges","updateState","handlePaste","clipboardData","preventDefault","handleSuggestItems","handleInput","eventHandlerId","keyCode","stopPropagation","updateShow","updateDisable","showNodes","showNode","expr","shouldShow","nodes","currentNode","shouldDisable","commandToExecute","applyValidationErrors","valid","errorMessageNode","insertBefore","nextSibling","listEntryNodes","listValue","listEntryNode","containerNode","panelNode","_createPanel","_bindTemplate","inputNodes","isGroupVisible","groupNode","isTabVisible","toggleVisible","visible","updateLabel","labelNode","tabNode","tabLinkNode","tabVisible","groupVisible","listEntryContainer","existingElements","listItemNode","entriesToRemove","j","headerNode","tabLinksNode","tabContainerNode","tabIndex","querySelector","defaultPrevented","cssClass","MultiCommandHandler","getEventDefinition","reWrapComment","details","assignValue","copyObject","createAssigner","ParticipantHelper","getVersionOrDateFromTemplate","getEventDefinitionType","createTemplateNotFoundEntry","createUpdateTemplateEntry","oldElementTemplate","newElementTemplate","newElementTemplateVersion","findNewestElementTemplate","currentElementTemplate","elementTemplate","newestElementTemplate","eventDefinitionType","replaceElement","select","selectbox","inputName","UpdateBusinessObjectHandler","getProperties","propertyNames","setProperties","referenceType","extensionsElementHelper","isListener","decisionRef","cls","stringTag","groupBy","populateElementNames","names","canHaveProcessVariables","groupByScope","createdInList","createVariablesList","scopePrefix","variableEntries","createdInHtml","withNames","byScope","canRemoveFailedJobRetryTimeCycle","asyncBeforeEntry","asyncBefore","asyncAfterEntry","asyncAfter","exclusiveEntry","exclusive","TEMPLATE_ID_ATTR","TEMPLATE_VERSION_ATTR","types","matcher","isInOut","parameters","ReplaceBehavior","allowed","setData","WRAP_PARTIAL_RIGHT_FLAG","wrapFunc","isCurry","newHoldersRight","newPartials","newPartialsRight","newData","textInputField","checkboxField","selectBoxField","comboBoxField","textBoxField","validationAwareTextInputField","tableField","labelEntry","autoSuggestTextBoxField","setDefaultParameters","defaultSet","defaultValidate","EntryFactory","resIndex","toInteger","FUNC_ERROR_TEXT","TypeError","setter","chainAll","baseUniq","othIndex","formHelper","each","generateValueId","formFieldTextField","getSelectedFormField","selectedFormField","ensureFormKeyAndDataSupported","formKey","formFieldsEntry","formBusinessKeyFormFieldEntry","formDataExtension","storedValue","isStartEvent","trim","existingFormField","f","enumValue","newConstraint","constraint","currentConstraint","isStartableInTasklistEntry","isStartableInTasklist","executableEntry","emptyOption","defaultTemplate","toDateString","timestamp","date","Date","year","getFullYear","month","leftPad","String","getMonth","day","getDate","character","metadata","created","updated","codeVariable","escalationCodeVariable","descriptionOn","isOff","shortOut","findElementById","selectedElement","optionTemplate","CAMUNDA_FIELD_EXTENSION_ELEMENT","getSelectedField","fieldEntry","getCamundaFields","getCamundaListenerFields","getFieldType","fieldType","expressionValue","stringValue","camundaFields","newFieldElem","selectedField","fieldName","fieldTypeOptions","fieldValue","__lastInvalidValue","wrapFlags","pair","sort","mitt","off","emit","scrollSymbolLeft","scrollSymbolRight","ScrollTabs","$el","_createScrollButtons","_bindEvents","__scrollTabs","_createButton","className","button","getActiveTabNode","getTabsContainerNode","getAllTabNodes","getVisibleTabs","allTabs","getAdjacentTab","referenceTabNode","_bindWheelEvent","_bindTabClickEvents","_bindScrollButtonEvents","scrollToTabNode","sign","deltaY","oldActiveTab","newActiveTab","oldActiveTabNode","newActiveTabNode","tabsContainerNode","tabWidth","offsetWidth","tabOffsetLeft","offsetLeft","tabOffsetRight","containerWidth","containerScrollLeft","scrollLeft","overflow","scrollWidth","overflowClass"],"mappings":"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","file":"js/chunk-3b352f84.e50d5057.js","sourcesContent":["'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar find = require('min-dash').find;\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../helper/CmdHelper'),\n    ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper'),\n    scriptImplementation = require('./implementation/Script'),\n    timerImplementation = require('../../bpmn/parts/implementation/TimerEventDefinition');\n\nmodule.exports = function(group, element, bpmnFactory, options, translate) {\n\n  var LISTENER_TYPE_LABEL = {\n    class: translate('Java Class'),\n    expression: translate('Expression'),\n    delegateExpression: translate('Delegate Expression'),\n    script: translate('Script')\n  };\n\n  options = options || {};\n\n  var getSelectedListener = options.getSelectedListener;\n\n  var classProp = 'class',\n      expressionProp = 'expression',\n      delegateExpressionProp = 'delegateExpression',\n      scriptProp = 'script';\n\n  var executionListenerEventTypeOptions = ImplementationTypeHelper.isSequenceFlow(element) ? [\n    { name: translate('take'), value: 'take' }\n  ] : [\n    { name: translate('start'), value: 'start' },\n    { name: translate('end'), value: 'end' }\n  ];\n\n  var taskListenerEventTypeOptions = [\n    { name: translate('create'), value: 'create' },\n    { name: translate('assignment'), value: 'assignment' },\n    { name: translate('complete'), value: 'complete' },\n    { name: translate('delete'), value: 'delete' },\n    { name: translate('update'), value: 'update' },\n    { name: translate('timeout'), value: 'timeout' }\n  ];\n\n  var isSelected = function(element, node) {\n    return getSelectedListener(element, node);\n  };\n\n\n  // eventType ////////////////\n  group.entries.push(entryFactory.selectBox(translate, {\n    id: 'listener-event-type',\n    label: translate('Event Type'),\n    modelProperty: 'eventType',\n    emptyParameter: false,\n\n    get: function(element, node) {\n\n      var listener = getSelectedListener(element, node);\n\n      var eventType = listener && listener.get('event');\n\n      return {\n        eventType: eventType\n      };\n    },\n\n    set: function(element, values, node) {\n      var eventType = values.eventType,\n          listener = getSelectedListener(element, node),\n          eventDefinitions = listener && listener.eventDefinitions;\n\n      // ensure only timeout events can have timer event definitions\n      if (eventDefinitions && eventType !== 'timeout') {\n        eventDefinitions = [];\n      }\n\n      return cmdHelper.updateBusinessObject(element, listener,\n        {\n          event: eventType,\n          eventDefinitions: eventDefinitions\n        }\n      );\n    },\n\n    selectOptions: function(element, node) {\n      var eventTypeOptions;\n\n      var selectedListener = getSelectedListener(element, node);\n      if (ImplementationTypeHelper.isTaskListener(selectedListener)) {\n        eventTypeOptions = taskListenerEventTypeOptions;\n      } else if (ImplementationTypeHelper.isExecutionListener(selectedListener)) {\n        eventTypeOptions = executionListenerEventTypeOptions;\n      }\n\n      return eventTypeOptions;\n\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  // listenerId ///////////////\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'listener-id',\n    label: translate('Listener Id'),\n    modelProperty: 'listenerId',\n\n    get: function(element, node) {\n      var value = {},\n          listener = getSelectedListener(element, node);\n\n      value.listenerId = (listener && listener.get('id')) || undefined;\n\n      return value;\n    },\n\n    set: function(element, values, node) {\n      var update = {},\n          listener = getSelectedListener(element, node);\n\n      update['id'] = values.listenerId || '';\n\n      return cmdHelper.updateBusinessObject(element, listener, update);\n    },\n\n    hidden: function(element, node) {\n      var listener = getSelectedListener(element, node);\n\n      return !ImplementationTypeHelper.isTaskListener(listener);\n    },\n\n    validate: function(element, values, node) {\n      var value = values.listenerId,\n          listener = getSelectedListener(element, node),\n          validate = {};\n\n      if (!value && isTimeoutTaskListener(listener)) {\n        validate.listenerId = translate('Must provide a value for timeout task listener');\n      }\n\n      return validate;\n    }\n\n  }));\n\n\n  // listenerType ///////////////\n  group.entries.push(entryFactory.selectBox(translate, {\n    id: 'listener-type',\n    label: translate('Listener Type'),\n    selectOptions: [\n      { value: classProp, name: translate('Java Class') },\n      { value: expressionProp, name: translate('Expression') },\n      { value: delegateExpressionProp, name: translate('Delegate Expression') },\n      { value: scriptProp, name: translate('Script') }\n    ],\n    modelProperty: 'listenerType',\n    emptyParameter: false,\n\n    get: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return {\n        listenerType: ImplementationTypeHelper.getImplementationType(listener)\n      };\n    },\n\n    set: function(element, values, node) {\n      var listener = getSelectedListener(element, node),\n          listenerType = values.listenerType || undefined,\n          update = {};\n\n      update[classProp] = listenerType === classProp ? '' : undefined;\n      update[expressionProp] = listenerType === expressionProp ? '' : undefined;\n      update[delegateExpressionProp] = listenerType === delegateExpressionProp ? '' : undefined;\n      update[scriptProp] = listenerType === scriptProp ? bpmnFactory.create('camunda:Script') : undefined;\n\n      return cmdHelper.updateBusinessObject(element, listener, update);\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  // listenerValue //////////////\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'listener-value',\n    dataValueLabel: 'listenerValueLabel',\n    modelProperty: 'listenerValue',\n\n    get: function(element, node) {\n      var value = {},\n          listener = getSelectedListener(element, node),\n          listenerType = ImplementationTypeHelper.getImplementationType(listener);\n\n      value.listenerValueLabel = LISTENER_TYPE_LABEL[listenerType] || '';\n      value.listenerValue = (listener && listener.get(listenerType)) || undefined;\n\n      return value;\n    },\n\n    set: function(element, values, node) {\n      var update = {},\n          listener = getSelectedListener(element, node),\n          listenerType = ImplementationTypeHelper.getImplementationType(listener);\n\n      update[listenerType] = values.listenerValue || '';\n\n      return cmdHelper.updateBusinessObject(element, listener, update);\n    },\n\n    hidden: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return !listener || listener.script;\n    },\n\n    validate: function(element, values) {\n      var value = values.listenerValue,\n          validate = {};\n\n      if (!value) {\n        validate.listenerValue = translate('Must provide a value');\n      }\n\n      return validate;\n    }\n\n  }));\n\n\n  // script ////////////////////\n  var script = scriptImplementation('scriptFormat', 'value', true, translate);\n\n  group.entries.push({\n    id: 'listener-script-value',\n    html: '<div data-show=\"isScript\">' +\n            script.template +\n          '</div>',\n\n    get: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return listener && listener.script ? script.get(element, listener.script) : {};\n    },\n\n    set: function(element, values, node) {\n      var listener = getSelectedListener(element, node);\n      var update = script.set(element, values, listener);\n      return cmdHelper.updateBusinessObject(element, listener.script, update);\n    },\n\n    validate: function(element, values, node) {\n      var listener = getSelectedListener(element, node);\n      return listener && listener.script ? script.validate(element, values) : {};\n    },\n\n    isScript: function(element, node) {\n      var listener = getSelectedListener(element, node);\n      return listener && listener.script;\n    },\n\n    script: script\n\n  });\n\n\n  // timerEventDefinition //////\n  var timerEventDefinitionHandler = function(element, node) {\n    var listener = getSelectedListener(element, node);\n\n    if (!listener || !isTimeoutTaskListener(listener)) {\n      return;\n    }\n\n    var timerEventDefinition = getTimerEventDefinition(listener);\n\n    if (!timerEventDefinition) {\n      return false;\n    }\n\n    return timerEventDefinition;\n  };\n\n  function createTimerEventDefinition(element, node) {\n\n    var listener = getSelectedListener(element, node);\n\n    if (!listener || !isTimeoutTaskListener(listener)) {\n      return;\n    }\n\n    var eventDefinitions = listener.get('eventDefinitions') || [],\n        timerEventDefinition = bpmnFactory.create('bpmn:TimerEventDefinition');\n\n    eventDefinitions.push(timerEventDefinition);\n\n    listener.eventDefinitions = eventDefinitions;\n\n    return timerEventDefinition;\n  }\n\n  var timerOptions = {\n    idPrefix: 'listener-',\n    createTimerEventDefinition: createTimerEventDefinition\n  };\n\n  timerImplementation(group, element, bpmnFactory, timerEventDefinitionHandler, translate, timerOptions);\n\n};\n\n\n// helpers //////////////\n\nfunction isTimeoutTaskListener(listener) {\n  var eventType = listener && listener.event;\n  return eventType === 'timeout';\n}\n\nfunction getTimerEventDefinition(bo) {\n  var eventDefinitions = bo.eventDefinitions || [];\n\n  return find(eventDefinitions, function(event) {\n    return is(event, 'bpmn:TimerEventDefinition');\n  });\n\n}\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar callable = require('./implementation/Callable');\n\nvar cmdHelper = require('../../../helper/CmdHelper');\n\nvar flattenDeep = require('lodash/flattenDeep');\nvar assign = require('lodash/assign');\n\nfunction getCallableType(element) {\n  var bo = getBusinessObject(element);\n\n  var boCalledElement = bo.get('calledElement'),\n      boCaseRef = bo.get('camunda:caseRef');\n\n  var callActivityType = '';\n  if (typeof boCalledElement !== 'undefined') {\n    callActivityType = 'bpmn';\n  } else\n\n  if (typeof boCaseRef !== 'undefined') {\n    callActivityType = 'cmmn';\n  }\n\n  return callActivityType;\n}\n\nvar DEFAULT_PROPS = {\n  calledElement: undefined,\n  'camunda:calledElementBinding': 'latest',\n  'camunda:calledElementVersion': undefined,\n  'camunda:calledElementTenantId': undefined,\n  'camunda:variableMappingClass' : undefined,\n  'camunda:variableMappingDelegateExpression' : undefined,\n  'camunda:caseRef': undefined,\n  'camunda:caseBinding': 'latest',\n  'camunda:caseVersion': undefined,\n  'camunda:caseTenantId': undefined\n};\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!is(element, 'camunda:CallActivity')) {\n    return;\n  }\n\n  group.entries.push(entryFactory.selectBox(translate, {\n    id : 'callActivity',\n    label: translate('CallActivity Type'),\n    selectOptions: [\n      { name: 'BPMN', value: 'bpmn' },\n      { name: 'CMMN', value: 'cmmn' }\n    ],\n    emptyParameter: true,\n    modelProperty: 'callActivityType',\n\n    get: function(element, node) {\n      return {\n        callActivityType: getCallableType(element)\n      };\n    },\n\n    set: function(element, values, node) {\n      var type = values.callActivityType;\n\n      var props = assign({}, DEFAULT_PROPS);\n\n      if (type === 'bpmn') {\n        props.calledElement = '';\n      }\n      else if (type === 'cmmn') {\n        props['camunda:caseRef'] = '';\n      }\n\n      return cmdHelper.updateProperties(element, props);\n    }\n\n  }));\n\n  group.entries.push(callable(element, bpmnFactory, {\n    getCallableType: getCallableType\n  }, translate));\n\n  group.entries = flattenDeep(group.entries);\n};\n","module.exports = {\n  __depends__: [\n    require('./element-templates'),\n    require('diagram-js/lib/i18n/translate').default\n  ],\n  __init__: [ 'propertiesProvider' ],\n  propertiesProvider: [ 'type', require('./CamundaPropertiesProvider') ]\n};\n","'use strict';\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper'),\n    InputOutputHelper = require('../../../helper/InputOutputHelper');\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nfunction getImplementationType(element) {\n  return ImplementationTypeHelper.getImplementationType(element);\n}\n\nfunction getBusinessObject(element) {\n  return ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n}\n\nfunction getConnector(bo) {\n  return InputOutputHelper.getConnector(bo);\n}\n\nfunction isConnector(element) {\n  return getImplementationType(element) === 'connector';\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'connectorId',\n    label: translate('Connector Id'),\n    modelProperty: 'connectorId',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var connector = bo && getConnector(bo);\n      var value = connector && connector.get('connectorId');\n      return { connectorId: value };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      var connector = getConnector(bo);\n      return cmdHelper.updateBusinessObject(element, connector, {\n        connectorId: values.connectorId || undefined\n      });\n    },\n\n    validate: function(element, values, node) {\n      return isConnector(element) && !values.connectorId ? { connectorId: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isConnector(element);\n    }\n\n  }));\n\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar factory = require('../../../../factory/EntryFactory');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils');\n\nvar assign = require('lodash/assign'),\n    forEach = require('lodash/forEach'),\n    find = require('lodash/find');\n\nfunction generatePropertyId() {\n  return utils.nextId('Property_');\n}\n\n/**\n * Get all camunda:property objects for a specific business object\n *\n * @param  {ModdleElement} parent\n *\n * @return {Array<ModdleElement>} a list of camunda:property objects\n */\nfunction getPropertyValues(parent) {\n  var properties = parent && getPropertiesElement(parent);\n  if (properties && properties.values) {\n    return properties.values;\n  }\n  return [];\n}\n\n/**\n * Get all camunda:Properties object for a specific business object\n *\n * @param  {ModdleElement} parent\n *\n * @return {ModdleElement} a camunda:Properties object\n */\nfunction getPropertiesElement(element) {\n  if (!isExtensionElements(element)) {\n    return element.properties;\n  } else {\n    return getPropertiesElementInsideExtensionElements(element);\n  }\n}\n\n/**\n * Get first camunda:Properties object for a specific bpmn:ExtensionElements\n * business object.\n *\n * @param {ModdleElement} extensionElements\n *\n * @return {ModdleElement} a camunda:Properties object\n */\nfunction getPropertiesElementInsideExtensionElements(extensionElements) {\n  return find(extensionElements.values, function(elem) {\n    return is(elem, 'camunda:Properties');\n  });\n}\n\n/**\n * Returns true, if the given business object is a bpmn:ExtensionElements.\n *\n * @param {ModdleElement} element\n *\n * @return {boolean} a boolean value\n */\nfunction isExtensionElements(element) {\n  return is(element, 'bpmn:ExtensionElements');\n}\n\n/**\n * Create a camunda:property entry using tableEntryFactory\n *\n * @param  {djs.model.Base} element\n * @param  {BpmnFactory} bpmnFactory\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {Array<string>} options.modelProperties\n * @param  {Array<string>} options.labels\n * @param  {function} options.getParent Gets the parent business object\n * @param  {function} options.show Indicate when the entry will be shown, should return boolean\n */\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getParent = options.getParent;\n\n  var modelProperties = options.modelProperties,\n      createParent = options.createParent;\n\n  var bo = getBusinessObject(element);\n  if (is(element, 'bpmn:Participant')) {\n    bo = bo.get('processRef');\n  }\n\n  // build properties group only when the participant have a processRef\n  if (!bo) {\n    return;\n  }\n\n  assign(options, {\n    addLabel: translate('Add Property'),\n    getElements: function(element, node) {\n      var parent = getParent(element, node, bo);\n      return getPropertyValues(parent);\n    },\n    addElement: function(element, node) {\n      var commands = [],\n          parent = getParent(element, node, bo);\n\n      if (!parent && typeof createParent === 'function') {\n        var result = createParent(element, bo);\n        parent = result.parent;\n        commands.push(result.cmd);\n      }\n\n      var properties = getPropertiesElement(parent);\n      if (!properties) {\n        properties = elementHelper.createElement('camunda:Properties', {}, parent, bpmnFactory);\n\n        if (!isExtensionElements(parent)) {\n          commands.push(cmdHelper.updateBusinessObject(element, parent, { 'properties': properties }));\n        } else {\n          commands.push(cmdHelper.addAndRemoveElementsFromList(\n            element,\n            parent,\n            'values',\n            'extensionElements',\n            [ properties ],\n            []\n          ));\n        }\n      }\n\n      var propertyProps = {};\n      forEach(modelProperties, function(prop) {\n        propertyProps[prop] = undefined;\n      });\n\n      // create id if necessary\n      if (modelProperties.indexOf('id') >= 0) {\n        propertyProps.id = generatePropertyId();\n      }\n\n      var property = elementHelper.createElement('camunda:Property', propertyProps, properties, bpmnFactory);\n      commands.push(cmdHelper.addElementsTolist(element, properties, 'values', [ property ]));\n\n      return commands;\n    },\n    updateElement: function(element, value, node, idx) {\n      var parent = getParent(element, node, bo),\n          property = getPropertyValues(parent)[idx];\n\n      forEach(modelProperties, function(prop) {\n        value[prop] = value[prop] || undefined;\n      });\n\n      return cmdHelper.updateBusinessObject(element, property, value);\n    },\n    validate: function(element, value, node, idx) {\n\n      // validate id if necessary\n      if (modelProperties.indexOf('id') >= 0) {\n\n        var parent = getParent(element, node, bo),\n            properties = getPropertyValues(parent),\n            property = properties[idx];\n\n        if (property) {\n\n          // check if id is valid\n          var validationError = utils.isIdValid(property, value.id, translate);\n\n          if (validationError) {\n            return { id: validationError };\n          }\n        }\n      }\n    },\n    removeElement: function(element, node, idx) {\n      var commands = [],\n          parent = getParent(element, node, bo),\n          properties = getPropertiesElement(parent),\n          propertyValues = getPropertyValues(parent),\n          currentProperty = propertyValues[idx];\n\n      commands.push(cmdHelper.removeElementsFromList(element, properties, 'values', null, [ currentProperty ]));\n\n      if (propertyValues.length === 1) {\n\n        // remove camunda:properties if the last existing property has been removed\n        if (!isExtensionElements(parent)) {\n          commands.push(cmdHelper.updateBusinessObject(element, parent, { properties: undefined }));\n        } else {\n          forEach(parent.values, function(value) {\n            if (is(value, 'camunda:Properties')) {\n              commands.push(extensionElementsHelper.removeEntry(bo, element, value));\n            }\n          });\n        }\n      }\n\n      return commands;\n    }\n  });\n\n  return factory.table(translate, options);\n};\n","'use strict';\n\nvar assign = require('lodash/assign');\n\n/**\n * Create an input parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createInputParameter(binding, value, bpmnFactory) {\n  var scriptFormat = binding.scriptFormat,\n      parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat: scriptFormat,\n      value: value\n    });\n  } else {\n    parameterValue = value;\n  }\n\n  return bpmnFactory.create('camunda:InputParameter', {\n    name: binding.name,\n    value: parameterValue,\n    definition: parameterDefinition\n  });\n}\n\nmodule.exports.createInputParameter = createInputParameter;\n\n\n/**\n * Create an output parameter representing the given\n * binding and value.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createOutputParameter(binding, value, bpmnFactory) {\n  var scriptFormat = binding.scriptFormat,\n      parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat: scriptFormat,\n      value: binding.source\n    });\n  } else {\n    parameterValue = binding.source;\n  }\n\n  return bpmnFactory.create('camunda:OutputParameter', {\n    name: value,\n    value: parameterValue,\n    definition: parameterDefinition\n  });\n}\n\nmodule.exports.createOutputParameter = createOutputParameter;\n\n\n/**\n * Create camunda property from the given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaProperty(binding, value, bpmnFactory) {\n  return bpmnFactory.create('camunda:Property', {\n    name: binding.name,\n    value: value || ''\n  });\n}\n\nmodule.exports.createCamundaProperty = createCamundaProperty;\n\n\n/**\n * Create camunda:in element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaIn(binding, value, bpmnFactory) {\n\n  var properties = createCamundaInOutAttrs(binding, value);\n\n  return bpmnFactory.create('camunda:In', properties);\n}\n\nmodule.exports.createCamundaIn = createCamundaIn;\n\n\n/**\n * Create camunda:in with businessKey element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaInWithBusinessKey(binding, value, bpmnFactory) {\n  return bpmnFactory.create('camunda:In', {\n    businessKey: value\n  });\n}\n\nmodule.exports.createCamundaInWithBusinessKey = createCamundaInWithBusinessKey;\n\n\n/**\n * Create camunda:out element from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaOut(binding, value, bpmnFactory) {\n  var properties = createCamundaInOutAttrs(binding, value);\n\n  return bpmnFactory.create('camunda:Out', properties);\n}\n\nmodule.exports.createCamundaOut = createCamundaOut;\n\n\n/**\n * Create camunda:executionListener element containing an inline script from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaExecutionListenerScript(binding, value, bpmnFactory) {\n  var scriptFormat = binding.scriptFormat,\n      parameterValue,\n      parameterDefinition;\n\n  if (scriptFormat) {\n    parameterDefinition = bpmnFactory.create('camunda:Script', {\n      scriptFormat: scriptFormat,\n      value: value\n    });\n  } else {\n    parameterValue = value;\n  }\n\n  return bpmnFactory.create('camunda:ExecutionListener', {\n    event: binding.event,\n    value: parameterValue,\n    script: parameterDefinition\n  });\n}\n\nmodule.exports.createCamundaExecutionListenerScript = createCamundaExecutionListenerScript;\n\n/**\n * Create camunda:field element containing string or expression from given binding.\n *\n * @param {PropertyBinding} binding\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement}\n */\nfunction createCamundaFieldInjection(binding, value, bpmnFactory) {\n  var DEFAULT_PROPS = {\n    'string': undefined,\n    'expression': undefined,\n    'name': undefined\n  };\n\n  var props = assign({}, DEFAULT_PROPS);\n\n  if (!binding.expression) {\n    props.string = value;\n  } else {\n    props.expression = value;\n  }\n  props.name = binding.name;\n\n  return bpmnFactory.create('camunda:Field', props);\n}\nmodule.exports.createCamundaFieldInjection = createCamundaFieldInjection;\n\n\n// helpers ////////////////////////////\n\n/**\n * Create properties for camunda:in and camunda:out types.\n */\nfunction createCamundaInOutAttrs(binding, value) {\n\n  var properties = {};\n\n  // camunda:in source(Expression) target\n  if (binding.target) {\n\n    properties.target = binding.target;\n\n    if (binding.expression) {\n      properties.sourceExpression = value;\n    } else {\n      properties.source = value;\n    }\n  } else\n\n  // camunda:(in|out) variables local\n  if (binding.variables) {\n    properties.variables = 'all';\n\n    if (binding.variables === 'local') {\n      properties.local = true;\n    }\n  }\n\n  // camunda:out source(Expression) target\n  else {\n    properties.target = value;\n\n    [ 'source', 'sourceExpression' ].forEach(function(k) {\n      if (binding[k]) {\n        properties[k] = binding[k];\n      }\n    });\n  }\n\n  return properties;\n}\n","'use strict';\n\nvar assign = require('min-dash').assign,\n    flatten = require('min-dash').flatten,\n    filter = require('min-dash').filter,\n    findIndex = require('min-dash').findIndex,\n    forEach = require('min-dash').forEach;\n\nvar domClasses = require('min-dom').classes,\n    domEvent = require('min-dom').event,\n    domify = require('min-dom').domify,\n    domQuery = require('min-dom').query;\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar findExtension = require('../Helper').findExtension,\n    findInputParameter = require('../Helper').findInputParameter;\n\nvar createInputParameter = require('../CreateHelper').createInputParameter;\n\nvar escapeHTML = require('../../../../Utils').escapeHTML;\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper'),\n    elementHelper = require('../../../../helper/ElementHelper');\n\nvar InputOutputParameter = require('../../parts/implementation/InputOutputParameter');\n\nvar CAMUNDA_INPUT_PARAMETER_TYPE = 'camunda:inputParameter';\n\nvar MAX_DESCRIPTION_LENGTH = 200;\n\nvar EMPTY_PARAMETER = {\n  get: function() {},\n  set: function() {}\n};\n\n\n/**\n * Injects element template input parameters into the given group.\n *\n * @param {Object} group\n * @param {djs.model.Base} element\n * @param {ElementTemplates} elementTemplates\n * @param {BpmnFactory} bpmnFactory\n * @param {Function} translate\n */\nmodule.exports = function(group, element, elementTemplates, bpmnFactory, translate) {\n\n  var template = elementTemplates.get(element);\n\n  if (!template) {\n    return [];\n  }\n\n  var inputEntries = [];\n\n\n  function onToggle(value, entryNode) {\n    if (!value) {\n      return;\n    }\n\n    var currentEntryId = entryNode.dataset.entry;\n\n    // collapse all other items\n    inputEntries.forEach(function(entries) {\n      var collapsible = entries[0];\n\n      if (collapsible.id === currentEntryId) {\n        return;\n      }\n\n      var entryNode = domQuery('[data-entry=\"' + collapsible.id + '\"]');\n      collapsible.setOpen(false, entryNode);\n    });\n  }\n\n  function renderInputParameter(id, templateProperty) {\n\n    var parameterEntries = [],\n        collapsibleEntry;\n\n    var bo = getBusinessObject(element),\n        inputOutput = findExtension(bo, 'camunda:InputOutput');\n\n    if (!inputOutput) {\n      return parameterEntries;\n    }\n\n    var getParameter = function() {\n      return findInputParameter(inputOutput, templateProperty.binding) || EMPTY_PARAMETER;\n    };\n\n    var parameter = getParameter();\n\n    var isOpen = function() {\n      return collapsibleEntry.isOpen();\n    };\n\n    var assignmentIsOn = function() {\n      var inputOutput = findExtension(getBusinessObject(element), 'camunda:InputOutput'),\n          parameter = findInputParameter(inputOutput, templateProperty.binding);\n\n      return !!parameter;\n    };\n\n    var options = {\n      idPrefix: id + '-',\n      onToggle: onToggle,\n      getParameter: getParameter,\n      isOpen: function() {\n        return isOpen() && assignmentIsOn();\n      }\n    };\n\n\n    // (1) use input parameter implementation\n    var inputImplementation = InputOutputParameter(parameter, bpmnFactory, options, translate);\n    parameterEntries = inputImplementation.entries;\n\n    var nameIdx = findEntry(parameterEntries, id + '-parameterName');\n\n    collapsibleEntry = parameterEntries[findEntry(parameterEntries, id + '-collapsible')];\n\n    // (2) update title getter\n    var defaultGet = collapsibleEntry.get;\n    collapsibleEntry.get = function() {\n      return assign(defaultGet(), {\n        title: templateProperty.label ?\n          translate(templateProperty.label) :\n          templateProperty.binding.name\n      });\n    };\n\n    // (3) remove name property entry\n    removeEntry(parameterEntries, nameIdx);\n\n    // (4) add description entry\n    if (templateProperty.description) {\n      parameterEntries.splice(1, 0, createDescriptionEntry(\n        templateProperty.description,\n        id,\n        collapsibleEntry.isOpen,\n        translate\n      ));\n    }\n\n    // (5) add parameter toggle\n    parameterEntries.splice(templateProperty.description ? 2 : 1, 0, entryFactory.toggleSwitch(translate, {\n      id: id + '-assignment-toggle',\n      label: translate('Local Variable Assignment'),\n      modelProperty: 'isActive',\n      labelOn: translate('On'),\n      labelOff: translate('Off'),\n      descriptionOff: translate('The parameter won\\'t be created as local variable.'),\n      isOn: assignmentIsOn,\n      get: function(element, node) {\n        return { isActive: assignmentIsOn() };\n      },\n      set: function(element, values, node) {\n        var isActive = values.isActive || false;\n\n        if (isActive) {\n          return createNewInputParameter(element, templateProperty.binding, bpmnFactory);\n        } else {\n          return removeInputParameter(element, templateProperty.binding);\n        }\n\n      },\n      hidden: function(element, node) {\n        return !isOpen();\n      }\n    }));\n\n    return parameterEntries;\n  }\n\n\n  // filter specific input parameters from template\n  var inputParameters = filter(template.properties, function(p) {\n    return !p.type && p.binding.type === CAMUNDA_INPUT_PARAMETER_TYPE;\n  });\n\n  forEach(inputParameters, function(property, idx) {\n    var id = 'template-inputs-' + template.id + '-' + idx;\n    inputEntries.push(renderInputParameter(id, property));\n  });\n\n  group.entries = group.entries.concat(flatten(inputEntries));\n};\n\n\n// helper ///////////////////////\n\nfunction findEntry(entries, id) {\n  return findIndex(entries, function(entry) {\n    return entry.id === id;\n  });\n}\n\nfunction removeEntry(entries, idx) {\n  entries.splice(idx, 1);\n}\n\nfunction createDescriptionEntry(description, id, show, translate) {\n  description = escapeHTML(description);\n\n  var html = domify('<p class=\"description description--expanded\" data-show=\"show\"></p>');\n\n  var descriptionText = domify('<span class=\"description__text\">' + description + '</span>');\n\n  html.appendChild(descriptionText);\n\n  function toggleExpanded(expanded) {\n    if (expanded) {\n      domClasses(html).add('description--expanded');\n\n      descriptionText.textContent = description + ' ';\n\n      expand.textContent = translate('Less');\n    } else {\n      domClasses(html).remove('description--expanded');\n\n      descriptionText.textContent = descriptionShortened + ' ... ';\n\n      expand.textContent = translate('More');\n    }\n  }\n\n  var descriptionShortened,\n      expand,\n      expanded = false;\n\n  if (description.length > MAX_DESCRIPTION_LENGTH) {\n    descriptionShortened = description.slice(0, MAX_DESCRIPTION_LENGTH);\n\n    expand = domify(\n      '<span class=\"bpp-entry-link description__expand\">' +\n        translate('More') +\n      '</span>'\n    );\n\n    domEvent.bind(expand, 'click', function() {\n      expanded = !expanded;\n\n      toggleExpanded(expanded);\n    });\n\n    html.appendChild(expand);\n\n    toggleExpanded(expanded);\n  }\n\n  return {\n    id: id + '-description',\n    html: html,\n    show: show\n  };\n}\n\nfunction removeInputParameter(element, binding) {\n  var bo = getBusinessObject(element),\n      updates = [],\n      extensionElements = bo.get('extensionElements');\n\n  if (!extensionElements) {\n    return updates;\n  }\n\n  var inputOutput = findExtension(extensionElements, 'camunda:InputOutput');\n\n  if (!inputOutput) {\n    return updates;\n  }\n\n  var inputParameter = findInputParameter(inputOutput, binding);\n\n  if (!inputParameter) {\n    return updates;\n  }\n\n  updates.push(cmdHelper.removeElementsFromList(element, inputOutput, 'inputParameters', null, [inputParameter]));\n\n  return updates;\n}\n\nfunction createNewInputParameter(element, binding, bpmnFactory) {\n  var bo = getBusinessObject(element),\n      updates = [],\n      extensionElements = bo.get('extensionElements');\n\n  // (1) ensure extension elements\n  if (!extensionElements) {\n    extensionElements = elementHelper.createElement('bpmn:ExtensionElements', null, element, bpmnFactory);\n\n    updates.push(cmdHelper.updateBusinessObject(\n      element, bo, { extensionElements: extensionElements }\n    ));\n  }\n\n  var inputOutput = findExtension(extensionElements, 'camunda:InputOutput');\n\n  // (2) ensure inputOutput element\n  if (!inputOutput) {\n    inputOutput = elementHelper.createElement('camunda:InputOutput', null, bo, bpmnFactory);\n\n    updates.push(cmdHelper.addElementsTolist(\n      element, extensionElements, 'values', inputOutput\n    ));\n  }\n\n  // (3) create input parameter\n  var inputParameter = createInputParameter(binding, null, bpmnFactory);\n\n  updates.push(cmdHelper.addAndRemoveElementsFromList(\n    element,\n    inputOutput,\n    'inputParameters',\n    null,\n    [ inputParameter ],\n    [ ]\n  ));\n\n  return updates;\n}\n\n\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper');\n\nvar forEach = require('lodash/forEach');\n\nvar message = require('./implementation/MessageEventDefinition'),\n    signal = require('./implementation/SignalEventDefinition'),\n    error = require('./implementation/ErrorEventDefinition'),\n    escalation = require('./implementation/EscalationEventDefinition'),\n    timer = require('./implementation/TimerEventDefinition'),\n    compensation = require('./implementation/CompensateEventDefinition'),\n    condition = require('./implementation/ConditionalEventDefinition');\n\n\nmodule.exports = function(group, element, bpmnFactory, elementRegistry, translate) {\n  var events = [\n    'bpmn:StartEvent',\n    'bpmn:EndEvent',\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateCatchEvent'\n  ];\n\n  // Message and Signal Event Definition\n  forEach(events, function(event) {\n    if (is(element, event)) {\n\n      var messageEventDefinition = eventDefinitionHelper.getMessageEventDefinition(element),\n          signalEventDefinition = eventDefinitionHelper.getSignalEventDefinition(element);\n\n      if (messageEventDefinition) {\n        message(group, element, bpmnFactory, messageEventDefinition, translate);\n      }\n\n      if (signalEventDefinition) {\n        signal(group, element, bpmnFactory, signalEventDefinition, translate);\n      }\n\n    }\n  });\n\n  // Special Case: Receive Task\n  if (is(element, 'bpmn:ReceiveTask')) {\n    message(group, element, bpmnFactory, getBusinessObject(element), translate);\n  }\n\n  // Error Event Definition\n  var errorEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:EndEvent'\n  ];\n\n  forEach(errorEvents, function(event) {\n    if (is(element, event)) {\n\n      var errorEventDefinition = eventDefinitionHelper.getErrorEventDefinition(element);\n\n      if (errorEventDefinition) {\n\n        error(group, element, bpmnFactory, errorEventDefinition, translate);\n      }\n    }\n  });\n\n  // Escalation Event Definition\n  var escalationEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:EndEvent'\n  ];\n\n  forEach(escalationEvents, function(event) {\n    if (is(element, event)) {\n\n      var showEscalationCodeVariable = is(element, 'bpmn:StartEvent') || is(element, 'bpmn:BoundaryEvent');\n\n      // get business object\n      var escalationEventDefinition = eventDefinitionHelper.getEscalationEventDefinition(element);\n\n      if (escalationEventDefinition) {\n        escalation(group, element, bpmnFactory, escalationEventDefinition, showEscalationCodeVariable,\n          translate);\n      }\n    }\n\n  });\n\n  // Timer Event Definition\n  var timerEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateCatchEvent'\n  ];\n\n  forEach(timerEvents, function(event) {\n    if (is(element, event)) {\n\n      // get business object\n      var timerEventDefinition = eventDefinitionHelper.getTimerEventDefinition(element);\n\n      if (timerEventDefinition) {\n        timer(group, element, bpmnFactory, timerEventDefinition, translate);\n      }\n    }\n  });\n\n  // Compensate Event Definition\n  var compensationEvents = [\n    'bpmn:EndEvent',\n    'bpmn:IntermediateThrowEvent'\n  ];\n\n  forEach(compensationEvents, function(event) {\n    if (is(element, event)) {\n\n      // get business object\n      var compensateEventDefinition = eventDefinitionHelper.getCompensateEventDefinition(element);\n\n      if (compensateEventDefinition) {\n        compensation(group, element, bpmnFactory, compensateEventDefinition, elementRegistry, translate);\n      }\n    }\n  });\n\n\n  // Conditional Event Definition\n  var conditionalEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:IntermediateCatchEvent'\n  ];\n\n  if (isAny(element, conditionalEvents)) {\n\n    // get business object\n    var conditionalEventDefinition = eventDefinitionHelper.getConditionalEventDefinition(element);\n\n    if (conditionalEventDefinition) {\n      condition(group, element, bpmnFactory, conditionalEventDefinition, elementRegistry, translate);\n    }\n  }\n\n};\n","var realNames = require('./_realNames');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = (func.name + ''),\n      array = realNames[result],\n      length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nmodule.exports = getFuncName;\n","'use strict';\n\nvar ElementHelper = {};\nmodule.exports = ElementHelper;\n\n/**\n * Creates a new element and set the parent to it\n *\n * @method ElementHelper#createElement\n *\n * @param {String} elementType of the new element\n * @param {Object} properties of the new element in key-value pairs\n * @param {moddle.object} parent of the new element\n * @param {BpmnFactory} factory which creates the new element\n *\n * @returns {djs.model.Base} element which is created\n */\nElementHelper.createElement = function(elementType, properties, parent, factory) {\n  var element = factory.create(elementType, properties);\n  element.$parent = parent;\n\n  return element;\n};\n","var baseCreate = require('./_baseCreate'),\n    isObject = require('./isObject');\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nmodule.exports = createCtor;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar historyTimeToLive = require('./implementation/HistoryTimeToLive');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'camunda:Process') ||\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n\n    group.entries = group.entries.concat(historyTimeToLive(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        var bo = getBusinessObject(element);\n\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n\n        return bo.get('processRef');\n      }\n    }, translate));\n\n  }\n};\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var candidateStarterGroupsEntry = entryFactory.textField(translate, {\n    id: 'candidateStarterGroups',\n    label: translate('Candidate Starter Groups'),\n    modelProperty: 'candidateStarterGroups',\n    description: translate('Specify more than one group as a comma separated list.'),\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var candidateStarterGroups = bo.get('camunda:candidateStarterGroups');\n\n      return {\n        candidateStarterGroups: candidateStarterGroups ? candidateStarterGroups : ''\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:candidateStarterGroups': values.candidateStarterGroups || undefined\n      });\n    }\n\n  });\n\n  var candidateStarterUsersEntry = entryFactory.textField(translate, {\n    id: 'candidateStarterUsers',\n    label: translate('Candidate Starter Users'),\n    modelProperty: 'candidateStarterUsers',\n    description: translate('Specify more than one user as a comma separated list.'),\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var candidateStarterUsers = bo.get('camunda:candidateStarterUsers');\n\n      return {\n        candidateStarterUsers: candidateStarterUsers ? candidateStarterUsers : ''\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:candidateStarterUsers': values.candidateStarterUsers || undefined\n      });\n    }\n\n  });\n\n  return [\n    candidateStarterGroupsEntry,\n    candidateStarterUsersEntry\n  ];\n};\n","'use strict';\n\nvar domify = require('min-dom').domify;\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\nvar bind = require('lodash/bind');\n\n/**\n * An entry that renders a clickable link.\n *\n * A passed {@link options#handleClick} handler is responsible\n * to process the click.\n *\n * The link may be conditionally shown or hidden. This can be\n * controlled via the {@link options.showLink}.\n *\n * @param {Object} options\n * @param {String} options.id\n * @param {String} [options.buttonLabel]\n * @param {Function} options.handleClick\n * @param {Function} [options.showLink] returning false to hide link\n * @param {String} [options.description]\n *\n * @example\n *\n * var linkEntry = link({\n *   id: 'foo',\n *   description: 'Some Description',\n *   handleClick: function(element, node, event) { ... },\n *   showLink: function(element, node) { ... }\n * });\n *\n * @return {Entry} the newly created entry\n */\nfunction link(translate, options) {\n\n  var id = options.id,\n      buttonLabel = options.buttonLabel || id,\n      showLink = options.showLink,\n      handleClick = options.handleClick,\n      description = options.description,\n      label = options.label;\n\n  if (showLink && typeof showLink !== 'function') {\n    throw new Error('options.showLink must be a function');\n  }\n\n  if (typeof handleClick !== 'function') {\n    throw new Error('options.handleClick must be a function');\n  }\n\n  var resource = {\n    id: id,\n    html: document.createDocumentFragment()\n  };\n\n  if (label) {\n    resource.html.appendChild(domify('<label for=\"camunda-' + escapeHTML(id) + '\" ' +\n      (showLink ? 'data-show=\"showLink\" ' : '') +\n      '>'+ escapeHTML(label) +'</label>'));\n  }\n\n  resource.html.appendChild(domify('<div class=\"bpp-field-wrapper\">' +\n    '<a data-action=\"handleClick\" ' +\n    (showLink ? 'data-show=\"showLink\" ' : '') +\n    'class=\"bpp-entry-link' + (options.cssClasses ? ' ' + escapeHTML(options.cssClasses) : '') +\n    '\">' + escapeHTML(buttonLabel) + '</a></div>'));\n\n\n  // add description below link entry field\n  if (description) {\n    resource.html.appendChild(entryFieldDescription(translate, description, { show: 'showLink' }));\n  }\n\n  resource.handleClick = bind(handleClick, resource);\n\n  if (typeof showLink === 'function') {\n    resource.showLink = function() {\n      return showLink.apply(resource, arguments);\n    };\n  }\n\n  return resource;\n}\n\nmodule.exports = link;\n","'use strict';\n\nvar cmdHelper = require('../../../../helper/CmdHelper'),\n    entryFactory = require('../../../../factory/EntryFactory'),\n    elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper');\n\n\nvar resultVariable = require('./ResultVariable');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar forEach = require('lodash/forEach');\n\nvar attributeInfo = {\n  bpmn: {\n    element: 'calledElement',\n    binding: 'camunda:calledElementBinding',\n    version: 'camunda:calledElementVersion',\n    versionTag: 'camunda:calledElementVersionTag',\n    tenantId: 'camunda:calledElementTenantId'\n  },\n\n  cmmn: {\n    element: 'camunda:caseRef',\n    binding: 'camunda:caseBinding',\n    version: 'camunda:caseVersion',\n    tenantId: 'camunda:caseTenantId'\n  },\n\n  dmn: {\n    element: 'camunda:decisionRef',\n    binding: 'camunda:decisionRefBinding',\n    version: 'camunda:decisionRefVersion',\n    versionTag: 'camunda:decisionRefVersionTag',\n    tenantId: 'camunda:decisionRefTenantId'\n  }\n};\n\nvar mapDecisionResultOptions = [\n  {\n    name: 'singleEntry (TypedValue)',\n    value: 'singleEntry'\n  },\n  {\n    name:'singleResult (Map<String, Object>)',\n    value:'singleResult'\n  },\n  {\n    name:'collectEntries (List<Object>)',\n    value:'collectEntries'\n  },\n  {\n    name:'resultList (List<Map<String, Object>>)',\n    value:'resultList'\n  }\n];\n\nvar delegateVariableMappingOptions = [\n  {\n    name: 'variableMappingClass',\n    value: 'variableMappingClass'\n  },\n  {\n    name: 'variableMappingDelegateExpression',\n    value: 'variableMappingDelegateExpression'\n  }\n];\n\nfunction getCamundaInWithBusinessKey(element) {\n  var camundaIn = [],\n      bo = getBusinessObject(element);\n\n  var camundaInParams = extensionElementsHelper.getExtensionElements(bo, 'camunda:In');\n  if (camundaInParams) {\n    forEach(camundaInParams, function(param) {\n      if (param.businessKey !== undefined) {\n        camundaIn.push(param);\n      }\n    });\n  }\n  return camundaIn;\n}\n\nfunction setBusinessKey(element, text, bpmnFactory) {\n  var commands = [];\n\n  var camundaInWithBusinessKey = getCamundaInWithBusinessKey(element);\n\n  if (camundaInWithBusinessKey.length) {\n    commands.push(cmdHelper.updateBusinessObject(element, camundaInWithBusinessKey[0], {\n      businessKey: text\n    }));\n  } else {\n    var bo = getBusinessObject(element),\n        extensionElements = bo.extensionElements;\n\n    if (!extensionElements) {\n      extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n      commands.push(cmdHelper.updateProperties(element, { extensionElements: extensionElements }));\n    }\n\n    var camundaIn = elementHelper.createElement(\n      'camunda:In',\n      { 'businessKey': text },\n      extensionElements,\n      bpmnFactory\n    );\n\n    commands.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      extensionElements,\n      'values',\n      'extensionElements',\n      [ camundaIn ],[]\n    ));\n  }\n\n  return commands;\n}\n\nfunction deleteBusinessKey(element) {\n  var camundaInExtensions = getCamundaInWithBusinessKey(element);\n  var commands = [];\n  forEach(camundaInExtensions, function(elem) {\n    commands.push(extensionElementsHelper.removeEntry(getBusinessObject(element), element, elem));\n  });\n  return commands;\n}\n\nfunction isSupportedCallableType(type) {\n  return [ 'bpmn', 'cmmn', 'dmn' ].indexOf(type) !== -1;\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var bindingOptions = [\n    {\n      name: translate('latest'),\n      value: 'latest'\n    },\n    {\n      name: translate('deployment'),\n      value: 'deployment'\n    },\n    {\n      name: translate('version'),\n      value: 'version'\n    },\n    {\n      name: translate('versionTag'),\n      value: 'versionTag'\n    }\n  ];\n\n  var getCallableType = options.getCallableType;\n\n  var entries = [];\n\n  function getAttribute(element, prop) {\n    var type = getCallableType(element);\n    return (attributeInfo[type] || {})[prop];\n  }\n\n  function getCallActivityBindingValue(element) {\n    var type = getCallableType(element);\n    var bo = getBusinessObject(element);\n    var attr = (attributeInfo[type] || {}).binding;\n    return bo.get(attr);\n  }\n\n  function getDelegateVariableMappingType(element) {\n    var bo = getBusinessObject(element);\n\n    var boVariableMappingClass = bo.get('camunda:variableMappingClass'),\n        boVariableMappingDelegateExpression = bo.get('camunda:variableMappingDelegateExpression');\n\n    var delegateVariableMappingType = '';\n    if (typeof boVariableMappingClass !== 'undefined') {\n      delegateVariableMappingType = 'variableMappingClass';\n    } else\n\n    if (typeof boVariableMappingDelegateExpression !== 'undefined') {\n      delegateVariableMappingType = 'variableMappingDelegateExpression';\n    }\n\n    return delegateVariableMappingType;\n  }\n\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'callable-element-ref',\n    dataValueLabel: 'callableElementLabel',\n    modelProperty: 'callableElementRef',\n\n    get: function(element, node) {\n      var callableElementRef;\n\n      var attr = getAttribute(element, 'element');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        callableElementRef = bo.get(attr);\n      }\n\n      var label = '';\n      var type = getCallableType(element);\n      if (type === 'bpmn') {\n        label = translate('Called Element');\n      }\n      else if (type === 'cmmn') {\n        label = translate('Case Ref');\n      }\n      else if (type === 'dmn') {\n        label = translate('Decision Ref');\n      }\n\n      return {\n        callableElementRef: callableElementRef,\n        callableElementLabel: label\n      };\n    },\n\n    set: function(element, values, node) {\n      var newCallableElementRef = values.callableElementRef;\n      var attr = getAttribute(element, 'element');\n\n      var props = {};\n      props[attr] = newCallableElementRef || '';\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var elementRef = values.callableElementRef;\n      var type = getCallableType(element);\n      return isSupportedCallableType(type) && !elementRef ? { callableElementRef: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isSupportedCallableType(getCallableType(element));\n    }\n\n  }));\n\n  entries.push(entryFactory.selectBox(translate, {\n    id: 'callable-binding',\n    label: translate('Binding'),\n    selectOptions: function(element) {\n      var type = getCallableType(element);\n      var options;\n\n      if (type === 'cmmn') {\n        options = bindingOptions.filter(function(bindingOption) {\n          return bindingOption.value !== 'versionTag';\n        });\n      } else {\n        options = bindingOptions;\n      }\n      return options;\n    },\n    modelProperty: 'callableBinding',\n\n    get: function(element, node) {\n      var callableBinding;\n\n      var attr = getAttribute(element, 'binding');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        callableBinding = bo.get(attr) || 'latest';\n      }\n\n      return {\n        callableBinding: callableBinding\n      };\n    },\n\n    set: function(element, values, node) {\n      var binding = values.callableBinding;\n      var attr = getAttribute(element, 'binding'),\n          attrVer = getAttribute(element, 'version'),\n          attrVerTag = getAttribute(element, 'versionTag');\n\n      var props = {};\n      props[attr] = binding;\n\n      // set version and versionTag values always to undefined to delete the existing value\n      props[attrVer] = undefined;\n      props[attrVerTag] = undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    hidden: function(element, node) {\n      return !isSupportedCallableType(getCallableType(element));\n    }\n\n  }));\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'callable-version',\n    label: translate('Version'),\n    modelProperty: 'callableVersion',\n\n    get: function(element, node) {\n      var callableVersion;\n\n      var attr = getAttribute(element, 'version');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        callableVersion = bo.get(attr);\n      }\n\n      return {\n        callableVersion: callableVersion\n      };\n    },\n\n    set: function(element, values, node) {\n      var version = values.callableVersion;\n      var attr = getAttribute(element, 'version');\n\n      var props = {};\n      props[attr] = version || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var version = values.callableVersion;\n\n      var type = getCallableType(element);\n      return (\n        isSupportedCallableType(type) &&\n        getCallActivityBindingValue(element) === 'version' && (\n          !version ? { callableVersion: translate('Must provide a value') } : {}\n        )\n      );\n    },\n\n    hidden: function(element, node) {\n      var type = getCallableType(element);\n      return !isSupportedCallableType(type) || getCallActivityBindingValue(element) !== 'version';\n    }\n\n  }));\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'callable-version-tag',\n    label: translate('Version Tag'),\n    modelProperty: 'versionTag',\n\n    get: function(element, node) {\n      var versionTag;\n\n      var attr = getAttribute(element, 'versionTag');\n\n      if (attr) {\n        var bo = getBusinessObject(element);\n\n        versionTag = bo.get(attr);\n      }\n\n      return {\n        versionTag: versionTag\n      };\n    },\n\n    set: function(element, values, node) {\n      var versionTag = values.versionTag;\n\n      var attr = getAttribute(element, 'versionTag');\n\n      var props = {};\n\n      props[attr] = versionTag || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var versionTag = values.versionTag;\n\n      var type = getCallableType(element);\n\n      return (\n        isSupportedCallableType(type) &&\n        getCallActivityBindingValue(element) === 'versionTag' && (\n          !versionTag ? { versionTag: translate('Must provide a value') } : {}\n        )\n      );\n    },\n\n    hidden: function(element, node) {\n      var type = getCallableType(element);\n\n      return !isSupportedCallableType(type) || getCallActivityBindingValue(element) !== 'versionTag';\n    }\n\n  }));\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'tenant-id',\n    label: translate('Tenant Id'),\n    modelProperty: 'tenantId',\n\n    get: function(element, node) {\n      var tenantId;\n\n      var attr = getAttribute(element, 'tenantId');\n      if (attr) {\n        var bo = getBusinessObject(element);\n        tenantId = bo.get(attr);\n      }\n\n      return {\n        tenantId: tenantId\n      };\n    },\n\n    set: function(element, values, node) {\n      var tenantId = values.tenantId;\n      var attr = getAttribute(element, 'tenantId');\n\n      var props = {};\n      props[attr] = tenantId || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    hidden: function(element, node) {\n      var type = getCallableType(element);\n      return !isSupportedCallableType(type);\n    }\n\n  }));\n\n  if (is(getBusinessObject(element), 'bpmn:CallActivity')) {\n    entries.push(entryFactory.checkbox(translate, {\n      id: 'callable-business-key',\n      label: translate('Business Key'),\n      modelProperty: 'callableBusinessKey',\n\n      get: function(element, node) {\n        var camundaIn = getCamundaInWithBusinessKey(element);\n\n        return {\n          callableBusinessKey: !!(camundaIn && camundaIn.length > 0)\n        };\n      },\n\n      set: function(element, values, node) {\n        if (values.callableBusinessKey) {\n          return setBusinessKey(element, '#{execution.processBusinessKey}', bpmnFactory);\n        } else {\n          return deleteBusinessKey(element);\n        }\n      }\n    }));\n  }\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'business-key-expression',\n    label: translate('Business Key Expression'),\n    modelProperty: 'businessKey',\n\n    get: function(element, node) {\n      var camundaInWithBusinessKey = getCamundaInWithBusinessKey(element);\n\n      return {\n        businessKey: (\n          camundaInWithBusinessKey.length ?\n            camundaInWithBusinessKey[0].get('camunda:businessKey') :\n            undefined\n        )\n      };\n    },\n\n    set: function(element, values, node) {\n      var businessKey = values.businessKey;\n\n      return setBusinessKey(element, businessKey, bpmnFactory);\n    },\n\n    validate: function(element, values, node) {\n      var businessKey = values.businessKey;\n\n      return businessKey === '' ? { businessKey: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !getCamundaInWithBusinessKey(element).length;\n    }\n\n  }));\n\n  entries = entries.concat(resultVariable(element, bpmnFactory, {\n    id: 'dmn-resultVariable',\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getCallableType,\n    hideResultVariable: function(element, node) {\n      return getCallableType(element) !== 'dmn';\n    }\n  }, translate));\n\n  entries.push(entryFactory.selectBox(translate, {\n    id: 'dmn-map-decision-result',\n    label: translate('Map Decision Result'),\n    selectOptions: mapDecisionResultOptions,\n    modelProperty: 'mapDecisionResult',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        mapDecisionResult: bo.get('camunda:mapDecisionResult') || 'resultList'\n      };\n    },\n\n    set: function(element, values, node) {\n      return cmdHelper.updateProperties(element, {\n        'camunda:mapDecisionResult': values.mapDecisionResult || 'resultList'\n      });\n    },\n\n    hidden: function(element, node) {\n      var bo = getBusinessObject(element);\n      var resultVariable = bo.get('camunda:resultVariable');\n      return !(getCallableType(element) === 'dmn' && typeof resultVariable !== 'undefined');\n    }\n\n  }));\n\n\n  entries.push(entryFactory.selectBox(translate, {\n    id: 'delegateVariableMappingType',\n    label: translate('Delegate Variable Mapping'),\n    selectOptions: delegateVariableMappingOptions,\n    emptyParameter: true,\n    modelProperty: 'delegateVariableMappingType',\n\n    get: function(element, node) {\n      return {\n        delegateVariableMappingType : getDelegateVariableMappingType(element)\n      };\n    },\n\n    set: function(element, values, node) {\n      var delegateVariableMappingType = values.delegateVariableMappingType;\n\n      var props = {\n        'camunda:variableMappingClass' : undefined,\n        'camunda:variableMappingDelegateExpression' : undefined\n      };\n\n      if (delegateVariableMappingType === 'variableMappingClass') {\n        props['camunda:variableMappingClass'] = '';\n      }\n      else if (delegateVariableMappingType === 'variableMappingDelegateExpression') {\n        props['camunda:variableMappingDelegateExpression'] = '';\n      }\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    hidden: function(element, node) {\n      return (getCallableType(element) !== 'bpmn');\n    }\n\n  }));\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'delegateVariableMapping',\n    dataValueLabel: 'delegateVariableMappingLabel',\n    modelProperty: 'delegateVariableMapping',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n\n      var label = '';\n      var delegateVariableMapping = undefined;\n      var type = getDelegateVariableMappingType(element);\n\n      if (type === 'variableMappingClass') {\n        label = translate('Class');\n        delegateVariableMapping = bo.get('camunda:variableMappingClass');\n      }\n      else if (type === 'variableMappingDelegateExpression') {\n        label = translate('Delegate Expression');\n        delegateVariableMapping = bo.get('camunda:variableMappingDelegateExpression');\n      }\n\n      return {\n        delegateVariableMapping: delegateVariableMapping,\n        delegateVariableMappingLabel: label\n      };\n    },\n\n    set: function(element, values, node) {\n      var delegateVariableMapping = values.delegateVariableMapping;\n\n      var attr = 'camunda:' + getDelegateVariableMappingType(element);\n\n      var props = {};\n      props[attr] = delegateVariableMapping || undefined;\n\n      return cmdHelper.updateProperties(element, props);\n    },\n\n    validate: function(element, values, node) {\n      var delegateVariableMapping = values.delegateVariableMapping;\n      return (\n        getCallableType(element) === 'bpmn' && (\n          !delegateVariableMapping ? { delegateVariableMapping: translate('Must provide a value') } : {}\n        )\n      );\n    },\n\n    hidden: function(element, node) {\n      return !(getCallableType(element) === 'bpmn' && getDelegateVariableMappingType(element) !== '');\n    }\n\n  }));\n\n  return entries;\n};\n","module.exports = require('./lib');\n","'use strict';\n\nvar forEach = require('lodash/forEach');\n\nvar elementHelper = require('../helper/ElementHelper');\n\n/**\n * A handler that implements a BPMN 2.0 property update\n * for business objects which are not represented in the\n * diagram.\n *\n * This is useful in the context of the properties panel in\n * order to update child elements of elements visible in\n * the diagram.\n *\n * Example: perform an update of a specific event definition\n * of an intermediate event.\n *\n * @class\n * @constructor\n */\nfunction CreateBusinessObjectListHandler(elementRegistry, bpmnFactory) {\n  this._elementRegistry = elementRegistry;\n  this._bpmnFactory = bpmnFactory;\n}\n\nCreateBusinessObjectListHandler.$inject = [ 'elementRegistry', 'bpmnFactory' ];\n\nmodule.exports = CreateBusinessObjectListHandler;\n\nfunction ensureNotNull(prop, name) {\n  if (!prop) {\n    throw new Error(name + ' required');\n  }\n  return prop;\n\n}\nfunction ensureList(prop, name) {\n  if (!prop || Object.prototype.toString.call(prop) !== '[object Array]') {\n    throw new Error(name + ' needs to be a list');\n  }\n  return prop;\n}\n\n// api /////////////////////////////////////////////\n\n/**\n * Creates a new element under a provided parent and updates / creates a reference to it in\n * one atomic action.\n *\n * @method  CreateBusinessObjectListHandler#execute\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element which is the context for the reference\n * @param {moddle.referencingObject} context.referencingObject the object which creates the reference\n * @param {String} context.referenceProperty the property of the referencingObject which makes the reference\n * @param {moddle.newObject} context.newObject the new object to add\n * @param {moddle.newObjectContainer} context.newObjectContainer the container for the new object\n *\n * @return {Array<djs.mode.Base>} the updated element\n */\nCreateBusinessObjectListHandler.prototype.execute = function(context) {\n\n  var currentObject = ensureNotNull(context.currentObject, 'currentObject'),\n      propertyName = ensureNotNull(context.propertyName, 'propertyName'),\n      newObjects = ensureList(context.newObjects, 'newObjects'),\n      changed = [ context.element ]; // this will not change any diagram-js elements\n\n\n  var childObjects = [];\n  var self = this;\n\n  // create new array of business objects\n  forEach(newObjects, function(obj) {\n    var element = elementHelper.createElement(obj.type, obj.properties, currentObject, self._bpmnFactory);\n\n    childObjects.push(element);\n  });\n  context.childObject = childObjects;\n\n  // adjust array reference in the parent business object\n  context.previousChilds = currentObject[propertyName];\n  currentObject[propertyName] = childObjects;\n\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  CreateBusinessObjectListHandler#revert\n *\n * @param {Object} context\n *\n * @return {djs.mode.Base} the updated element\n */\nCreateBusinessObjectListHandler.prototype.revert = function(context) {\n\n  var currentObject = context.currentObject,\n      propertyName = context.propertyName,\n      previousChilds = context.previousChilds;\n\n  // remove new element\n  currentObject.set(propertyName, previousChilds);\n\n  return context.changed;\n};\n","'use strict';\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\n/**\n * Get the timer definition type for a given timer event definition.\n *\n * @param {ModdleElement<bpmn:TimerEventDefinition>} timer\n *\n * @return {string|undefined} the timer definition type\n */\nfunction getTimerDefinitionType(timer) {\n\n  if (!timer) {\n    return;\n  }\n\n  var timeDate = timer.get('timeDate');\n  if (typeof timeDate !== 'undefined') {\n    return 'timeDate';\n  }\n\n  var timeCycle = timer.get('timeCycle');\n  if (typeof timeCycle !== 'undefined') {\n    return 'timeCycle';\n  }\n\n  var timeDuration = timer.get('timeDuration');\n  if (typeof timeDuration !== 'undefined') {\n    return 'timeDuration';\n  }\n}\n\n/**\n * Get the actual timer event definition based on option, whether it's a getter\n * to fetch the timer event definition or the exact event definition itself\n *\n * @param {ModdleElement<bpmn:TimerEventDefinition>|Function} timerOrFunction\n * @param {Shape} element\n * @param {HTMLElement} node\n *\n * @return ModdleElement<bpmn:TimerEventDefinition>\n */\nfunction getTimerDefinition(timerOrFunction, element, node) {\n  if (typeof timerOrFunction === 'function') {\n    return timerOrFunction(element, node);\n  }\n\n  return timerOrFunction;\n}\n\n/**\n * Creates 'bpmn:FormalExpression' element.\n *\n * @param {ModdleElement} parent\n * @param {string} body\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement<bpmn:FormalExpression>} a formal expression\n */\nfunction createFormalExpression(parent, body, bpmnFactory) {\n  body = body || undefined;\n  return elementHelper.createElement('bpmn:FormalExpression', { body: body }, parent, bpmnFactory);\n}\n\nfunction TimerEventDefinition(group, element, bpmnFactory, timerEventDefinition, translate, options) {\n\n  var selectOptions = [\n    { value: 'timeDate', name: translate('Date') },\n    { value: 'timeDuration', name: translate('Duration') },\n    { value: 'timeCycle', name: translate('Cycle') }\n  ];\n\n  var prefix = options && options.idPrefix,\n      createTimerEventDefinition = options && options.createTimerEventDefinition;\n\n\n  group.entries.push(entryFactory.selectBox(translate, {\n    id: prefix + 'timer-event-definition-type',\n    label: translate('Timer Definition Type'),\n    selectOptions: selectOptions,\n    emptyParameter: true,\n    modelProperty: 'timerDefinitionType',\n\n    get: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node);\n\n      return {\n        timerDefinitionType: getTimerDefinitionType(timerDefinition) || ''\n      };\n    },\n\n    set: function(element, values, node) {\n      var props = {\n        timeDuration: undefined,\n        timeDate: undefined,\n        timeCycle: undefined\n      };\n\n\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          newType = values.timerDefinitionType;\n\n      if (!timerDefinition && typeof createTimerEventDefinition === 'function') {\n        timerDefinition = createTimerEventDefinition(element, node);\n      }\n\n      if (values.timerDefinitionType) {\n        var oldType = getTimerDefinitionType(timerDefinition);\n\n        var value;\n        if (oldType) {\n          var definition = timerDefinition.get(oldType);\n          value = definition.get('body');\n        }\n\n        props[newType] = createFormalExpression(timerDefinition, value, bpmnFactory);\n      }\n\n      return cmdHelper.updateBusinessObject(element, timerDefinition, props);\n    },\n\n    hidden: function(element, node) {\n      return getTimerDefinition(timerEventDefinition, element, node) === undefined;\n    }\n\n  }));\n\n\n  group.entries.push(entryFactory.textField(translate, {\n    id: prefix + 'timer-event-definition',\n    label: translate('Timer Definition'),\n    modelProperty: 'timerDefinition',\n\n    get: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          type = getTimerDefinitionType(timerDefinition),\n          definition = type && timerDefinition.get(type),\n          value = definition && definition.get('body');\n\n      return {\n        timerDefinition: value\n      };\n    },\n\n    set: function(element, values, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          type = getTimerDefinitionType(timerDefinition),\n          definition = type && timerDefinition.get(type);\n\n      if (definition) {\n        return cmdHelper.updateBusinessObject(element, definition, {\n          body: values.timerDefinition || undefined\n        });\n      }\n    },\n\n    validate: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node),\n          type = getTimerDefinitionType(timerDefinition),\n          definition = type && timerDefinition.get(type);\n\n      if (definition) {\n        var value = definition.get('body');\n        if (!value) {\n          return {\n            timerDefinition: translate('Must provide a value')\n          };\n        }\n      }\n    },\n\n    hidden: function(element, node) {\n      var timerDefinition = getTimerDefinition(timerEventDefinition, element, node);\n\n      return !getTimerDefinitionType(timerDefinition);\n    }\n\n  }));\n\n}\n\nmodule.exports = TimerEventDefinition;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getImplementationType = options.getImplementationType,\n      getBusinessObject = options.getBusinessObject;\n\n  function isExternal(element) {\n    return getImplementationType(element) === 'external';\n  }\n\n  var topicEntry = entryFactory.textField(translate, {\n    id: 'externalTopic',\n    label: translate('Topic'),\n    modelProperty: 'externalTopic',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return { externalTopic: bo.get('camunda:topic') };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:topic': values.externalTopic\n      });\n    },\n\n    validate: function(element, values, node) {\n      return isExternal(element) && !values.externalTopic ? { externalTopic: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isExternal(element);\n    }\n\n  });\n\n  return [ topicEntry ];\n\n};\n","import { filter, find, isArray, forEach, findIndex } from 'min-dash';\n\n/**\n * Get a inputOutput from the business object\n *\n * @param {ModdleElement} element\n *\n * @return {ModdleElement} the inputOutput object\n */\nfunction getInputOutput(element) {\n  return (getElements(element, 'camunda:InputOutput') || [])[0];\n}\n\n/**\n * Return all input parameters existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {ModdleElement} element\n *\n * @return {Array<ModdleElement>} a list of input parameter objects\n */\nfunction getInputParameters(element) {\n  return getParameters(element, 'inputParameters');\n}\n\n/**\n * Return all output parameters existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {ModdleElement} element\n * @param  {boolean} insideConnector\n *\n * @return {Array<ModdleElement>} a list of output parameter objects\n */\nfunction getOutputParameters(element) {\n  return getParameters(element, 'outputParameters');\n}\n\n/**\n * Return all form fields existing in the business object, and\n * an empty array if none exist.\n *\n * @param {ModdleElement} element\n *\n * @return {Array<ModdleElement>} a list of form fields\n */\nfunction getFormFields(element) {\n  var formData = getFormData(element);\n  return (formData && formData.get('fields')) || [];\n}\n\n/**\n * Return form data existing in the business object\n *\n * @param {ModdleElement} element\n *\n * @return {ModdleElement}\n */\nfunction getFormData(element) {\n  return (getElements(element, 'camunda:FormData') || [])[0];\n}\n\n/**\n * Return out mappings existing in the business object\n *\n * @param {ModdleElement} element\n *\n * @return {Array<ModdleElement>}\n */\nfunction getOutMappings(element) {\n  return getElements(element, 'camunda:Out') || [];\n}\n\n\n// helpers //////////\n\nfunction getElements(element, type, property) {\n  var elements = getExtensionElements(element, type) || [];\n\n  return !property ? elements : (elements[0] || {})[property] || [];\n}\n\nfunction getParameters(element, property) {\n  var inputOutput = getInputOutput(element);\n\n  return (inputOutput && inputOutput.get(property)) || [];\n}\n\nfunction getExtensionElements(element, type) {\n  var extensionElements = element.get('extensionElements');\n\n  if (typeof extensionElements !== 'undefined') {\n    var extensionValues = extensionElements.get('values');\n\n    if (typeof extensionValues !== 'undefined') {\n      var elements = filter(extensionValues, function(value) {\n        return is(value, type);\n      });\n\n      if (elements.length) {\n        return elements;\n      }\n    }\n  }\n}\n\nfunction is(element, type) {\n  return (\n    element &&\n    typeof element.$instanceOf === 'function' &&\n    element.$instanceOf(type)\n  );\n}\n\n/**\n * Get all parent elements for a given element.\n *\n * @param {ModdleElement|string} element\n *\n * @returns {Array<ModdleElement>}\n */\nfunction getParents(element) {\n  var parents = [];\n  var current = element;\n\n  while (current.$parent) {\n    parents.push(current.$parent);\n    current = current.$parent;\n  }\n\n  return parents;\n}\n\n/**\n * Iterate over each element in a collection, calling the iterator function `fn`\n * with (element, index, recursionDepth).\n *\n * Recurse into all elements that are returned by `fn`.\n *\n * @param  {Object|Array<Object>} elements\n * @param  {Function} fn iterator function called with (element, index, recursionDepth)\n * @param  {number} [depth] maximum recursion depth\n */\nfunction eachElement(elements, fn, depth) {\n  depth = depth || 0;\n\n  if (!isArray(elements)) {\n    elements = [elements];\n  }\n\n  forEach(elements, function(s, i) {\n    var filter = fn(s, i, depth);\n\n    if (isArray(filter) && filter.length) {\n      eachElement(filter, fn, depth + 1);\n    }\n  });\n}\n\n/**\n * Adds an element to a collection and returns true if the\n * element was added.\n *\n * @param {Array<Object>} elements\n * @param {Object} e\n * @param {boolean} unique\n */\nfunction add(elements, e, unique) {\n  var canAdd = !unique || elements.indexOf(e) === -1;\n\n  if (canAdd) {\n    elements.push(e);\n  }\n\n  return canAdd;\n}\n\n/**\n * Collects self + flow elements up to a given depth from a list of elements.\n *\n * @param  {ModdleElement|Array<ModdleElement>} elements the elements to select the flowElements from\n * @param  {boolean} unique whether to return a unique result set (no duplicates)\n * @param  {number} maxDepth the depth to search through or -1 for infinite\n *\n * @return {Array<ModdleElement>} found elements\n */\nfunction selfAndFlowElements(elements, unique, maxDepth) {\n  var result = [],\n      processedFlowElements = [];\n\n  eachElement(elements, function(element, i, depth) {\n    add(result, element, unique);\n\n    var flowElements = element.flowElements;\n\n    // max traversal depth not reached yet\n    if (maxDepth === -1 || depth < maxDepth) {\n\n      // flowElements exist && flowElements not yet processed\n      if (flowElements && add(processedFlowElements, flowElements, unique)) {\n        return flowElements;\n      }\n    }\n  });\n\n  return result;\n}\n\n/**\n * Return self + ALL flowElements for a number of elements\n *\n * @param  {Array<ModdleElement>} elements to query\n * @param  {boolean} allowDuplicates to allow duplicates in the result set\n *\n * @return {Array<ModdleElement>} the collected elements\n */\nfunction selfAndAllFlowElements(elements, allowDuplicates) {\n  return selfAndFlowElements(elements, !allowDuplicates, -1);\n}\n\n/**\n * Return full moddle element for given element id\n *\n * @param {string} elementId\n * @param {ModdleElement} rootElement\n *\n * @returns {ModdleElement}\n */\nfunction getElement(elementId, rootElement) {\n  var allElements = selfAndAllFlowElements(rootElement);\n\n  return find(allElements, function(element) {\n    return element.id === elementId;\n  });\n}\n\nfunction addVariableToList(variablesList, newVariable) {\n  var foundIdx = findIndex(variablesList, function(variable) {\n    return (\n      variable.name === newVariable.name && variable.scope === newVariable.scope\n    );\n  });\n\n  if (foundIdx >= 0) {\n    variablesList[foundIdx].origin = combineArrays(\n      variablesList[foundIdx].origin,\n      newVariable.origin\n    );\n  } else {\n    variablesList.push(newVariable);\n  }\n}\n\n/**\n * Creates new process variable definition object\n * Identifies correct (highest) scope, in which variable is available\n *\n * @param {ModdleElement} flowElement\n * @param {String} name\n * @param {ModdleElement} defaultScope\n *\n * @returns {ProcessVariable}\n */\nfunction createProcessVariable(flowElement, name, defaultScope) {\n  var scope = getScope(flowElement, defaultScope, name);\n\n  return {\n    name: name,\n    origin: [flowElement],\n    scope: scope,\n  };\n}\n\n\n// helpers ////////////////////\n\n/**\n * Set parent container if it defines it's own scope for the variable, so\n * when it defines an input mapping for it. Otherwise returns the default global scope\n */\nfunction getScope(element, globalScope, variableName) {\n  var parents = getParents(element);\n\n  var scopedParent = find(parents, function(parent) {\n    return (\n      is$1(parent, 'bpmn:SubProcess') && hasInputParameter(parent, variableName)\n    );\n  });\n\n  return scopedParent ? scopedParent : globalScope;\n}\n\nfunction is$1(element, type) {\n  return (\n    element &&\n      typeof element.$instanceOf === 'function' &&\n      element.$instanceOf(type)\n  );\n}\n\nfunction hasInputParameter(element, name) {\n  return find(getInputParameters(element), function(input) {\n    return input.name === name;\n  });\n}\n\nfunction combineArrays(a, b) {\n  return a.concat(b);\n}\n\nfunction extractOutputParameters(options) {\n  var elements = options.elements,\n      containerElement = options.containerElement,\n      processVariables = options.processVariables;\n\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  forEach(elements, function(element) {\n\n    // variables are created by output parameters\n    var outputParameters = getOutputParameters(element);\n\n    // extract all variables with correct scope\n    forEach(outputParameters, function(parameter) {\n      var newVariable = createProcessVariable(\n        element,\n        parameter.name,\n        containerElement\n      );\n\n      addVariableToList(processVariables, newVariable);\n    });\n  });\n\n  return processVariables;\n}\n\nfunction extractResultVariables(options) {\n  var elements = options.elements,\n      containerElement = options.containerElement,\n      processVariables = options.processVariables;\n\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  forEach(elements, function(element) {\n\n    var resultVariable = getResultVariable(element);\n\n    if (resultVariable) {\n      var newVariable = createProcessVariable(\n        element,\n        resultVariable,\n        containerElement\n      );\n\n      addVariableToList(processVariables, newVariable);\n    }\n  });\n\n  return processVariables;\n}\n\n\n// helpers ///////////////////////\n\nfunction getResultVariable(element) {\n  return element.get('camunda:resultVariable');\n}\n\nfunction extractFormFields(options) {\n  var elements = options.elements,\n      containerElement = options.containerElement,\n      processVariables = options.processVariables;\n\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  forEach(elements, function(element) {\n\n    var formFields = getFormFields(element);\n\n    // extract all variables with correct scope\n    forEach(formFields, function(field) {\n      var newVariable = createProcessVariable(\n        element,\n        field.id,\n        containerElement\n      );\n\n      addVariableToList(processVariables, newVariable);\n    });\n  });\n\n  return processVariables;\n}\n\nfunction extractOutMappings(options) {\n  var elements = options.elements,\n      containerElement = options.containerElement,\n      processVariables = options.processVariables;\n\n  if (!isArray(elements)) {\n    elements = [ elements ];\n  }\n\n  forEach(elements, function(element) {\n\n    var outMappings = getOutMappings(element);\n\n    // extract all variables with correct scope\n    forEach(outMappings, function(mapping) {\n\n      // do not use variables marked as <local>\n      if (mapping.local) {\n        return;\n      }\n\n      var newVariable = createProcessVariable(\n        element,\n        mapping.target,\n        containerElement\n      );\n\n      addVariableToList(processVariables, newVariable);\n    });\n  });\n\n  return processVariables;\n}\n\nvar extractors = [\n  extractOutputParameters,\n  extractResultVariables,\n  extractFormFields,\n  extractOutMappings\n];\n\n/**\n * @typedef {Object} ProcessVariable\n * @property {string} name\n * @property {Array<ModdleElement>} origin\n * @property {ModdleElement} scope\n */\n\n// api /////////////////////////\n\n/**\n * Retrieves all process variables for a given container element.\n * @param {ModdleElement} containerElement\n *\n * @returns {Array<ProcessVariable>}\n */\nfunction getProcessVariables(containerElement) {\n  var processVariables = [];\n\n  // (1) extract all flow elements inside the container\n  var elements = selfAndAllFlowElements([containerElement], false);\n\n  // (2) extract all variables from the extractors\n  forEach(extractors, function(extractor) {\n    extractor({\n      elements: elements,\n      containerElement: containerElement,\n      processVariables: processVariables\n    });\n  });\n\n  return processVariables;\n}\n\n/**\n * Retrieves all variables which are available in the given scope\n *\n * * Exclude variables which are only available in other scopes\n * * Exclude variables which are produced by the given element\n * * Include variables which are available in parent scopes\n *\n * @param {string} scope\n * @param {ModdleElement} rootElement element from where to extract all variables\n *\n * @returns {Array<ProcessVariable>}\n */\nfunction getVariablesForScope(scope, rootElement) {\n\n  var allVariables = getProcessVariables(rootElement);\n\n  var scopeElement = getElement(scope, rootElement);\n\n  // (1) get variables for given scope\n  var scopeVariables = filter(allVariables, function(variable) {\n    return variable.scope.id === scopeElement.id;\n  });\n\n  // (2) get variables for parent scopes\n  var parents = getParents(scopeElement);\n\n  var parentsScopeVariables = filter(allVariables, function(variable) {\n    return find(parents, function(parent) {\n      return parent.id === variable.scope.id;\n    });\n  });\n\n  return combineArrays$1(scopeVariables, parentsScopeVariables);\n}\n\n// helpers ////////////////////\n\nfunction combineArrays$1(a, b) {\n  return a.concat(b);\n}\n\nexport { getProcessVariables, getVariablesForScope };\n","'use strict';\n\nvar inherits = require('inherits');\n\nvar getTemplateId = require('./Helper').getTemplateId;\n\nvar isBoolean = require('lodash/isBoolean');\n\nvar PropertiesActivator = require('../../../PropertiesActivator');\n\nvar HIGHER_PRIORITY = 1100;\n\n/**\n * Decides what entries are visible and editable. When an element template is applied only entries\n * in the element template tab are visible. Override this behavior through a properties activator\n * with higher priority or by specifying `entriesVisible`.\n *\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n */\nfunction CustomElementsPropertiesActivator(eventBus, elementTemplates) {\n  PropertiesActivator.call(this, eventBus, HIGHER_PRIORITY);\n\n  this.isEntryVisible = function(element, entry, group, tab) {\n    var template = elementTemplates.get(element),\n        templateId = getTemplateId(element);\n\n    if (templateId && !isEntryVisible(entry, tab, template)) {\n      return false;\n    }\n  };\n\n  this.isPropertyEditable = function(propertyName, element, entry, group, tab) {\n    var template = elementTemplates.get(element);\n\n    if (template && !isEntryEditable(entry, template)) {\n      return false;\n    }\n  };\n}\n\nCustomElementsPropertiesActivator.$inject = [ 'eventBus', 'elementTemplates' ];\n\ninherits(CustomElementsPropertiesActivator, PropertiesActivator);\n\nmodule.exports = CustomElementsPropertiesActivator;\n\n\n\n// helpers //////////\n\n\nvar CUSTOM_PROPERTIES_PATTERN = /^custom-/;\n\nvar DEFAULT_ENTRIES_VISIBLE = {\n  _all: false\n};\n\nfunction isCustomEntry(entry) {\n  return CUSTOM_PROPERTIES_PATTERN.test(entry.id);\n}\n\nfunction isEntryVisible(entry, tab, template) {\n  var entryId = entry.id;\n\n  if (tab.id === 'element-template') {\n    return true;\n  }\n\n  var entriesVisible = template && template.entriesVisible || DEFAULT_ENTRIES_VISIBLE;\n\n  if (isBoolean(entriesVisible)) {\n    return entriesVisible;\n  }\n\n  var defaultVisible = entriesVisible._all || false,\n      entryVisible = entriesVisible[ entryId ];\n\n  if (defaultVisible) {\n    return entryVisible !== false;\n  } else {\n    return entryVisible === true;\n  }\n}\n\nfunction isEntryEditable(entry, template) {\n\n  var property;\n\n  if (isCustomEntry(entry)) {\n    property = getProperty(template, entry);\n\n    return property && property.editable !== false;\n  }\n\n  return true;\n}\n\nfunction getProperty(template, entry) {\n\n  var index;\n  var idx = entry.id.replace('custom-' + template.id + '-', '');\n  if (idx.indexOf('-') !== -1) {\n    var indexes = idx.split('-');\n    if (indexes.length == 2) {\n      var scopeName = indexes[0].replace(/_/g, ':');\n      index = parseInt(indexes[1], 10);\n      if (scopeName && !isNaN(index)) {\n        return template.scopes[scopeName].properties[index];\n      }\n    }\n  } else {\n    index = parseInt(idx, 10);\n    if (!isNaN(index)) {\n      return template.properties[index];\n    }\n  }\n\n  throw new Error('cannot extract property index for entry <' + entry.id + '>');\n}\n","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar fieldInjection = require('./implementation/FieldInjection');\n\nmodule.exports = function(group, element, bpmnFactory, options, translate) {\n\n  options = assign({\n    idPrefix: 'listener-',\n    insideListener: true\n  }, options);\n\n  var fieldInjectionEntry = fieldInjection(element, bpmnFactory, translate, options);\n\n  if (fieldInjectionEntry && fieldInjectionEntry.length > 0) {\n    group.entries = group.entries.concat(fieldInjectionEntry);\n  }\n\n};\n","/** Used to lookup unminified function names. */\nvar realNames = {};\n\nmodule.exports = realNames;\n","'use strict';\n\nvar nameEntryFactory = require('./implementation/Name'),\n    createCategoryValue = require('../../../helper/CategoryHelper').createCategoryValue,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nmodule.exports = function(group, element, bpmnFactory, canvas, translate, options) {\n  if (!options) {\n    options = {};\n  }\n\n  function initializeCategory(semantic) {\n    var rootElement = canvas.getRootElement(),\n        definitions = getBusinessObject(rootElement).$parent,\n        categoryValue = createCategoryValue(definitions, bpmnFactory);\n\n    semantic.categoryValueRef = categoryValue;\n\n  }\n\n  function setGroupName(element, values) {\n    var bo = getBusinessObject(element),\n        categoryValueRef = bo.categoryValueRef;\n\n    if (!categoryValueRef) {\n      initializeCategory(bo);\n    }\n\n    // needs direct call to update categoryValue properly\n    return {\n      cmd: 'element.updateLabel',\n      context: {\n        element: element,\n        newLabel: values.categoryValue\n      }\n    };\n  }\n\n  function getGroupName(element) {\n    var bo = getBusinessObject(element),\n        value = (bo.categoryValueRef || {}).value;\n\n    return { categoryValue: value };\n  }\n\n  if (!is(element, 'bpmn:Collaboration')) {\n    var nameOptions = {\n      id: options.id,\n      label: options.label && translate(options.label)\n    };\n\n    if (is(element, 'bpmn:TextAnnotation')) {\n      nameOptions.modelProperty = 'text';\n      nameOptions.label = translate('Text');\n    } else if (is(element, 'bpmn:Group')) {\n      nameOptions.modelProperty = 'categoryValue';\n      nameOptions.label = translate('Category Value');\n      nameOptions.get = getGroupName;\n      nameOptions.set = setGroupName;\n    }\n\n    // name\n    group.entries = group.entries.concat(nameEntryFactory(element, nameOptions, translate));\n  }\n};\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and `partials` prepended to the arguments it receives.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * function greet(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * }\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = baseRest(function(func, thisArg, partials) {\n  var bitmask = WRAP_BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getHolder(bind));\n    bitmask |= WRAP_PARTIAL_FLAG;\n  }\n  return createWrap(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nmodule.exports = bind;\n","var metaMap = require('./_metaMap'),\n    noop = require('./noop');\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nmodule.exports = getData;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\n/**\n * Create an entry to modify the name of an an element.\n *\n * @param  {djs.model.Base} element\n * @param  {Object} options\n * @param  {string} options.id the id of the entry\n * @param  {string} options.label the label of the entry\n *\n * @return {Array<Object>} return an array containing\n *                         the entry to modify the name\n */\nmodule.exports = function(element, options, translate) {\n\n  options = options || {};\n  var id = options.id || 'name',\n      label = options.label || translate('Name'),\n      modelProperty = options.modelProperty || 'name';\n\n  var nameEntry = entryFactory.textBox(translate, {\n    id: id,\n    label: label,\n    modelProperty: modelProperty,\n    get: options.get,\n    set: options.set\n  });\n\n  return [ nameEntry ];\n\n};\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    baseLodash = require('./_baseLodash'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike'),\n    wrapperClone = require('./_wrapperClone');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit method\n * chain sequences. Methods that operate on and return arrays, collections,\n * and functions can be chained together. Methods that retrieve a single value\n * or may return a primitive value will automatically end the chain sequence\n * and return the unwrapped value. Otherwise, the value must be unwrapped\n * with `_#value`.\n *\n * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n * enabled using `_.chain`.\n *\n * The execution of chained methods is lazy, that is, it's deferred until\n * `_#value` is implicitly or explicitly called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion.\n * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n * the creation of intermediate arrays and can greatly reduce the number of\n * iteratee executions. Sections of a chain sequence qualify for shortcut\n * fusion if the section is applied to an array and iteratees accept only\n * one argument. The heuristic for whether a section qualifies for shortcut\n * fusion is subject to change.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n * `zipObject`, `zipObjectDeep`, and `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n * `upperFirst`, `value`, and `words`\n *\n * @name _\n * @constructor\n * @category Seq\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // Returns an unwrapped value.\n * wrapped.reduce(_.add);\n * // => 6\n *\n * // Returns a wrapped value.\n * var squares = wrapped.map(square);\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\nlodash.prototype.constructor = lodash;\n\nmodule.exports = lodash;\n","'use strict';\n\nvar flatten = require('lodash/flatten'),\n    find = require('lodash/find'),\n    isString = require('lodash/isString'),\n    isUndefined = require('lodash/isUndefined'),\n    values = require('lodash/values');\n\nvar getTemplateId = require('./Helper').getTemplateId,\n    getTemplateVersion = require('./Helper').getTemplateVersion;\n\nvar isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\n\n/**\n * Registry for element templates.\n */\nfunction ElementTemplates() {\n  this._templates = {};\n}\n\n/**\n * Get template with given ID and optional version or for element.\n *\n * @param {String|djs.model.Base} id\n * @param {number} [version]\n *\n * @return {ElementTemplate}\n */\nElementTemplates.prototype.get = function(id, version) {\n  var templates = this._templates,\n      element;\n\n  if (isUndefined(id)) {\n    return null;\n  } else if (isString(id)) {\n\n    if (isUndefined(version)) {\n      version = '_';\n    }\n\n    if (templates[ id ] && templates[ id ][ version ]) {\n      return templates[ id ][ version ];\n    } else {\n      return null;\n    }\n  } else {\n    element = id;\n\n    return this.get(getTemplateId(element), getTemplateVersion(element));\n  }\n};\n\n/**\n * Get default template for given element.\n *\n * @param {djs.model.Base} element\n *\n * @return {ElementTemplate}\n */\nElementTemplates.prototype.getDefault = function(element) {\n  return find(this.getAll(), function(template) {\n    return isAny(element, template.appliesTo) && template.isDefault;\n  }) || null;\n};\n\n/**\n * Get all templates (with given ID).\n *\n * @param {string} [id]\n *\n * @return {Array<ElementTemplate>}\n */\nElementTemplates.prototype.getAll = function(id) {\n  if (!isUndefined(id) && this._templates[ id ]) {\n    return values(this._templates[ id ]);\n  }\n\n  return flatten(values(this._templates).map(values));\n};\n\n/**\n * Set templates.\n *\n * @param {Array<ElementTemplate>} templates\n */\nElementTemplates.prototype.set = function(templates) {\n  var self = this;\n\n  this._templates = {};\n\n  templates.forEach(function(template) {\n    var id = template.id,\n        version = isUndefined(template.version) ? '_' : template.version;\n\n    if (!self._templates[ id ]) {\n      self._templates[ id ] = {};\n    }\n\n    self._templates[ id ][ version ] = template;\n  });\n};\n\nmodule.exports = ElementTemplates;","'use strict';\n\nvar outputParameters = require('./implementation/OutputParameters');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var outputParametersEntry = outputParameters(element, bpmnFactory, {\n    idPrefix: 'connector-',\n    insideConnector: true\n  }, translate);\n\n  group.entries = group.entries.concat(outputParametersEntry.entries);\n};\n","'use strict';\n\nvar CmdHelper = {};\nmodule.exports = CmdHelper;\n\nCmdHelper.updateProperties = function(element, properties) {\n  return {\n    cmd: 'element.updateProperties',\n    context: { element: element, properties: properties }\n  };\n};\n\nCmdHelper.updateBusinessObject = function(element, businessObject, newProperties) {\n  return {\n    cmd: 'properties-panel.update-businessobject',\n    context: {\n      element: element,\n      businessObject: businessObject,\n      properties: newProperties\n    }\n  };\n};\n\nCmdHelper.addElementsTolist = function(element, businessObject, listPropertyName, objectsToAdd, objectsToPrepend) {\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      objectsToPrepend: objectsToPrepend,\n      objectsToAdd: objectsToAdd\n    }\n  };\n};\n\nCmdHelper.removeElementsFromList = function(element, businessObject, listPropertyName, referencePropertyName, objectsToRemove) {\n\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      referencePropertyName: referencePropertyName,\n      objectsToRemove: objectsToRemove\n    }\n  };\n};\n\n\nCmdHelper.addAndRemoveElementsFromList = function(element, businessObject, listPropertyName, referencePropertyName, objectsToAdd, objectsToRemove) {\n\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      referencePropertyName: referencePropertyName,\n      objectsToAdd: objectsToAdd,\n      objectsToRemove: objectsToRemove\n    }\n  };\n};\n\n\nCmdHelper.setList = function(element, businessObject, listPropertyName, updatedObjectList) {\n  return {\n    cmd: 'properties-panel.update-businessobject-list',\n    context: {\n      element: element,\n      currentObject: businessObject,\n      propertyName: listPropertyName,\n      updatedObjectList: updatedObjectList\n    }\n  };\n};\n","'use strict';\n\nvar cmdHelper = require('./CmdHelper'),\n    elementHelper = require('./ElementHelper');\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar ExtensionElementsHelper = {};\n\nvar getExtensionElements = function(bo) {\n  return bo.get('extensionElements');\n};\n\nExtensionElementsHelper.getExtensionElements = function(bo, type) {\n  var extensionElements = getExtensionElements(bo);\n  if (typeof extensionElements !== 'undefined') {\n    var extensionValues = extensionElements.get('values');\n    if (typeof extensionValues !== 'undefined') {\n      var elements = extensionValues.filter(function(value) {\n        return is(value, type);\n      });\n      if (elements.length) {\n        return elements;\n      }\n    }\n  }\n};\n\nExtensionElementsHelper.addEntry = function(bo, element, entry, bpmnFactory) {\n  var extensionElements = bo.get('extensionElements');\n\n  // if there is no extensionElements list, create one\n  if (!extensionElements) {\n\n    // TODO: Ask Daniel which operation costs more\n    extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [entry] }, bo, bpmnFactory);\n    return { extensionElements : extensionElements };\n  } else {\n\n    // add new failedJobRetryExtensionElement to existing extensionElements list\n    return cmdHelper.addElementsTolist(element, extensionElements, 'values', [entry]);\n  }\n};\n\nExtensionElementsHelper.removeEntry = function(bo, element, entry) {\n  var extensionElements = bo.get('extensionElements');\n\n  if (!extensionElements) {\n\n    // return an empty command when there is no extensionElements list\n    return {};\n  }\n\n  return cmdHelper.removeElementsFromList(element, extensionElements, 'values', 'extensionElements', [entry]);\n};\n\nmodule.exports = ExtensionElementsHelper;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    entryFactory = require('../../../factory/EntryFactory');\n\n\nmodule.exports = function(group, element, translate) {\n  if (is(element, 'camunda:Assignable')) {\n\n    // Assignee\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'assignee',\n      label : translate('Assignee'),\n      modelProperty : 'assignee'\n    }));\n\n    // Candidate Users\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'candidateUsers',\n      label : translate('Candidate Users'),\n      modelProperty : 'candidateUsers'\n    }));\n\n    // Candidate Groups\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'candidateGroups',\n      label : translate('Candidate Groups'),\n      modelProperty : 'candidateGroups'\n    }));\n\n    // Due Date\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'dueDate',\n      description : translate('The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)'),\n      label : translate('Due Date'),\n      modelProperty : 'dueDate'\n    }));\n\n    // FollowUp Date\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'followUpDate',\n      description : translate('The follow up date as an EL expression (e.g. ${someDate} or an ' +\n                    'ISO date (e.g. 2015-06-26T09:54:00)'),\n      label : translate('Follow Up Date'),\n      modelProperty : 'followUpDate'\n    }));\n\n    // priority\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'priority',\n      label : translate('Priority'),\n      modelProperty : 'priority'\n    }));\n  }\n};\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","'use strict';\n\nvar listener = require('./implementation/Listener');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var listenerEntry = listener(element, bpmnFactory, {}, translate);\n\n  group.entries = group.entries.concat(listenerEntry.entries);\n\n  return {\n    getSelectedListener: listenerEntry.getSelectedListener\n  };\n\n};\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    utils = require('../../../Utils'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nmodule.exports = function(group, element, translate, options) {\n  if (!options) {\n    options = {};\n  }\n\n  // Id\n  group.entries.push(entryFactory.validationAwareTextField(translate, {\n    id: options.id || 'id',\n    label: translate(options.label || 'Id'),\n    description: options.description && translate(options.description),\n    modelProperty: 'id',\n    getProperty: function(element) {\n      return getBusinessObject(element).id;\n    },\n    setProperty: function(element, properties) {\n\n      element = element.labelTarget || element;\n\n      return cmdHelper.updateProperties(element, properties);\n    },\n    validate: function(element, values) {\n      var idValue = values.id;\n\n      var bo = getBusinessObject(element);\n\n      var idError = utils.isIdValid(bo, idValue, translate);\n\n      return idError ? { id: idError } : {};\n    }\n  }));\n\n};\n","'use strict';\n\nvar domQuery = require('min-dom').query,\n    domClear = require('min-dom').clear,\n    domClasses = require('min-dom').classes,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    forEach = require('lodash/forEach'),\n    domify = require('min-dom').domify,\n    Ids = require('ids').default;\n\nvar SPACE_REGEX = /\\s/;\n\n// for QName validation as per http://www.w3.org/TR/REC-xml/#NT-NameChar\nvar QNAME_REGEX = /^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i;\n\n// for ID validation as per BPMN Schema (QName - Namespace)\nvar ID_REGEX = /^[a-z_][\\w-.]*$/i;\n\nvar HTML_ESCAPE_MAP = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nfunction selectedOption(selectBox) {\n  if (selectBox.selectedIndex >= 0) {\n    return selectBox.options[selectBox.selectedIndex].value;\n  }\n}\n\nmodule.exports.selectedOption = selectedOption;\n\n\nfunction selectedType(elementSyntax, inputNode) {\n  var typeSelect = domQuery(elementSyntax, inputNode);\n  return selectedOption(typeSelect);\n}\n\nmodule.exports.selectedType = selectedType;\n\n\n/**\n * Retrieve the root element the document this\n * business object is contained in.\n *\n * @return {ModdleElement}\n */\nfunction getRoot(businessObject) {\n  var parent = businessObject;\n  while (parent.$parent) {\n    parent = parent.$parent;\n  }\n  return parent;\n}\n\nmodule.exports.getRoot = getRoot;\n\n\n/**\n * filters all elements in the list which have a given type.\n * removes a new list\n */\nfunction filterElementsByType(objectList, type) {\n  var list = objectList || [];\n  var result = [];\n  forEach(list, function(obj) {\n    if (is(obj, type)) {\n      result.push(obj);\n    }\n  });\n  return result;\n}\n\nmodule.exports.filterElementsByType = filterElementsByType;\n\n\nfunction findRootElementsByType(businessObject, referencedType) {\n  var root = getRoot(businessObject);\n\n  return filterElementsByType(root.rootElements, referencedType);\n}\n\nmodule.exports.findRootElementsByType = findRootElementsByType;\n\n\nfunction removeAllChildren(domElement) {\n  while (domElement.firstChild) {\n    domElement.removeChild(domElement.firstChild);\n  }\n}\n\nmodule.exports.removeAllChildren = removeAllChildren;\n\n\n/**\n * adds an empty option to the list\n */\nfunction addEmptyParameter(list) {\n  return list.push({ 'label': '', 'value': '', 'name': '' });\n}\n\nmodule.exports.addEmptyParameter = addEmptyParameter;\n\n\n/**\n * returns a list with all root elements for the given parameter 'referencedType'\n */\nfunction refreshOptionsModel(businessObject, referencedType) {\n  var model = [];\n  var referableObjects = findRootElementsByType(businessObject, referencedType);\n  forEach(referableObjects, function(obj) {\n    model.push({\n      label: (obj.name || '') + ' (id='+obj.id+')',\n      value: obj.id,\n      name: obj.name\n    });\n  });\n  return model;\n}\n\nmodule.exports.refreshOptionsModel = refreshOptionsModel;\n\n\n/**\n * fills the drop down with options\n */\nfunction updateOptionsDropDown(domSelector, businessObject, referencedType, entryNode) {\n  var options = refreshOptionsModel(businessObject, referencedType);\n  addEmptyParameter(options);\n  var selectBox = domQuery(domSelector, entryNode);\n  domClear(selectBox);\n\n  forEach(options, function(option) {\n    var optionEntry = domify('<option value=\"' + escapeHTML(option.value) + '\">' + escapeHTML(option.label) + '</option>');\n    selectBox.appendChild(optionEntry);\n  });\n  return options;\n}\n\nmodule.exports.updateOptionsDropDown = updateOptionsDropDown;\n\n\n/**\n * checks whether the id value is valid\n *\n * @param {ModdleElement} bo\n * @param {String} idValue\n * @param {Function} translate\n *\n * @return {String} error message\n */\nfunction isIdValid(bo, idValue, translate) {\n  var assigned = bo.$model.ids.assigned(idValue);\n\n  var idExists = assigned && assigned !== bo;\n\n  if (!idValue || idExists) {\n    return translate('Element must have an unique id.');\n  }\n\n  return validateId(idValue, translate);\n}\n\nmodule.exports.isIdValid = isIdValid;\n\n\nfunction validateId(idValue, translate) {\n\n  if (containsSpace(idValue)) {\n    return translate('Id must not contain spaces.');\n  }\n\n  if (!ID_REGEX.test(idValue)) {\n\n    if (QNAME_REGEX.test(idValue)) {\n      return translate('Id must not contain prefix.');\n    }\n\n    return translate('Id must be a valid QName.');\n  }\n}\n\nmodule.exports.validateId = validateId;\n\n\nfunction containsSpace(value) {\n  return SPACE_REGEX.test(value);\n}\n\nmodule.exports.containsSpace = containsSpace;\n\n/**\n * generate a semantic id with given prefix\n */\nfunction nextId(prefix) {\n  var ids = new Ids([32,32,1]);\n\n  return ids.nextPrefixed(prefix);\n}\n\nmodule.exports.nextId = nextId;\n\n\nfunction triggerClickEvent(element) {\n  var evt;\n  var eventType = 'click';\n\n  if (document.createEvent) {\n    try {\n\n      // Chrome, Safari, Firefox\n      evt = new MouseEvent((eventType), { view: window, bubbles: true, cancelable: true });\n    } catch (e) {\n\n      // IE 11, PhantomJS (wat!)\n      evt = document.createEvent('MouseEvent');\n\n      evt.initEvent((eventType), true, true);\n    }\n    return element.dispatchEvent(evt);\n  } else {\n\n    // Welcome IE\n    evt = document.createEventObject();\n\n    return element.fireEvent('on' + eventType, evt);\n  }\n}\n\nmodule.exports.triggerClickEvent = triggerClickEvent;\n\n\nfunction escapeHTML(str) {\n  str = '' + str;\n\n  return str && str.replace(/[&<>\"']/g, function(match) {\n    return HTML_ESCAPE_MAP[match];\n  });\n}\n\nmodule.exports.escapeHTML = escapeHTML;\n\nfunction createDropdown(dropdown) {\n  var menu = dropdown.menu;\n\n  var dropdownNode = domify(\n    '<div class=\"group__dropdown\">' +\n      '<button class=\"group__dropdown-button\">' +\n      '<svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 512\"><path fill=\"currentColor\" d=\"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z\"></path></svg>' +\n      '</button>' +\n      '<div class=\"group__dropdown-menu\"></div>' +\n    '</div>'\n  );\n\n  var buttonNode = domQuery('.group__dropdown-button', dropdownNode),\n      menuNode = domQuery('.group__dropdown-menu', dropdownNode);\n\n  buttonNode.addEventListener('click', function(event) {\n    domClasses(dropdownNode).toggle('group__dropdown--open');\n\n    createOnGlobalClick(event);\n  });\n\n  forEach(menu, function(menuItem) {\n    var menuItemNode = domify('<div class=\"group__dropdown-menu-item\" data-dropdown-action=\"' +\n      menuItem.id +\n      '\">' + escapeHTML(menuItem.label) + '</div>');\n\n    menuItemNode.addEventListener('click', function() {\n      menuItem.onClick();\n\n      domClasses(dropdownNode).remove('group__dropdown--open');\n    });\n\n    menuNode.appendChild(menuItemNode);\n  });\n\n  var _onGlobalClick;\n\n  function createOnGlobalClick(_event) {\n    function onGlobalClick(event) {\n      if (event === _event) {\n        return;\n      }\n\n      var target = event.target;\n\n      if (menuNode !== target && !menuNode.contains(target)) {\n        domClasses(dropdownNode).remove('group__dropdown--open');\n\n        document.removeEventListener('click', onGlobalClick);\n      }\n    }\n\n    if (_onGlobalClick) {\n      document.removeEventListener('click', _onGlobalClick);\n    }\n\n    document.addEventListener('click', onGlobalClick);\n\n    _onGlobalClick = onGlobalClick;\n  }\n\n  return dropdownNode;\n}\n\nmodule.exports.createDropdown = createDropdown;","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\nmodule.exports = composeArgsRight;\n","'use strict';\n\nvar isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar processVariables = require('./implementation/ProcessVariables');\n\nmodule.exports = function(group, element, translate) {\n  if (canHaveOverview(element)) {\n    var processVariablesEntries = processVariables(element, translate);\n\n    group.entries = group.entries.concat(processVariablesEntries);\n  }\n};\n\n\n// helpers //////////\n\nfunction canHaveOverview(element) {\n  var businessObject = getBusinessObject(element);\n\n  return (\n    isAny(element, ['bpmn:Process', 'bpmn:SubProcess']) ||\n    (is(element, 'bpmn:Participant') && businessObject.get('processRef'))\n  );\n}\n","'use strict';\n\nvar isArray = require('lodash/isArray');\nvar isObject = require('lodash/isObject');\n\nvar DROPDOWN_TYPE = 'Dropdown';\n\nvar VALID_TYPES = [ 'String', 'Text', 'Boolean', 'Hidden', DROPDOWN_TYPE ];\n\nvar PROPERTY_TYPE = 'property',\n    CAMUNDA_PROPERTY_TYPE = 'camunda:property',\n    CAMUNDA_INPUT_PARAMETER_TYPE = 'camunda:inputParameter',\n    CAMUNDA_OUTPUT_PARAMETER_TYPE = 'camunda:outputParameter',\n    CAMUNDA_IN_TYPE = 'camunda:in',\n    CAMUNDA_OUT_TYPE = 'camunda:out',\n    CAMUNDA_IN_BUSINESS_KEY_TYPE = 'camunda:in:businessKey',\n    CAMUNDA_EXECUTION_LISTENER = 'camunda:executionListener',\n    CAMUNDA_FIELD = 'camunda:field';\n\nvar VALID_BINDING_TYPES = [\n  PROPERTY_TYPE,\n  CAMUNDA_PROPERTY_TYPE,\n  CAMUNDA_INPUT_PARAMETER_TYPE,\n  CAMUNDA_OUTPUT_PARAMETER_TYPE,\n  CAMUNDA_IN_TYPE,\n  CAMUNDA_OUT_TYPE,\n  CAMUNDA_IN_BUSINESS_KEY_TYPE,\n  CAMUNDA_EXECUTION_LISTENER,\n  CAMUNDA_FIELD\n];\n\n\n/**\n * A element template validator.\n */\nfunction Validator() {\n\n  this._templatesById = {};\n\n  this._validTemplates = [];\n  this._errors = [];\n\n\n  /**\n   * Adds the templates.\n   *\n   * @param {Array<TemplateDescriptor>} templates\n   *\n   * @return {Validator} self\n   */\n  this.addAll = function(templates) {\n\n    if (!isArray(templates)) {\n      this._logError('templates must be []');\n    } else {\n      templates.forEach(this.add, this);\n    }\n\n    return this;\n  };\n\n  /**\n   * Add the given element template, if it is valid.\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Validator} self\n   */\n  this.add = function(template) {\n\n    var err = this._validateTemplate(template);\n\n    var id, version;\n\n    if (!err) {\n      id = template.id;\n      version = template.version || '_';\n\n      if (!this._templatesById[ id ]) {\n        this._templatesById[ id ] = {};\n      }\n\n      this._templatesById[ id ][ version ] = template;\n\n      this._validTemplates.push(template);\n    }\n\n    return this;\n  };\n\n  /**\n   * Validate given template and return error (if any).\n   *\n   * @param {TemplateDescriptor} template\n   *\n   * @return {Error} validation error, if any\n   */\n  this._validateTemplate = function(template) {\n\n    var err,\n        id = template.id,\n        version = template.version || '_',\n        name = template.name,\n        appliesTo = template.appliesTo,\n        properties = template.properties,\n        scopes = template.scopes;\n\n    if (!id) {\n      return this._logError('missing template id');\n    }\n\n    if (!name) {\n      return this._logError('missing template name');\n    }\n\n    if (this._templatesById[ id ] && this._templatesById[ id ][ version ]) {\n      if (version === '_') {\n        return this._logError('template id <' + id + '> already used');\n      } else {\n        return this._logError('template id <' + id + '> and version <' + version + '> already used');\n      }\n    }\n\n    if (!isArray(appliesTo)) {\n      err = this._logError('missing appliesTo=[]', template);\n    }\n\n    if (!isArray(properties)) {\n      err = this._logError('missing properties=[]', template);\n    } else {\n      if (!this._validateProperties(properties)) {\n        err = new Error('invalid properties');\n      }\n    }\n\n    if (scopes) {\n      err = this._validateScopes(template, scopes);\n    }\n\n    return err;\n  };\n\n  this._validateScopes = function(template, scopes) {\n\n    var err,\n        scope,\n        scopeName;\n\n    if (!isObject(scopes) || isArray(scopes)) {\n      return this._logError('invalid scopes, should be scopes={}', template);\n    }\n\n    for (scopeName in scopes) {\n      scope = scopes[scopeName];\n\n      if (!isObject(scope) || isArray(scope)) {\n        err = this._logError('invalid scope, should be scope={}', template);\n      }\n\n      if (!isArray(scope.properties)) {\n        err = this._logError(\n          'missing properties=[] in scope <' + scopeName + '>', template\n        );\n      } else {\n        if (!this._validateProperties(scope.properties)) {\n          err = new Error('invalid properties in scope <' + scopeName + '>');\n        }\n      }\n    }\n\n    return err;\n  };\n\n  /**\n   * Validate properties and return false if any is invalid.\n   *\n   * @param {Array<PropertyDescriptor>} properties\n   *\n   * @return {Boolean} true if all properties are valid\n   */\n  this._validateProperties = function(properties) {\n    var validProperties = properties.filter(this._validateProperty, this);\n\n    return properties.length === validProperties.length;\n  };\n\n  /**\n   * Validate property and return false, if there was\n   * a validation error.\n   *\n   * @param {PropertyDescriptor} property\n   *\n   * @return {Boolean} true if property is valid\n   */\n  this._validateProperty = function(property) {\n\n    var type = property.type,\n        binding = property.binding;\n\n    var err;\n\n    var bindingType = binding.type;\n\n    if (type && VALID_TYPES.indexOf(type) === -1) {\n      err = this._logError(\n        'invalid property type <' + type + '>; ' +\n        'must be any of { ' + VALID_TYPES.join(', ') + ' }'\n      );\n    }\n\n    if (type === DROPDOWN_TYPE && bindingType !== CAMUNDA_EXECUTION_LISTENER) {\n      if (!isArray(property.choices)) {\n        err = this._logError(\n          'must provide choices=[] with ' + DROPDOWN_TYPE + ' type'\n        );\n      } else\n\n      if (!property.choices.every(isDropdownChoiceValid)) {\n        err = this._logError(\n          '{ name, value } must be specified for ' +\n          DROPDOWN_TYPE + ' choices'\n        );\n      }\n    }\n\n    if (!binding) {\n      return this._logError('property missing binding');\n    }\n\n    if (VALID_BINDING_TYPES.indexOf(bindingType) === -1) {\n      err = this._logError(\n        'invalid property.binding type <' + bindingType + '>; ' +\n        'must be any of { ' + VALID_BINDING_TYPES.join(', ') + ' }'\n      );\n    }\n\n    if (bindingType === PROPERTY_TYPE ||\n        bindingType === CAMUNDA_PROPERTY_TYPE ||\n        bindingType === CAMUNDA_INPUT_PARAMETER_TYPE ||\n        bindingType === CAMUNDA_FIELD) {\n\n      if (!binding.name) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires name'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_OUTPUT_PARAMETER_TYPE) {\n      if (!binding.source) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires source'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_IN_TYPE) {\n\n      if (!binding.variables && !binding.target) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires ' +\n          'variables or target'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_OUT_TYPE) {\n\n      if (!binding.variables && !binding.source && !binding.sourceExpression) {\n        err = this._logError(\n          'property.binding <' + bindingType + '> requires ' +\n          'variables, sourceExpression or source'\n        );\n      }\n    }\n\n    if (bindingType === CAMUNDA_EXECUTION_LISTENER) {\n\n      if (type && type !== 'Hidden') {\n        err = this._logError(\n          'invalid property type <' + type + '> for ' + CAMUNDA_EXECUTION_LISTENER + '; ' +\n          'must be <Hidden>'\n        );\n      }\n    }\n\n    return !err;\n  };\n\n\n  this._logError = function(err, template) {\n\n    if (typeof err === 'string') {\n      if (template) {\n        err = 'template(id: ' + template.id + ') ' + err;\n      }\n\n      err = new Error(err);\n    }\n\n    this._errors.push(err);\n\n    return err;\n  };\n\n  this.getErrors = function() {\n    return this._errors;\n  };\n\n  this.getValidTemplates = function() {\n    return this._validTemplates;\n  };\n}\n\nmodule.exports = Validator;\n\n\n// helpers ///////////////////////////////////\n\nfunction isDropdownChoiceValid(c) {\n  return 'name' in c && 'value' in c;\n}\n","var LazyWrapper = require('./_LazyWrapper'),\n    getData = require('./_getData'),\n    getFuncName = require('./_getFuncName'),\n    lodash = require('./wrapperLodash');\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n *  else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func),\n      other = lodash[funcName];\n\n  if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nmodule.exports = isLaziable;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    inputOutputHelper = require('../../../../helper/InputOutputHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils');\n\nvar entryFieldDescription = require('../../../../factory/EntryFieldDescription');\n\nvar domQuery = require('min-dom').query;\n\nvar InputOutputParameter = require('./InputOutputParameter');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  options = options || {};\n\n  var insideConnector = !!options.insideConnector,\n      idPrefix = options.idPrefix || '';\n\n  var result = {};\n\n  var entries = result.entries = [];\n\n  if (!inputOutputHelper.isInputOutputSupported(element, insideConnector)) {\n    return result;\n  }\n\n  var parametersOptions = {\n    insideConnector: insideConnector,\n    idPrefix: idPrefix\n  };\n\n  // input parameters ///////////////////////////////////////////////////////////////\n  entries.push(\n    getParametersHeading(element, bpmnFactory, {\n      idPrefix: idPrefix,\n      insideConnector: insideConnector,\n      type: 'camunda:InputParameter',\n      prop: 'inputParameters',\n      prefix: 'Input'\n    }));\n\n  append(entries,\n    getInputParameterEntries(element, bpmnFactory, parametersOptions, translate)\n  );\n\n  return result;\n};\n\nfunction getParametersHeading(element, bpmnFactory, options) {\n  var idPrefix = options.idPrefix || '',\n      prefix = options.prefix,\n      type = options.type,\n      prop = options.prop,\n      insideConnector = options.insideConnector;\n\n  var entry = {\n    id: idPrefix + prefix + '-heading',\n    cssClasses: [ 'bpp-input-output' ],\n    html: '<div class=\"bpp-field-wrapper\">' +\n      '<button type=\"button\" class=\"bpp-input-output__add add action-button\" ' + 'data-action=\"createElement\">' +\n      '</button><input name=\"hidden\" type=\"hidden\">' +\n      '</div>'\n  };\n\n  entry.createElement = function(_, entryNode) {\n    var commands = createElement();\n\n    if (commands) {\n      scheduleCommands(commands, entryNode);\n      return true;\n    }\n  };\n\n  entry.set = function() {\n    var commands = entry._commands;\n\n    if (commands) {\n      delete entry._commands;\n      return commands;\n    }\n  };\n\n  function createElement() {\n    var commands = [];\n    var bo = getBusinessObject(element);\n    var extensionElements = bo.get('extensionElements');\n\n    if (!extensionElements) {\n      extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n      commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n    }\n\n    var inputOutput = getInputOutput(element, insideConnector);\n    if (!inputOutput) {\n      var parent = !insideConnector ? extensionElements : getConnector(element);\n      inputOutput = createInputOutput(parent, bpmnFactory, {\n        inputParameters: [],\n        outputParameters: []\n      });\n\n      if (!insideConnector) {\n        commands.push(cmdHelper.addAndRemoveElementsFromList(\n          element,\n          extensionElements,\n          'values',\n          'extensionElements',\n          [ inputOutput ],\n          []\n        ));\n      } else {\n        commands.push(cmdHelper.updateBusinessObject(element, parent, { inputOutput: inputOutput }));\n      }\n    }\n\n    var newElem = createParameter(type, inputOutput, bpmnFactory, { name: generateElementId(prefix) });\n    commands.push(cmdHelper.addElementsTolist(element, inputOutput, prop, [], [ newElem ]));\n\n    return commands;\n  }\n\n  /**\n   * Schedule commands to be run with next `set` method call.\n   *\n   * @param {Array<any>} commands\n   * @param {HTMLElement} entryNode\n   */\n  function scheduleCommands(commands, entryNode) {\n    entry._commands = commands;\n\n    // @barmac: hack to make properties panel call `set`\n    var input = domQuery('input[type=\"hidden\"]', entryNode);\n    input.value = 1;\n  }\n\n  return entry;\n}\n\nfunction getInputParameterEntries(element, bpmnFactory, options, translate) {\n  var idPrefix = options.idPrefix,\n      insideConnector = options.insideConnector,\n      inputOutput = getInputOutput(element, insideConnector),\n      params = getInputParameters(element, insideConnector),\n      entries;\n\n  if (!params.length) {\n    var description = entryFieldDescription(translate, translate('No variables defined.'));\n\n    return [{\n      id: idPrefix + 'input-parameter' + '-placeholder',\n      cssClasses: [ 'bpp-input-output-placeholder' ],\n      html: description\n    }];\n  }\n\n  var inputParameters = params.map(function(param, index) {\n    function onRemove() {\n      var commands = [];\n      commands.push(cmdHelper.removeElementsFromList(element, inputOutput, 'inputParameters', null, [param]));\n\n      // remove inputOutput if there are no input/output parameters anymore\n      if (inputOutput.get('inputParameters').length === 1 && (inputOutput.get('outputParameters') || []).length === 0) {\n\n        if (!insideConnector) {\n          commands.push(extensionElementsHelper.removeEntry(getBusinessObject(element), element, inputOutput));\n        }\n        else {\n          var connector = getConnector(element);\n          commands.push(cmdHelper.updateBusinessObject(element, connector, { inputOutput: undefined }));\n        }\n      }\n\n      return commands;\n    }\n\n    return InputOutputParameter(param, bpmnFactory,\n      {\n        idPrefix: idPrefix + 'input-parameter-' + index,\n        onRemove: onRemove,\n        onToggle: onToggle\n      }, translate);\n  });\n\n  /**\n   * Close remaining collapsible entries within group.\n   *\n   * @param {boolean} value\n   * @param {HTMLElement} entryNode\n   */\n  function onToggle(value, entryNode) {\n    if (!value) {\n      return;\n    }\n\n    var currentEntryId = entryNode.dataset.entry;\n\n    inputParameters.forEach(function(inputParameter) {\n      if (inputParameter.entries[0].id === currentEntryId) {\n        return;\n      }\n\n      inputParameter.setOpen(false);\n    });\n  }\n\n  entries = inputParameters.map(function(input) {\n    return input.entries;\n  });\n\n  return flatten(entries);\n}\n\n\nfunction append(array, items) {\n  Array.prototype.push.apply(array, items);\n}\n\nfunction flatten(arrays) {\n  return Array.prototype.concat.apply([], arrays);\n}\n\nfunction generateElementId(prefix) {\n  prefix = prefix + '_';\n  return utils.nextId(prefix);\n}\n\nfunction getInputOutput(element, insideConnector) {\n  return inputOutputHelper.getInputOutput(element, insideConnector);\n}\n\nfunction getConnector(element) {\n  return inputOutputHelper.getConnector(element);\n}\n\nfunction getInputParameters(element, insideConnector) {\n  return inputOutputHelper.getInputParameters(element, insideConnector);\n}\n\nfunction createElement(type, parent, factory, properties) {\n  return elementHelper.createElement(type, properties, parent, factory);\n}\n\nfunction createInputOutput(parent, bpmnFactory, properties) {\n  return createElement('camunda:InputOutput', parent, bpmnFactory, properties);\n}\n\nfunction createParameter(type, parent, bpmnFactory, properties) {\n  return createElement(type, parent, bpmnFactory, properties);\n}\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var historyTimeToLiveEntry = entryFactory.textField(translate, {\n    id: 'historyTimeToLive',\n    label: translate('History Time To Live'),\n    modelProperty: 'historyTimeToLive',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var historyTimeToLive = bo.get('camunda:historyTimeToLive');\n\n      return {\n        historyTimeToLive: historyTimeToLive ? historyTimeToLive : ''\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:historyTimeToLive': values.historyTimeToLive || undefined\n      });\n    }\n\n  });\n\n  return [ historyTimeToLiveEntry ];\n};\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","var arrayFilter = require('./_arrayFilter'),\n    baseRest = require('./_baseRest'),\n    baseXor = require('./_baseXor'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values that is the\n * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n * of the given arrays. The order of result values is determined by the order\n * they occur in the arrays.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.without\n * @example\n *\n * _.xor([2, 1], [2, 3]);\n * // => [1, 3]\n */\nvar xor = baseRest(function(arrays) {\n  return baseXor(arrayFilter(arrays, isArrayLikeObject));\n});\n\nmodule.exports = xor;\n","'use strict';\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper'),\n    InputOutputHelper = require('../../../helper/InputOutputHelper');\n\nvar utils = require('../../../Utils'),\n    escapeHTML = utils.escapeHTML,\n    triggerClickEvent = utils.triggerClickEvent;\n\nvar implementationType = require('./implementation/ImplementationType'),\n    delegate = require('./implementation/Delegate'),\n    external = require('./implementation/External'),\n    callable = require('./implementation/Callable'),\n    resultVariable = require('./implementation/ResultVariable');\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar domQuery = require('min-dom').query,\n    domClosest = require('min-dom').closest,\n    domClasses = require('min-dom').classes;\n\nfunction getImplementationType(element) {\n  return ImplementationTypeHelper.getImplementationType(element);\n}\n\nfunction getBusinessObject(element) {\n  return ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n}\n\nfunction isDmnCapable(element) {\n  return ImplementationTypeHelper.isDmnCapable(element);\n}\n\nfunction isExternalCapable(element) {\n  return ImplementationTypeHelper.isExternalCapable(element);\n}\n\nfunction isServiceTaskLike(element) {\n  return ImplementationTypeHelper.isServiceTaskLike(element);\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!isServiceTaskLike(getBusinessObject(element))) {\n    return;\n  }\n\n  var hasDmnSupport = isDmnCapable(element);\n  var hasExternalSupport = isExternalCapable(getBusinessObject(element));\n\n  // implementation type ////////////////////////////////////\n\n  group.entries = group.entries.concat(implementationType(element, bpmnFactory, {\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getImplementationType,\n    hasDmnSupport: hasDmnSupport,\n    hasExternalSupport: hasExternalSupport,\n    hasServiceTaskLikeSupport: true\n  }, translate));\n\n\n  // delegate (class, expression, delegateExpression) //////////\n\n  group.entries = group.entries.concat(delegate(element, bpmnFactory, {\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getImplementationType\n  }, translate));\n\n\n  // result variable /////////////////////////////////////////\n\n  group.entries = group.entries.concat(resultVariable(element, bpmnFactory, {\n    getBusinessObject: getBusinessObject,\n    getImplementationType: getImplementationType,\n    hideResultVariable: function(element, node) {\n      return getImplementationType(element) !== 'expression';\n    }\n  }, translate));\n\n  // external //////////////////////////////////////////////////\n\n  if (hasExternalSupport) {\n    group.entries = group.entries.concat(external(element, bpmnFactory, {\n      getBusinessObject: getBusinessObject,\n      getImplementationType: getImplementationType\n    }, translate));\n  }\n\n\n  // dmn ////////////////////////////////////////////////////////\n\n  if (hasDmnSupport) {\n    group.entries = group.entries.concat(callable(element, bpmnFactory, {\n      getCallableType: getImplementationType\n    }, translate));\n  }\n\n\n  // connector ////////////////////////////////////////////////\n\n  var isConnector = function(element) {\n    return getImplementationType(element) === 'connector';\n  };\n\n  group.entries.push(entryFactory.link(translate, {\n    id: 'configureConnectorLink',\n    buttonLabel: translate('Configure Connector'),\n    handleClick: function(element, node, event) {\n\n      var connectorTabEl = getTabNode(node, 'connector');\n\n      if (connectorTabEl) {\n        triggerClickEvent(connectorTabEl);\n      }\n\n      // suppress actual link click\n      return false;\n    },\n    showLink: function(element, node) {\n      var link = domQuery('a', node);\n      link.textContent = '';\n\n      domClasses(link).remove('bpp-error-message');\n\n      if (isConnector(element)) {\n        var connectorId = InputOutputHelper.getConnector(element).get('connectorId');\n        if (connectorId) {\n          link.textContent = translate('Configure Connector');\n        } else {\n          link.innerHTML = '<span class=\"bpp-icon-warning\"></span> ' + escapeHTML(translate('Must configure Connector'));\n          domClasses(link).add('bpp-error-message');\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  }));\n\n};\n\n\n\n// helpers ///////////////////////////\n\nfunction getTabNode(el, id) {\n  var containerEl = domClosest(el, '.bpp-properties-panel');\n\n  return domQuery('a[data-tab-target=\"' + id + '\"]', containerEl);\n}","/**\n * The function whose prototype chain sequence wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nmodule.exports = baseLodash;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar getOption = require('./Helper').getOption,\n    getOptions = require('./Helper').getOptions,\n    getTemplateId = require('../Helper').getTemplateId,\n    ELEMENT_TEMPLATE_OPTION_EMPTY = require('../Helper').ELEMENT_TEMPLATE_OPTION_EMPTY;\n\nvar isNull = require('lodash/isNull'),\n    isUndefined = require('lodash/isUndefined'),\n    pick = require('lodash/pick');\n\nmodule.exports = function(group, element, elementTemplates, translate) {\n  if (!isUndefined(getTemplateId(element)) && !isNull(getTemplateId(element))) {\n    return;\n  }\n\n  var options = getOptions(element, elementTemplates, translate);\n\n  // Return if empty option is only option\n  if (options.length === 1) {\n    return;\n  }\n\n  var selectOptions = options.map(function(option) {\n    return pick(option, [ 'name', 'value' ]);\n  });\n\n  // select element template (via dropdown)\n  group.entries.push(entryFactory.selectBox(translate, {\n    id: 'elementTemplate-chooser',\n    label: translate('Element Template'),\n    modelProperty: 'elementTemplateOption',\n    selectOptions: selectOptions,\n    get: function(element) {\n      return {\n        elementTemplateOption: ELEMENT_TEMPLATE_OPTION_EMPTY\n      };\n    },\n    set: function(element, properties) {\n      var optionId = properties['elementTemplateOption'];\n\n      var option = getOption(optionId, options);\n\n      var id = option.id,\n          version = option.version;\n\n      var newTemplate = elementTemplates.get(id, version);\n\n      return applyTemplate(element, newTemplate, elementTemplates);\n    }\n  }));\n\n};\n\n\n// helpers //////////\n\nfunction applyTemplate(element, newTemplate, elementTemplates) {\n  var oldTemplate = elementTemplates.get(element);\n\n  if (oldTemplate === newTemplate) {\n    return;\n  }\n\n  return {\n    cmd: 'propertiesPanel.camunda.changeTemplate',\n    context: {\n      element: element,\n      oldTemplate: oldTemplate,\n      newTemplate: newTemplate\n    }\n  };\n}","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    createHybrid = require('./_createHybrid'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createCurry;\n","'use strict';\n\nvar findExtension = require('../Helper').findExtension,\n    findExtensions = require('../Helper').findExtensions;\n\nvar createCamundaExecutionListenerScript = require('../CreateHelper').createCamundaExecutionListenerScript,\n    createCamundaFieldInjection = require('../CreateHelper').createCamundaFieldInjection,\n    createCamundaIn = require('../CreateHelper').createCamundaIn,\n    createCamundaInWithBusinessKey = require('../CreateHelper').createCamundaInWithBusinessKey,\n    createCamundaOut = require('../CreateHelper').createCamundaOut,\n    createCamundaProperty = require('../CreateHelper').createCamundaProperty,\n    createInputParameter = require('../CreateHelper').createInputParameter,\n    createOutputParameter = require('../CreateHelper').createOutputParameter;\n\nvar EventDefinitionHelper = require('../../../../helper/EventDefinitionHelper');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\n\nvar find = require('lodash/find'),\n    forEach = require('lodash/forEach'),\n    isString = require('lodash/isString'),\n    keys = require('lodash/keys'),\n    remove = require('lodash/remove');\n\nvar CAMUNDA_SERVICE_TASK_LIKE = [\n  'camunda:class',\n  'camunda:delegateExpression',\n  'camunda:expression'\n];\n\n/**\n * Applies an element template to an element. Sets `camunda:modelerTemplate` and\n * `camunda:modelerTemplateVersion`.\n */\nfunction ChangeElementTemplateHandler(bpmnFactory, commandStack, modeling) {\n  this._bpmnFactory = bpmnFactory;\n  this._commandStack = commandStack;\n  this._modeling = modeling;\n}\n\nChangeElementTemplateHandler.$inject = [\n  'bpmnFactory',\n  'commandStack',\n  'modeling'\n];\n\nmodule.exports = ChangeElementTemplateHandler;\n\n/**\n   * Change an element's template and update its properties as specified in `newTemplate`. Specify\n   * `oldTemplate` to update from one template to another. If `newTemplate` isn't specified the\n   * `camunda:modelerTemplate` and `camunda:modelerTemplateVersion` properties will be removed from\n   * the element.\n   *\n   * @param {Object} context\n   * @param {Object} context.element\n   * @param {Object} [context.oldTemplate]\n   * @param {Object} [context.newTemplate]\n   */\nChangeElementTemplateHandler.prototype.preExecute = function(context) {\n  var element = context.element,\n      newTemplate = context.newTemplate,\n      oldTemplate = context.oldTemplate;\n\n  var self = this;\n\n  // Update camunda:modelerTemplate attribute\n  this._updateCamundaModelerTemplate(element, newTemplate);\n\n  if (newTemplate) {\n\n    // Update properties\n    this._updateProperties(element, oldTemplate, newTemplate);\n\n    // Update camunda:ExecutionListener properties\n    this._updateCamundaExecutionListenerProperties(element, newTemplate);\n\n    // Update camunda:Field properties\n    this._updateCamundaFieldProperties(element, oldTemplate, newTemplate);\n\n    // Update camunda:In and camunda:Out properties\n    this._updateCamundaInOutProperties(element, oldTemplate, newTemplate);\n\n    // Update camunda:InputParameter and camunda:OutputParameter properties\n    this._updateCamundaInputOutputParameterProperties(element, oldTemplate, newTemplate);\n\n    // Update camunda:Property properties\n    this._updateCamundaPropertyProperties(element, oldTemplate, newTemplate);\n\n    // Update properties for each scope\n    forEach(newTemplate.scopes, function(newScopeTemplate, scopeName) {\n      self._updateScopeProperties(element, scopeName, oldTemplate, newScopeTemplate);\n    });\n\n  }\n};\n\nChangeElementTemplateHandler.prototype._getOrCreateExtensionElements = function(element) {\n  var bpmnFactory = this._bpmnFactory,\n      modeling = this._modeling;\n\n  var businessObject = getBusinessObject(element);\n\n  var extensionElements = businessObject.get('extensionElements');\n\n  if (!extensionElements) {\n    extensionElements = bpmnFactory.create('bpmn:ExtensionElements', {\n      values: []\n    });\n\n    modeling.updateProperties(element, {\n      extensionElements: extensionElements\n    });\n  }\n\n  return extensionElements;\n};\n\n/**\n * Update `camunda:ExecutionListener` properties of specified business object. Execution listeners\n * will always be overridden. Execution listeners can only exist in `bpmn:ExtensionElements`.\n *\n * @param {djs.model.Base} element\n * @param {Object} newTemplate\n */\nChangeElementTemplateHandler.prototype._updateCamundaExecutionListenerProperties = function(element, newTemplate) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack;\n\n  var newProperties = newTemplate.properties.filter(function(newProperty) {\n    var newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    return newBindingType === 'camunda:executionListener';\n  });\n\n  // (1) Do not override old execution listeners if no new execution listeners specified\n  if (!newProperties.length) {\n    return;\n  }\n\n  var businessObject = this._getOrCreateExtensionElements(element);\n\n  // (2) Remove old execution listeners\n  var oldExecutionListeners = findExtensions(element, [ 'camunda:ExecutionListener' ]);\n\n  // (3) Add new execution listeners\n  var newExecutionListeners = newProperties.map(function(newProperty) {\n    var newBinding = newProperty.binding,\n        propertyValue = newProperty.value;\n\n    return createCamundaExecutionListenerScript(newBinding, propertyValue, bpmnFactory);\n  });\n\n  commandStack.execute('properties-panel.update-businessobject-list', {\n    element: element,\n    currentObject: businessObject,\n    propertyName: 'values',\n    objectsToAdd: newExecutionListeners,\n    objectsToRemove: oldExecutionListeners\n  });\n};\n\n/**\n * Update `camunda:Field` properties of specified business object.\n * If business object is `camunda:ExecutionListener` or `camunda:TaskListener` `fields` property\n * will be updated. Otherwise `extensionElements.values` property will be updated.\n *\n * @param {djs.model.Base} element\n * @param {Object} oldTemplate\n * @param {Object} newTemplate\n * @param {ModdleElement} businessObject\n */\nChangeElementTemplateHandler.prototype._updateCamundaFieldProperties = function(element, oldTemplate, newTemplate, businessObject) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack;\n\n  var newProperties = newTemplate.properties.filter(function(newProperty) {\n    var newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    return newBindingType === 'camunda:field';\n  });\n\n  // (1) Do not override old fields if no new fields specified\n  if (!newProperties.length) {\n    return;\n  }\n\n  if (!businessObject) {\n    businessObject = this._getOrCreateExtensionElements(element);\n  }\n\n  var propertyName = isAny(businessObject, [ 'camunda:ExecutionListener', 'camunda:TaskListener' ])\n    ? 'fields'\n    : 'values';\n\n  var oldFields = findExtensions(element, [ 'camunda:Field' ]);\n\n  newProperties.forEach(function(newProperty) {\n    var oldProperty = findOldProperty(oldTemplate, newProperty),\n        oldField = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n        newBinding = newProperty.binding;\n\n    // (2) Update old fields\n    if (oldProperty && oldField) {\n\n      if (!propertyChanged(oldField, oldProperty)) {\n        commandStack.execute('properties-panel.update-businessobject', {\n          element: element,\n          businessObject: oldField,\n          properties: {\n            string: newProperty.value\n          }\n        });\n      }\n\n      remove(oldFields, oldField);\n    }\n\n    // (3) Add new fields\n    else {\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: businessObject,\n        propertyName: propertyName,\n        objectsToAdd: [ createCamundaFieldInjection(newBinding, newProperty.value, bpmnFactory) ],\n        objectsToRemove: []\n      });\n    }\n  });\n\n  // (4) Remove old fields\n  if (oldFields.length) {\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: businessObject,\n      propertyName: propertyName,\n      objectsToAdd: [],\n      objectsToRemove: oldFields\n    });\n  }\n};\n\n/**\n * Update `camunda:In` and `camunda:Out` properties of specified business object. Only\n * `bpmn:CallActivity` and events with `bpmn:SignalEventDefinition` can have ins. Only\n * `camunda:CallActivity` can have outs.\n *\n * @param {djs.model.Base} element\n * @param {Object} oldTemplate\n * @param {Object} newTemplate\n */\nChangeElementTemplateHandler.prototype._updateCamundaInOutProperties = function(element, oldTemplate, newTemplate) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack;\n\n  var newProperties = newTemplate.properties.filter(function(newProperty) {\n    var newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    return newBindingType === 'camunda:in'\n      || newBindingType === 'camunda:in:businessKey'\n      || newBindingType === 'camunda:out';\n  });\n\n  // (1) Do not override old fields if no new fields specified\n  if (!newProperties.length) {\n    return;\n  }\n\n  // Get extension elements of either signal event definition or call activity\n  var businessObject = this._getOrCreateExtensionElements(\n    EventDefinitionHelper.getSignalEventDefinition(element) || element);\n\n  var oldInsAndOuts = findExtensions(businessObject, [ 'camunda:In', 'camunda:Out' ]);\n\n  newProperties.forEach(function(newProperty) {\n    var oldProperty = findOldProperty(oldTemplate, newProperty),\n        oldBinding = oldProperty && oldProperty.binding,\n        oldInOurOut = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n        newPropertyValue = newProperty.value,\n        newBinding = newProperty.binding,\n        newBindingType = newBinding.type,\n        newInOrOut,\n        properties = {};\n\n    // (2) Update old ins and outs\n    if (oldProperty && oldInOurOut) {\n\n      if (!propertyChanged(oldInOurOut, oldProperty)) {\n        if (newBindingType === 'camunda:in') {\n          if (newBinding.expression) {\n            properties[ 'camunda:sourceExpression' ] = newPropertyValue;\n          } else {\n            properties[ 'camunda:source' ] = newPropertyValue;\n          }\n        } else if (newBindingType === 'camunda:in:businessKey') {\n          properties[ 'camunda:businessKey' ] = newPropertyValue;\n        } else if (newBindingType === 'camunda:out') {\n          properties[ 'camunda:target' ] = newPropertyValue;\n        }\n      }\n\n      // Update `camunda:local` property if it changed\n      if ((oldBinding.local && !newBinding.local) || !oldBinding.local && newBinding.local) {\n        properties.local = newBinding.local;\n      }\n\n      if (keys(properties)) {\n        commandStack.execute('properties-panel.update-businessobject', {\n          element: element,\n          businessObject: oldInOurOut,\n          properties: properties\n        });\n      }\n\n      remove(oldInsAndOuts, oldInOurOut);\n    }\n\n    // (3) Add new ins and outs\n    else {\n      if (newBindingType === 'camunda:in') {\n        newInOrOut = createCamundaIn(newBinding, newPropertyValue, bpmnFactory);\n      } else if (newBindingType === 'camunda:out') {\n        newInOrOut = createCamundaOut(newBinding, newPropertyValue, bpmnFactory);\n      } else if (newBindingType === 'camunda:in:businessKey') {\n        newInOrOut = createCamundaInWithBusinessKey(newBinding, newPropertyValue, bpmnFactory);\n      }\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: businessObject,\n        propertyName: 'values',\n        objectsToAdd: [ newInOrOut ],\n        objectsToRemove: []\n      });\n    }\n  });\n\n  // (4) Remove old ins and outs\n  if (oldInsAndOuts.length) {\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: businessObject,\n      propertyName: 'values',\n      objectsToAdd: [],\n      objectsToRemove: oldInsAndOuts\n    });\n  }\n};\n\n/**\n * Update `camunda:InputParameter` and `camunda:OutputParameter` properties of specified business\n * object. Both can only exist in `camunda:InputOutput` which can exist in `bpmn:ExtensionElements`\n * or `camunda:Connector`.\n *\n * @param {djs.model.Base} element\n * @param {Object} oldTemplate\n * @param {Object} newTemplate\n */\nChangeElementTemplateHandler.prototype._updateCamundaInputOutputParameterProperties = function(element, oldTemplate, newTemplate, businessObject) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack;\n\n  var newProperties = newTemplate.properties.filter(function(newProperty) {\n    var newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    return newBindingType === 'camunda:inputParameter' || newBindingType === 'camunda:outputParameter';\n  });\n\n  // (1) Do not override old inputs and outputs if no new inputs and outputs specified\n  if (!newProperties.length) {\n    return;\n  }\n\n  if (!businessObject) {\n    businessObject = this._getOrCreateExtensionElements(element);\n  }\n\n  var inputOutput;\n\n  if (is(businessObject, 'camunda:Connector')) {\n    inputOutput = businessObject.get('camunda:inputOutput');\n\n    if (!inputOutput) {\n      inputOutput = bpmnFactory.create('camunda:InputOutput');\n\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: businessObject,\n        properties: {\n          inputOutput: inputOutput\n        }\n      });\n    }\n  } else {\n    inputOutput = findExtension(businessObject, 'camunda:InputOutput');\n\n    if (!inputOutput) {\n      inputOutput = bpmnFactory.create('camunda:InputOutput');\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: businessObject,\n        propertyName: 'values',\n        objectsToAdd: [ inputOutput ],\n        objectsToRemove: []\n      });\n    }\n  }\n\n  var oldInputs = inputOutput.get('camunda:inputParameters')\n    ? inputOutput.get('camunda:inputParameters').slice()\n    : [];\n\n  var oldOutputs = inputOutput.get('camunda:outputParameters')\n    ? inputOutput.get('camunda:outputParameters').slice()\n    : [];\n\n  var propertyName;\n\n  newProperties.forEach(function(newProperty) {\n    var oldProperty = findOldProperty(oldTemplate, newProperty),\n        oldInputOrOutput = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n        newPropertyValue = newProperty.value,\n        newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    var newInputOrOutput,\n        properties;\n\n    // (2) Update old inputs and outputs\n    if (oldProperty && oldInputOrOutput) {\n\n      if (!propertyChanged(oldInputOrOutput, oldProperty)) {\n        if (is(oldInputOrOutput, 'camunda:InputParameter')) {\n          properties = {\n            value: newPropertyValue\n          };\n        } else {\n          properties = {\n            name: newPropertyValue\n          };\n        }\n\n        commandStack.execute('properties-panel.update-businessobject', {\n          element: element,\n          businessObject: oldInputOrOutput,\n          properties: properties\n        });\n      }\n\n      if (is(oldInputOrOutput, 'camunda:InputParameter')) {\n        remove(oldInputs, oldInputOrOutput);\n      } else {\n        remove(oldOutputs, oldInputOrOutput);\n      }\n    }\n\n    // (3) Add new inputs and outputs\n    else {\n      if (newBindingType === 'camunda:inputParameter') {\n        propertyName = 'inputParameters';\n\n        newInputOrOutput = createInputParameter(newBinding, newPropertyValue, bpmnFactory);\n      } else {\n        propertyName = 'outputParameters';\n\n        newInputOrOutput = createOutputParameter(newBinding, newPropertyValue, bpmnFactory);\n      }\n\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: inputOutput,\n        propertyName: propertyName,\n        objectsToAdd: [ newInputOrOutput ],\n        objectsToRemove: []\n      });\n    }\n  });\n\n  // (4) Remove old inputs and outputs\n  if (oldInputs.length) {\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: inputOutput,\n      propertyName: 'inputParameters',\n      objectsToAdd: [],\n      objectsToRemove: oldInputs\n    });\n  }\n\n  if (oldOutputs.length) {\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: inputOutput,\n      propertyName: 'outputParameters',\n      objectsToAdd: [],\n      objectsToRemove: oldOutputs\n    });\n  }\n};\n\nChangeElementTemplateHandler.prototype._updateCamundaModelerTemplate = function(element, newTemplate) {\n  var modeling = this._modeling;\n\n  modeling.updateProperties(element, {\n    'camunda:modelerTemplate': newTemplate && newTemplate.id,\n    'camunda:modelerTemplateVersion': newTemplate && newTemplate.version\n  });\n};\n\n/**\n * Update `camunda:Property` properties of specified business object. `camunda:Property` can only\n * exist in `camunda:Properties`.\n *\n * @param {djs.model.Base} element\n * @param {Object} oldTemplate\n * @param {Object} newTemplate\n * @param {ModdleElement} businessObject\n */\nChangeElementTemplateHandler.prototype._updateCamundaPropertyProperties = function(element, oldTemplate, newTemplate, businessObject) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack;\n\n  var newProperties = newTemplate.properties.filter(function(newProperty) {\n    var newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    return newBindingType === 'camunda:property';\n  });\n\n  // (1) Do not override old properties if no new properties specified\n  if (!newProperties.length) {\n    return;\n  }\n\n  if (businessObject) {\n    businessObject = this._getOrCreateExtensionElements(businessObject);\n  } else {\n    businessObject = this._getOrCreateExtensionElements(element);\n  }\n\n  var camundaProperties = findExtension(businessObject, 'camunda:Properties');\n\n  if (!camundaProperties) {\n    camundaProperties = bpmnFactory.create('camunda:Properties');\n\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: businessObject,\n      propertyName: 'values',\n      objectsToAdd: [ camundaProperties ],\n      objectsToRemove: []\n    });\n  }\n\n  var oldCamundaProperties = camundaProperties.get('camunda:values')\n    ? camundaProperties.get('camunda:values').slice()\n    : [];\n\n  newProperties.forEach(function(newProperty) {\n    var oldProperty = findOldProperty(oldTemplate, newProperty),\n        oldCamundaProperty = oldProperty && findOldBusinessObject(businessObject, oldProperty),\n        newPropertyValue = newProperty.value,\n        newBinding = newProperty.binding;\n\n    // (2) Update old properties\n    if (oldProperty && oldCamundaProperty) {\n\n      if (!propertyChanged(oldCamundaProperty, oldProperty)) {\n        commandStack.execute('properties-panel.update-businessobject', {\n          element: element,\n          businessObject: oldCamundaProperty,\n          properties: {\n            value: newPropertyValue\n          }\n        });\n      }\n\n      remove(oldCamundaProperties, oldCamundaProperty);\n    }\n\n    // (3) Add new properties\n    else {\n      commandStack.execute('properties-panel.update-businessobject-list', {\n        element: element,\n        currentObject: camundaProperties,\n        propertyName: 'values',\n        objectsToAdd: [ createCamundaProperty(newBinding, newPropertyValue, bpmnFactory) ],\n        objectsToRemove: []\n      });\n    }\n  });\n\n  // (4) Remove old properties\n  if (oldCamundaProperties.length) {\n    commandStack.execute('properties-panel.update-businessobject-list', {\n      element: element,\n      currentObject: camundaProperties,\n      propertyName: 'values',\n      objectsToAdd: [],\n      objectsToRemove: oldCamundaProperties\n    });\n  }\n};\n\n/**\n * Update `bpmn:conditionExpression` property of specified element. Since condition expression is\n * is not primitive it needs special handling.\n *\n * @param {djs.model.Base} element\n * @param {Object} oldProperty\n * @param {Object} newProperty\n */\nChangeElementTemplateHandler.prototype._updateConditionExpression = function(element, oldProperty, newProperty) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack,\n      modeling = this._modeling;\n\n  var newBinding = newProperty.binding,\n      newPropertyValue = newProperty.value;\n\n  if (!oldProperty) {\n    modeling.updateProperties(element, {\n      conditionExpression: bpmnFactory.create('bpmn:FormalExpression', {\n        body: newPropertyValue,\n        language: newBinding.scriptFormat\n      })\n    });\n\n    return;\n  }\n\n  var oldBinding = oldProperty.binding,\n      oldPropertyValue = oldProperty.value;\n\n  var businessObject = getBusinessObject(element),\n      conditionExpression = businessObject.get('bpmn:conditionExpression');\n\n  var properties = {};\n\n  if (conditionExpression.get('body') === oldPropertyValue) {\n    properties.body = newPropertyValue;\n  }\n\n  if (conditionExpression.get('language') === oldBinding.scriptFormat) {\n    properties.language = newBinding.scriptFormat;\n  }\n\n  if (!keys(properties).length) {\n    return;\n  }\n\n  commandStack.execute('properties-panel.update-businessobject', {\n    element: element,\n    businessObject: conditionExpression,\n    properties: properties\n  });\n};\n\nChangeElementTemplateHandler.prototype._updateProperties = function(element, oldTemplate, newTemplate, businessObject) {\n  var self = this;\n\n  var commandStack = this._commandStack;\n\n  var newProperties = newTemplate.properties.filter(function(newProperty) {\n    var newBinding = newProperty.binding,\n        newBindingType = newBinding.type;\n\n    return newBindingType === 'property';\n  });\n\n  if (!newProperties.length) {\n    return;\n  }\n\n  if (!businessObject) {\n    businessObject = getBusinessObject(element);\n  }\n\n  newProperties.forEach(function(newProperty) {\n    var oldProperty = findOldProperty(oldTemplate, newProperty),\n        newBinding = newProperty.binding,\n        newBindingName = newBinding.name,\n        newPropertyValue = newProperty.value,\n        properties;\n\n    if (newBindingName === 'conditionExpression') {\n      self._updateConditionExpression(element, oldProperty, newProperty);\n    } else {\n      if (oldProperty && propertyChanged(element, oldProperty)) {\n        return;\n      }\n\n      properties = {};\n\n      properties[ newBindingName ] = newPropertyValue;\n\n      // Only one of `camunda:class`, `camunda:delegateExpression` and `camunda:expression` can be\n      // set\n      // TODO(philippfromme): ensuring only one of these properties is set at a time should be\n      // implemented in a behavior and not in this handler and properties panel UI\n      if (CAMUNDA_SERVICE_TASK_LIKE.indexOf(newBindingName) !== -1) {\n        CAMUNDA_SERVICE_TASK_LIKE.forEach(function(camundaServiceTaskLikeProperty) {\n          if (camundaServiceTaskLikeProperty !== newBindingName) {\n            properties[ camundaServiceTaskLikeProperty ] = undefined;\n          }\n        });\n      }\n\n      commandStack.execute('properties-panel.update-businessobject', {\n        element: element,\n        businessObject: businessObject,\n        properties: properties\n      });\n    }\n  });\n};\n\n/**\n * Update properties for a specified scope.\n *\n * @param {djs.model.Base} element\n * @param {string} scopeName\n * @param {Object} scopeTemplate\n */\nChangeElementTemplateHandler.prototype._updateScopeProperties = function(element, scopeName, oldTemplate, newScopeTemplate) {\n  var bpmnFactory = this._bpmnFactory,\n      commandStack = this._commandStack;\n\n  var scopeElement = findOldScopeElement(element, scopeName);\n\n  if (!scopeElement) {\n    scopeElement = bpmnFactory.create(scopeName);\n  }\n\n  var oldScopeTemplate = findOldScopeTemplate(scopeName, oldTemplate);\n\n  // Update properties\n  this._updateProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n  // Update camunda:ExecutionListener properties\n  this._updateCamundaExecutionListenerProperties(element, newScopeTemplate);\n\n  // Update camunda:In and camunda:Out properties\n  this._updateCamundaInOutProperties(element, oldScopeTemplate, newScopeTemplate);\n\n  // Update camunda:InputParameter and camunda:OutputParameter properties\n  this._updateCamundaInputOutputParameterProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n  // Update camunda:Field properties\n  this._updateCamundaFieldProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n  // Update camunda:Property properties\n  this._updateCamundaPropertyProperties(element, oldScopeTemplate, newScopeTemplate, scopeElement);\n\n  var extensionElements = this._getOrCreateExtensionElements(element);\n\n  commandStack.execute('properties-panel.update-businessobject-list', {\n    element: element,\n    currentObject: extensionElements,\n    propertyName: 'values',\n    objectsToAdd: [ scopeElement ],\n    objectsToRemove: []\n  });\n};\n\n// helpers //////////\n\n/**\n * Find old business object matching specified old property.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} oldProperty\n *\n * @returns {ModdleElement}\n */\nfunction findOldBusinessObject(element, oldProperty) {\n  var businessObject = getBusinessObject(element),\n      propertyName;\n\n  var oldBinding = oldProperty.binding,\n      oldBindingType = oldBinding.type;\n\n  if (oldBindingType === 'camunda:field') {\n\n    if (isAny(businessObject, [ 'camunda:ExecutionListener', 'camunda:TaskListener' ])) {\n      propertyName = 'camunda:fields';\n    } else {\n      propertyName = 'bpmn:values';\n    }\n\n    if (!businessObject || !businessObject.get(propertyName) || !businessObject.get(propertyName).length) {\n      return;\n    }\n\n    return find(businessObject.get(propertyName), function(oldBusinessObject) {\n      return oldBusinessObject.get('camunda:name') === oldBinding.name;\n    });\n  }\n\n  if (oldBindingType === 'camunda:in') {\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return oldBusinessObject.get('target') === oldBinding.target;\n    });\n  }\n\n  if (oldBindingType === 'camunda:in:businessKey') {\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return isString(oldBusinessObject.get('businessKey'));\n    });\n  }\n\n  if (oldBindingType === 'camunda:out') {\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return oldBusinessObject.get('source') === oldBinding.source ||\n        oldBusinessObject.get('sourceExpression') || oldBinding.sourceExpression;\n    });\n  }\n\n  if (oldBindingType === 'camunda:inputParameter' || oldBindingType === 'camunda:outputParameter') {\n\n    if (is(businessObject, 'camunda:Connector')) {\n      businessObject = businessObject.get('camunda:inputOutput');\n\n      if (!businessObject) {\n        return;\n      }\n    } else {\n      businessObject = findExtension(businessObject, 'camunda:InputOutput');\n\n      if (!businessObject) {\n        return;\n      }\n    }\n\n    if (oldBindingType === 'camunda:inputParameter') {\n      return find(businessObject.get('camunda:inputParameters'), function(oldBusinessObject) {\n        return oldBusinessObject.get('camunda:name') === oldBinding.name;\n      });\n    } else {\n      return find(businessObject.get('camunda:outputParameters'), function(oldBusinessObject) {\n        var definition;\n\n        if (oldBinding.scriptFormat) {\n          definition = oldBusinessObject.get('camunda:definition');\n\n          return definition && definition.get('camunda:value') === oldBinding.source;\n        } else {\n          return oldBusinessObject.get('camunda:value') === oldBinding.source;\n        }\n      });\n    }\n\n  }\n\n  if (oldBindingType === 'camunda:property') {\n    if (!businessObject || !businessObject.get('values') || !businessObject.get('values').length) {\n      return;\n    }\n\n    businessObject = findExtension(businessObject, 'camunda:Properties');\n\n    if (!businessObject) {\n      return;\n    }\n\n    return find(businessObject.get('values'), function(oldBusinessObject) {\n      return oldBusinessObject.get('camunda:name') === oldBinding.name;\n    });\n  }\n}\n\n/**\n * Find old property matching specified new property.\n *\n * @param {Object} oldTemplate\n * @param {Object} newProperty\n *\n * @returns {Object}\n */\nfunction findOldProperty(oldTemplate, newProperty) {\n  if (!oldTemplate) {\n    return;\n  }\n\n  var oldProperties = oldTemplate.properties,\n      newBinding = newProperty.binding,\n      newBindingName = newBinding.name,\n      newBindingType = newBinding.type;\n\n  if (newBindingType === 'property') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingName = oldBinding.name,\n          oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'property' && oldBindingName === newBindingName;\n    });\n  }\n\n  if (newBindingType === 'camunda:field') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingName = oldBinding.name,\n          oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:field' && oldBindingName === newBindingName;\n    });\n  }\n\n  if (newBindingType === 'camunda:in') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'camunda:in') {\n        return;\n      }\n\n      // Always override if change from source to source expression or vice versa\n      if ((oldBinding.expression && !newBinding.expression) ||\n        !oldBinding.expression && newBinding.expression) {\n        return;\n      }\n\n      return oldBinding.target === newBinding.target;\n    });\n  }\n\n  if (newBindingType === 'camunda:in:businessKey') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:in:businessKey';\n    });\n  }\n\n  if (newBindingType === 'camunda:out') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:out' && (\n        oldBinding.source === newBinding.source ||\n        oldBinding.sourceExpression === newBinding.sourceExpression\n      );\n    });\n  }\n\n  if (newBindingType === 'camunda:inputParameter') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingName = oldBinding.name,\n          oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'camunda:inputParameter') {\n        return;\n      }\n\n      return oldBindingName === newBindingName\n        && oldBinding.scriptFormat === newBinding.scriptFormat;\n    });\n  }\n\n  if (newBindingType === 'camunda:outputParameter') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingType = oldBinding.type;\n\n      if (oldBindingType !== 'camunda:outputParameter') {\n        return;\n      }\n\n      return oldBinding.source === newBinding.source\n        && oldBinding.scriptFormat === newBinding.scriptFormat;\n    });\n  }\n\n  if (newBindingType === 'camunda:property') {\n    return find(oldProperties, function(oldProperty) {\n      var oldBinding = oldProperty.binding,\n          oldBindingName = oldBinding.name,\n          oldBindingType = oldBinding.type;\n\n      return oldBindingType === 'camunda:property' && oldBindingName === newBindingName;\n    });\n  }\n}\n\nfunction findOldScopeElement(element, scopeName) {\n  if (scopeName === 'camunda:Connector') {\n    return findExtension(element, 'camunda:Connector');\n  }\n}\n\nfunction findOldScopeTemplate(scopeName, oldTemplate) {\n  var scopes = oldTemplate && oldTemplate.scopes;\n\n  return scopes && scopes[ scopeName ];\n}\n\n/**\n * Check whether property was changed after being set by template.\n *\n * @param {djs.model.Base|ModdleElement} element\n * @param {Object} oldProperty\n *\n * @returns {boolean}\n */\nfunction propertyChanged(element, oldProperty) {\n  var businessObject = getBusinessObject(element);\n\n  var oldBinding = oldProperty.binding,\n      oldBindingName = oldBinding.name,\n      oldBindingType = oldBinding.type,\n      oldPropertyValue = oldProperty.value,\n      conditionExpression,\n      definition;\n\n  if (oldBindingType === 'property') {\n    if (oldBindingName === 'conditionExpression') {\n      conditionExpression = businessObject.get('bpmn:conditionExpression');\n\n      return conditionExpression.get('bpmn:body') !== oldPropertyValue;\n    }\n\n    return businessObject.get(oldBindingName) !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:field') {\n    return businessObject.get('camunda:string') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:in') {\n    if (oldBinding.expression) {\n      return businessObject.get('sourceExpression') !== oldPropertyValue;\n    } else {\n      return businessObject.get('camunda:source') !== oldPropertyValue;\n    }\n  }\n\n  if (oldBindingType === 'camunda:in:businessKey') {\n    return businessObject.get('camunda:businessKey') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:out') {\n    return businessObject.get('camunda:target') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:inputParameter') {\n    if (oldBinding.scriptFormat) {\n      definition = businessObject.get('camunda:definition');\n\n      return definition && definition.get('camunda:value') !== oldPropertyValue;\n    } else {\n      return businessObject.get('camunda:value') !== oldPropertyValue;\n    }\n  }\n\n  if (oldBindingType === 'camunda:outputParameter') {\n    return businessObject.get('camunda:name') !== oldPropertyValue;\n  }\n\n  if (oldBindingType === 'camunda:property') {\n    return businessObject.get('camunda:value') !== oldPropertyValue;\n  }\n}","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar multiInstanceLoopCharacteristics = require('./implementation/MultiInstanceLoopCharacteristics');\n\nvar jobRetryTimeCycle = require('./implementation/JobRetryTimeCycle'),\n    asyncContinuation = require('./implementation/AsyncContinuation');\n\n\nfunction getLoopCharacteristics(element) {\n  var bo = getBusinessObject(element);\n  return bo.loopCharacteristics;\n}\n\n\nfunction ensureMultiInstanceSupported(element) {\n  var loopCharacteristics = getLoopCharacteristics(element);\n  return !!loopCharacteristics && is(loopCharacteristics, 'camunda:Collectable');\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!ensureMultiInstanceSupported(element)) {\n    return;\n  }\n\n  // multi instance properties\n  group.entries = group.entries.concat(multiInstanceLoopCharacteristics(element, bpmnFactory, translate));\n\n  // async continuation ///////////////////////////////////////////////////////\n  group.entries = group.entries.concat(asyncContinuation(element, bpmnFactory, {\n    getBusinessObject: getLoopCharacteristics,\n    idPrefix: 'multiInstance-',\n    labelPrefix: translate('Multi Instance ')\n  }, translate));\n\n\n  // retry time cycle //////////////////////////////////////////////////////////\n  group.entries = group.entries.concat(jobRetryTimeCycle(element, bpmnFactory, {\n    getBusinessObject: getLoopCharacteristics,\n    idPrefix: 'multiInstance-',\n    labelPrefix: translate('Multi Instance ')\n  }, translate));\n};\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","'use strict';\n\nvar domify = require('min-dom').domify;\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar textBox = function(translate, options, defaultParameters) {\n\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      canBeShown = !!options.show && typeof options.show === 'function',\n      description = options.description;\n\n  resource.html =\n    domify('<label for=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n    (canBeShown ? 'data-show=\"isShown\"' : '') +\n    '>' + label + '</label>' +\n    '<div class=\"bpp-field-wrapper\" ' +\n    (canBeShown ? 'data-show=\"isShown\"' : '') +\n    '>' +\n      '<div contenteditable=\"true\" id=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n            'name=\"' + escapeHTML(options.modelProperty) + '\" />' +\n    '</div>');\n\n  // add description below text box entry field\n  if (description) {\n    resource.html.appendChild(entryFieldDescription(translate, description, { show: canBeShown && 'isShown' }));\n  }\n\n  if (canBeShown) {\n    resource.isShown = function() {\n      return options.show.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-textbox'];\n\n  return resource;\n};\n\nmodule.exports = textBox;\n","var getWrapDetails = require('./_getWrapDetails'),\n    insertWrapDetails = require('./_insertWrapDetails'),\n    setToString = require('./_setToString'),\n    updateWrapDetails = require('./_updateWrapDetails');\n\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\nfunction setWrapToString(wrapper, reference, bitmask) {\n  var source = (reference + '');\n  return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n}\n\nmodule.exports = setWrapToString;\n","'use strict';\n\nvar map = require('lodash/map');\n\nvar extensionElementsHelper = require('./ExtensionElementsHelper');\n\n/**\n * Returns true if the attribute 'camunda:asyncBefore' is set\n * to true.\n *\n * @param  {ModdleElement} bo\n *\n * @return {boolean} a boolean value\n */\nfunction isAsyncBefore(bo) {\n  return !!(bo.get('camunda:asyncBefore') || bo.get('camunda:async'));\n}\n\nmodule.exports.isAsyncBefore = isAsyncBefore;\n\n/**\n * Returns true if the attribute 'camunda:asyncAfter' is set\n * to true.\n *\n * @param  {ModdleElement} bo\n *\n * @return {boolean} a boolean value\n */\nfunction isAsyncAfter(bo) {\n  return !!bo.get('camunda:asyncAfter');\n}\n\nmodule.exports.isAsyncAfter = isAsyncAfter;\n\n/**\n * Returns true if the attribute 'camunda:exclusive' is set\n * to true.\n *\n * @param  {ModdleElement} bo\n *\n * @return {boolean} a boolean value\n */\nfunction isExclusive(bo) {\n  return !!bo.get('camunda:exclusive');\n}\n\nmodule.exports.isExclusive = isExclusive;\n\n/**\n * Get first 'camunda:FailedJobRetryTimeCycle' from the business object.\n *\n * @param  {ModdleElement} bo\n *\n * @return {Array<ModdleElement>} a list of 'camunda:FailedJobRetryTimeCycle'\n */\nfunction getFailedJobRetryTimeCycle(bo) {\n  return (extensionElementsHelper.getExtensionElements(bo, 'camunda:FailedJobRetryTimeCycle') || [])[0];\n}\n\nmodule.exports.getFailedJobRetryTimeCycle = getFailedJobRetryTimeCycle;\n\n/**\n * Removes all existing 'camunda:FailedJobRetryTimeCycle' from the business object\n *\n * @param  {ModdleElement} bo\n *\n * @return {Array<ModdleElement>} a list of 'camunda:FailedJobRetryTimeCycle'\n */\nfunction removeFailedJobRetryTimeCycle(bo, element) {\n  var retryTimeCycles = extensionElementsHelper.getExtensionElements(bo, 'camunda:FailedJobRetryTimeCycle');\n  return map(retryTimeCycles, function(cycle) {\n    return extensionElementsHelper.removeEntry(bo, element, cycle);\n  });\n}\n\nmodule.exports.removeFailedJobRetryTimeCycle = removeFailedJobRetryTimeCycle;","var arrayEach = require('./_arrayEach'),\n    baseCreate = require('./_baseCreate'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee'),\n    getPrototype = require('./_getPrototype'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray');\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = transform;\n","'use strict';\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, signalEventDefinition, translate) {\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, signalEventDefinition, bpmnFactory, {\n    label: translate('Signal'),\n    elementName: 'signal',\n    elementType: 'bpmn:Signal',\n    referenceProperty: 'signalRef',\n    newElementIdPrefix: 'Signal_'\n  }));\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, signalEventDefinition, bpmnFactory, translate, {\n      id: 'signal-element-name',\n      label: translate('Signal Name'),\n      referenceProperty: 'signalRef',\n      modelProperty: 'name',\n      shouldValidate: true\n    })\n  );\n\n};\n","'use strict';\n\nvar forEach = require('lodash/forEach');\n\n/**\n * A handler that implements a BPMN 2.0 property update\n * for business object lists which are not represented in the\n * diagram.\n *\n * This is useful in the context of the properties panel in\n * order to update child elements of elements visible in\n * the diagram.\n *\n * Example: perform an update of a specific event definition\n * of an intermediate event.\n *\n * @class\n * @constructor\n */\nfunction UpdateBusinessObjectListHandler(elementRegistry, bpmnFactory) {\n  this._elementRegistry = elementRegistry;\n  this._bpmnFactory = bpmnFactory;\n}\n\nUpdateBusinessObjectListHandler.$inject = [ 'elementRegistry', 'bpmnFactory' ];\n\nmodule.exports = UpdateBusinessObjectListHandler;\n\nfunction ensureNotNull(prop, name) {\n  if (!prop) {\n    throw new Error(name + 'required');\n  }\n  return prop;\n}\n\n// api /////////////////////////////////////////////\n\n/**\n * Updates a element under a provided parent.\n */\nUpdateBusinessObjectListHandler.prototype.execute = function(context) {\n\n  var currentObject = ensureNotNull(context.currentObject, 'currentObject'),\n      propertyName = ensureNotNull(context.propertyName, 'propertyName'),\n      updatedObjectList = context.updatedObjectList,\n      objectsToRemove = context.objectsToRemove || [],\n      objectsToAdd = context.objectsToAdd || [],\n      objectsToPrepend = context.objectsToPrepend || [],\n      changed = [ context.element], // this will not change any diagram-js elements\n      referencePropertyName;\n\n  if (context.referencePropertyName) {\n    referencePropertyName = context.referencePropertyName;\n  }\n\n  var objectList = currentObject[propertyName];\n\n  // adjust array reference in the parent business object\n  context.previousList = currentObject[propertyName];\n\n  if (updatedObjectList) {\n    currentObject[propertyName] = updatedObjectList;\n  } else {\n\n    // start with objects to prepend\n    var listCopy = objectsToPrepend.slice();\n\n    // remove all objects which should be removed\n    forEach(objectList, function(object) {\n      if (objectsToRemove.indexOf(object) == -1) {\n        listCopy.push(object);\n      }\n    });\n\n    // add all objects which should be added\n    listCopy = listCopy.concat(objectsToAdd);\n\n    // set property to new list\n    if (listCopy.length > 0 || !referencePropertyName) {\n\n      // as long as there are elements in the list update the list\n      currentObject[propertyName] = listCopy;\n    } else if (referencePropertyName) {\n\n      // remove the list when it is empty\n      var parentObject = currentObject.$parent;\n      parentObject.set(referencePropertyName, undefined);\n    }\n  }\n\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  CreateBusinessObjectListHandler#revert\n *\n * @param {Object} context\n *\n * @return {djs.mode.Base} the updated element\n */\nUpdateBusinessObjectListHandler.prototype.revert = function(context) {\n\n  var currentObject = context.currentObject,\n      propertyName = context.propertyName,\n      previousList = context.previousList,\n      parentObject = currentObject.$parent;\n\n  if (context.referencePropertyName) {\n    parentObject.set(context.referencePropertyName, currentObject);\n  }\n\n  // remove new element\n  currentObject.set(propertyName, previousList);\n\n  return context.changed;\n};\n","'use strict';\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    is = ModelUtil.is,\n    getBusinessObject = ModelUtil.getBusinessObject;\n\nvar extensionElementsHelper = require('./ExtensionElementsHelper'),\n    implementationTypeHelper = require('./ImplementationTypeHelper');\n\nvar InputOutputHelper = {};\n\nmodule.exports = InputOutputHelper;\n\nfunction getElements(bo, type, prop) {\n  var elems = extensionElementsHelper.getExtensionElements(bo, type) || [];\n  return !prop ? elems : (elems[0] || {})[prop] || [];\n}\n\nfunction getParameters(element, prop, insideConnector) {\n  var inputOutput = InputOutputHelper.getInputOutput(element, insideConnector);\n  return (inputOutput && inputOutput.get(prop)) || [];\n}\n\n/**\n * Get a inputOutput from the business object\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {ModdleElement} the inputOutput object\n */\nInputOutputHelper.getInputOutput = function(element, insideConnector) {\n  if (!insideConnector) {\n    var bo = getBusinessObject(element);\n    return (getElements(bo, 'camunda:InputOutput') || [])[0];\n  }\n  var connector = this.getConnector(element);\n  return connector && connector.get('inputOutput');\n};\n\n/**\n * Get a connector from the business object\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement} the connector object\n */\nInputOutputHelper.getConnector = function(element) {\n  var bo = implementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n  return bo && (getElements(bo, 'camunda:Connector') || [])[0];\n};\n\n/**\n * Return all input parameters existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {Array} a list of input parameter objects\n */\nInputOutputHelper.getInputParameters = function(element, insideConnector) {\n  return getParameters.apply(this, [ element, 'inputParameters', insideConnector ]);\n};\n\n/**\n * Return all output parameters existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {Array} a list of output parameter objects\n */\nInputOutputHelper.getOutputParameters = function(element, insideConnector) {\n  return getParameters.apply(this, [ element, 'outputParameters', insideConnector ]);\n};\n\n/**\n * Get a input parameter from the business object at given index\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n * @param {number} idx\n *\n * @return {ModdleElement} input parameter\n */\nInputOutputHelper.getInputParameter = function(element, insideConnector, idx) {\n  return this.getInputParameters(element, insideConnector)[idx];\n};\n\n/**\n * Get a output parameter from the business object at given index\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n * @param {number} idx\n *\n * @return {ModdleElement} output parameter\n */\nInputOutputHelper.getOutputParameter = function(element, insideConnector, idx) {\n  return this.getOutputParameters(element, insideConnector)[idx];\n};\n\n/**\n * Returns 'true' if the given element supports inputOutput\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {boolean} a boolean value\n */\nInputOutputHelper.isInputOutputSupported = function(element, insideConnector) {\n\n  if (insideConnector) {\n    return true;\n  }\n\n  var bo = getBusinessObject(element);\n\n  return (\n    is(bo, 'bpmn:FlowNode') && !(\n      is(bo, 'bpmn:StartEvent') ||\n      is(bo, 'bpmn:Gateway') ||\n      is(bo, 'bpmn:BoundaryEvent') ||\n      (\n        is(bo, 'bpmn:SubProcess') && bo.get('triggeredByEvent')\n      )\n    )\n  );\n};\n\n/**\n * Returns 'true' if the given element supports output parameters\n *\n * @param {djs.model.Base} element\n * @param  {boolean} insideConnector\n *\n * @return {boolean} a boolean value\n */\nInputOutputHelper.areOutputParametersSupported = function(element, insideConnector) {\n  var bo = getBusinessObject(element);\n  return insideConnector || (!is(bo, 'bpmn:EndEvent') && !bo.loopCharacteristics);\n};\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementReferenceProperty = require('../../../bpmn/parts/implementation/ElementReferenceProperty');\n\nmodule.exports = function(\n    group, element, bpmnFactory, errorEventDefinition,\n    showErrorCodeVariable, showErrorMessageVariable, translate\n) {\n\n\n  var getValue = function(modelProperty) {\n    return function(element) {\n      var modelPropertyValue = errorEventDefinition.get('camunda:' + modelProperty);\n      var value = {};\n\n      value[modelProperty] = modelPropertyValue;\n      return value;\n    };\n  };\n\n  var setValue = function(modelProperty) {\n    return function(element, values) {\n      var props = {};\n\n      props['camunda:' + modelProperty] = values[modelProperty] || undefined;\n\n      return cmdHelper.updateBusinessObject(element, errorEventDefinition, props);\n    };\n  };\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, errorEventDefinition, bpmnFactory, translate, {\n      id: 'error-element-message',\n      label: translate('Error Message'),\n      referenceProperty: 'errorRef',\n      modelProperty: 'errorMessage'\n    })\n  );\n\n  if (showErrorCodeVariable) {\n    group.entries.push(entryFactory.textField(translate, {\n      id: 'errorCodeVariable',\n      label: translate('Error Code Variable'),\n      modelProperty : 'errorCodeVariable',\n\n      get: getValue('errorCodeVariable'),\n      set: setValue('errorCodeVariable')\n    }));\n  }\n\n  if (showErrorMessageVariable) {\n    group.entries.push(entryFactory.textField(translate, {\n      id: 'errorMessageVariable',\n      label: translate('Error Message Variable'),\n      modelProperty: 'errorMessageVariable',\n\n      get: getValue('errorMessageVariable'),\n      set: setValue('errorMessageVariable')\n    }));\n  }\n\n};\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar cmdHelper = require('../helper/CmdHelper');\n\nvar domQuery = require('min-dom').query,\n    domAttr = require('min-dom').attr,\n    domClosest = require('min-dom').closest;\n\nvar filter = require('lodash/filter'),\n    forEach = require('lodash/forEach'),\n    keys = require('lodash/keys');\n\nvar domify = require('min-dom').domify;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\nvar updateSelection = require('selection-update');\n\nvar TABLE_ROW_DIV_SNIPPET = '<div class=\"bpp-field-wrapper bpp-table-row\">';\nvar DELETE_ROW_BUTTON_SNIPPET = '<button class=\"action-button clear\" data-action=\"deleteElement\">' +\n                                  '<span>X</span>' +\n                                '</button>';\n\nfunction createInputRowTemplate(properties, canRemove) {\n  var template = TABLE_ROW_DIV_SNIPPET;\n  template += createInputTemplate(properties, canRemove);\n  template += canRemove ? DELETE_ROW_BUTTON_SNIPPET : '';\n  template += '</div>';\n\n  return template;\n}\n\nfunction createInputTemplate(properties, canRemove) {\n  var columns = properties.length;\n  var template = '';\n  forEach(properties, function(prop) {\n    template += '<input class=\"bpp-table-row-columns-' + columns + ' ' +\n                               (canRemove ? 'bpp-table-row-removable' : '') + '\" ' +\n                       'id=\"camunda-table-row-cell-input-value\" ' +\n                       'type=\"text\" ' +\n                       'name=\"' + escapeHTML(prop) + '\" />';\n  });\n  return template;\n}\n\nfunction createLabelRowTemplate(labels) {\n  var template = TABLE_ROW_DIV_SNIPPET;\n  template += createLabelTemplate(labels);\n  template += '</div>';\n\n  return template;\n}\n\nfunction createLabelTemplate(labels) {\n  var columns = labels.length;\n  var template = '';\n  forEach(labels, function(label) {\n    template += '<label class=\"bpp-table-row-columns-' + columns + '\">' + escapeHTML(label) + '</label>';\n  });\n  return template;\n}\n\nfunction pick(elements, properties) {\n  return (elements || []).map(function(elem) {\n    var newElement = {};\n    forEach(properties, function(prop) {\n      newElement[prop] = elem[prop] || '';\n    });\n    return newElement;\n  });\n}\n\nfunction diff(element, node, values, oldValues, editable) {\n  return filter(values, function(value, idx) {\n    return !valueEqual(element, node, value, oldValues[idx], editable, idx);\n  });\n}\n\nfunction valueEqual(element, node, value, oldValue, editable, idx) {\n  if (value && !oldValue) {\n    return false;\n  }\n  var allKeys = keys(value).concat(keys(oldValue));\n\n  return allKeys.every(function(key) {\n    var n = value[key] || undefined;\n    var o = oldValue[key] || undefined;\n    return !editable(element, node, key, idx) || n === o;\n  });\n}\n\nfunction getEntryNode(node) {\n  return domClosest(node, '[data-entry]', true);\n}\n\nfunction getContainer(node) {\n  return domQuery('div[data-list-entry-container]', node);\n}\n\nfunction getSelection(node) {\n  return {\n    start: node.selectionStart,\n    end: node.selectionEnd\n  };\n}\n\nfunction setSelection(node, selection) {\n  node.selectionStart = selection.start;\n  node.selectionEnd = selection.end;\n}\n\n/**\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} options.description\n * @param  {Array<string>} options.modelProperties\n * @param  {Array<string>} options.labels\n * @param  {Function} options.getElements - this callback function must return a list of business object items\n * @param  {Function} options.removeElement\n * @param  {Function} options.addElement\n * @param  {Function} options.updateElement\n * @param  {Function} options.editable\n * @param  {Function} options.setControlValue\n * @param  {Function} options.show\n *\n * @return {Object}\n */\nmodule.exports = function(translate, options) {\n\n  var id = options.id,\n      modelProperties = options.modelProperties,\n      labels = options.labels,\n      description = options.description;\n\n  var labelRow = createLabelRowTemplate(labels);\n\n  var getElements = options.getElements;\n\n  var removeElement = options.removeElement,\n      canRemove = typeof removeElement === 'function';\n\n  var addElement = options.addElement,\n      canAdd = typeof addElement === 'function',\n      addLabel = options.addLabel || 'Add Value';\n\n  var updateElement = options.updateElement,\n      canUpdate = typeof updateElement === 'function';\n\n  var editable = options.editable || function() { return true; },\n      setControlValue = options.setControlValue;\n\n  var show = options.show,\n      canBeShown = typeof show === 'function';\n\n  var elements = function(element, node) {\n    return pick(getElements(element, node), modelProperties);\n  };\n\n  var html = domify((canAdd ?\n    '<div class=\"bpp-table-add-row\" ' + (canBeShown ? 'data-show=\"show\"' : '') + '>' +\n          '<label>' + escapeHTML(addLabel) + '</label>' +\n          '<button class=\"action-button add\" data-action=\"addElement\"><span>+</span></button>' +\n        '</div>' : '') +\n        '<div class=\"bpp-table\" data-show=\"showTable\">' +\n          '<div class=\"bpp-field-wrapper bpp-table-row\">' +\n             labelRow +\n          '</div>' +\n          '<div data-list-entry-container>' +\n          '</div>' +\n        '</div>');\n\n  if (description) {\n    html.appendChild(entryFieldDescription(translate, description, { show: 'showTable' }));\n  }\n\n  var factory = {\n    id: id,\n    html: html,\n\n    get: function(element, node) {\n      var boElements = elements(element, node, this.__invalidValues);\n\n      var invalidValues = this.__invalidValues;\n\n      delete this.__invalidValues;\n\n      forEach(invalidValues, function(value, idx) {\n        var element = boElements[idx];\n\n        forEach(modelProperties, function(prop) {\n          element[prop] = value[prop];\n        });\n      });\n\n      return boElements;\n    },\n\n    set: function(element, values, node) {\n      var action = this.__action || {};\n      delete this.__action;\n\n      if (action.id === 'delete-element') {\n        return removeElement(element, node, action.idx);\n      }\n      else if (action.id === 'add-element') {\n        return addElement(element, node);\n      }\n      else if (canUpdate) {\n        var commands = [],\n            valuesToValidate = values;\n\n        if (typeof options.validate !== 'function') {\n          valuesToValidate = diff(element, node, values, elements(element, node), editable);\n        }\n\n        var self = this;\n\n        forEach(valuesToValidate, function(value) {\n          var validationError,\n              idx = values.indexOf(value);\n\n          if (typeof options.validate === 'function') {\n            validationError = options.validate(element, value, node, idx);\n          }\n\n          if (!validationError) {\n            var cmd = updateElement(element, value, node, idx);\n\n            if (cmd) {\n              commands.push(cmd);\n            }\n          } else {\n\n            // cache invalid value in an object by index as key\n            self.__invalidValues = self.__invalidValues || {};\n            self.__invalidValues[idx] = value;\n\n            // execute a command, which does not do anything\n            commands.push(cmdHelper.updateProperties(element, {}));\n          }\n        });\n\n        return commands;\n      }\n    },\n    createListEntryTemplate: function(value, index, selectBox) {\n      return createInputRowTemplate(modelProperties, canRemove);\n    },\n\n    addElement: function(element, node, event, scopeNode) {\n      var template = domify(createInputRowTemplate(modelProperties, canRemove));\n\n      var container = getContainer(node);\n      container.appendChild(template);\n\n      this.__action = {\n        id: 'add-element'\n      };\n\n      return true;\n    },\n\n    deleteElement: function(element, node, event, scopeNode) {\n      var container = getContainer(node);\n      var rowToDelete = event.delegateTarget.parentNode;\n      var idx = parseInt(domAttr(rowToDelete, 'data-index'), 10);\n\n      container.removeChild(rowToDelete);\n\n      this.__action = {\n        id: 'delete-element',\n        idx: idx\n      };\n\n      return true;\n    },\n\n    editable: function(element, rowNode, input, prop, value, idx) {\n      var entryNode = domClosest(rowNode, '[data-entry]');\n      return editable(element, entryNode, prop, idx);\n    },\n\n    show: function(element, entryNode, node, scopeNode) {\n      entryNode = getEntryNode(entryNode);\n      return show(element, entryNode, node, scopeNode);\n    },\n\n    showTable: function(element, entryNode, node, scopeNode) {\n      entryNode = getEntryNode(entryNode);\n      var elems = elements(element, entryNode);\n      return elems && elems.length && (!canBeShown || show(element, entryNode, node, scopeNode));\n    },\n\n    validateListItem: function(element, value, node, idx) {\n      if (typeof options.validate === 'function') {\n        return options.validate(element, value, node, idx);\n      }\n    }\n\n  };\n\n  // Update/set the selection on the correct position.\n  // It's the same code like for an input value in the PropertiesPanel.js.\n  if (setControlValue) {\n    factory.setControlValue = function(element, rowNode, input, prop, value, idx) {\n      var entryNode = getEntryNode(rowNode);\n\n      var isReadOnly = domAttr(input, 'readonly');\n      var oldValue = input.value;\n\n      var selection;\n\n      // prevents input fields from having the value 'undefined'\n      if (value === undefined) {\n        value = '';\n      }\n\n      // when the attribute 'readonly' exists, ignore the comparison\n      // with 'oldValue' and 'value'\n      if (!!isReadOnly && oldValue === value) {\n        return;\n      }\n\n      // update selection on undo/redo\n      if (document.activeElement === input) {\n        selection = updateSelection(getSelection(input), oldValue, value);\n      }\n\n      setControlValue(element, entryNode, input, prop, value, idx);\n\n      if (selection) {\n        setSelection(input, selection);\n      }\n\n    };\n  }\n\n  return factory;\n\n};\n","/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\nmodule.exports = getHolder;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","'use strict';\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper');\n\nvar fieldInjection = require('./implementation/FieldInjection');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var bo = ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  var fieldInjectionEntry = fieldInjection(element, bpmnFactory, translate, { businessObject: bo });\n\n  if (fieldInjectionEntry && fieldInjectionEntry.length > 0) {\n    group.entries = group.entries.concat(fieldInjectionEntry);\n  }\n\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    scriptImplementation = require('./implementation/Script');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var bo;\n\n  if (is(element, 'bpmn:ScriptTask')) {\n    bo = getBusinessObject(element);\n  }\n\n  if (!bo) {\n    return;\n  }\n\n  var script = scriptImplementation('scriptFormat', 'script', false, translate);\n  group.entries.push({\n    id: 'script-implementation',\n    label: translate('Script'),\n    html: script.template,\n\n    get: function(element) {\n      return script.get(element, bo);\n    },\n\n    set: function(element, values, containerElement) {\n      var properties = script.set(element, values, containerElement);\n\n      return cmdHelper.updateProperties(element, properties);\n    },\n\n    validate: function(element, values) {\n      return script.validate(element, values);\n    },\n\n    script : script,\n\n    cssClasses: ['bpp-textfield']\n\n  });\n\n  group.entries.push(entryFactory.textField(translate, {\n    id : 'scriptResultVariable',\n    label : translate('Result Variable'),\n    modelProperty : 'scriptResultVariable',\n\n    get: function(element, propertyName) {\n      var boResultVariable = bo.get('camunda:resultVariable');\n\n      return { scriptResultVariable : boResultVariable };\n    },\n\n    set: function(element, values, containerElement) {\n      return cmdHelper.updateProperties(element, {\n        'camunda:resultVariable': values.scriptResultVariable.length\n          ? values.scriptResultVariable\n          : undefined\n      });\n    }\n\n  }));\n\n};\n","'use strict';\n\n/**\n * The label factory provides a label entry. For the label text\n * it expects either a string provided by the options.labelText\n * parameter or it could be generated programmatically using a\n * function passed as the options.get parameter.\n *\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} [options.labelText]\n * @param  {Function} [options.get]\n * @param  {Function} [options.showLabel]\n * @param  {Boolean} [options.divider] adds a divider at the top of the label if true; default: false\n */\nvar label = function(options) {\n  return {\n    id: options.id,\n    html: '<label data-value=\"label\" ' +\n            'data-show=\"showLabel\" ' +\n            'class=\"entry-label' + (options.divider ? ' divider' : '') + '\">' +\n          '</label>',\n    get: function(element, node) {\n      if (typeof options.get === 'function') {\n        return options.get(element, node);\n      }\n      return { label: options.labelText };\n    },\n    showLabel: function(element, node) {\n      if (typeof options.showLabel === 'function') {\n        return options.showLabel(element, node);\n      }\n      return true;\n    }\n  };\n};\n\nmodule.exports = label;\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @constructor\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__dir__ = 1;\n  this.__filtered__ = false;\n  this.__iteratees__ = [];\n  this.__takeCount__ = MAX_ARRAY_LENGTH;\n  this.__views__ = [];\n}\n\n// Ensure `LazyWrapper` is an instance of `baseLodash`.\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nmodule.exports = LazyWrapper;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    escapeHTML = require('../../../Utils').escapeHTML,\n    domQuery = require('min-dom').query,\n    cmdHelper = require('../../../helper/CmdHelper'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper'),\n    scriptImplementation = require('./implementation/Script');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  var conditionalEventDefinition = eventDefinitionHelper.getConditionalEventDefinition(element);\n\n  if (!(is(element, 'bpmn:SequenceFlow') && isConditionalSource(element.source))\n    && !conditionalEventDefinition) {\n    return;\n  }\n\n  var script = scriptImplementation('language', 'body', true, translate);\n  group.entries.push({\n    id: 'condition',\n    label: translate('Condition'),\n    html: '<div class=\"bpp-row\">' +\n              '<label for=\"cam-condition-type\">'+ escapeHTML(translate('Condition Type')) + '</label>' +\n              '<div class=\"bpp-field-wrapper\">' +\n                '<select id=\"cam-condition-type\" name=\"conditionType\" data-value>' +\n                  '<option value=\"expression\">'+ escapeHTML(translate('Expression')) + '</option>' +\n                  '<option value=\"script\">'+ escapeHTML(translate('Script')) + '</option>' +\n                  '<option value=\"\" selected></option>' +\n                '</select>' +\n              '</div>' +\n            '</div>' +\n\n            // expression\n            '<div class=\"bpp-row\">' +\n              '<label for=\"cam-condition\" data-show=\"isExpression\">' + escapeHTML(translate('Expression')) + '</label>' +\n              '<div class=\"bpp-field-wrapper\" data-show=\"isExpression\">' +\n                '<input id=\"cam-condition\" type=\"text\" name=\"condition\" />' +\n                '<button class=\"action-button clear\" data-action=\"clear\" data-show=\"canClear\">' +\n                  '<span>X</span>' +\n                '</button>' +\n              '</div>' +\n              '<div data-show=\"isScript\">' +\n                script.template +\n              '</div>' +\n            '</div>',\n\n    get: function(element, propertyName) {\n      var conditionalEventDefinition = eventDefinitionHelper.getConditionalEventDefinition(element);\n\n      var conditionExpression = conditionalEventDefinition\n        ? conditionalEventDefinition.condition\n        : bo.conditionExpression;\n\n      var values = {},\n          conditionType = '';\n\n      if (conditionExpression) {\n        var conditionLanguage = conditionExpression.language;\n        if (typeof conditionLanguage !== 'undefined') {\n          conditionType = 'script';\n          values = script.get(element, conditionExpression);\n        } else {\n          conditionType = 'expression';\n          values.condition = conditionExpression.get('body');\n        }\n      }\n\n      values.conditionType = conditionType;\n\n      return values;\n\n    },\n\n    set: function(element, values, containerElement) {\n      var conditionType = values.conditionType;\n      var commands = [];\n\n      var conditionProps = {\n        body: undefined\n      };\n\n      if (conditionType === 'script') {\n        conditionProps = script.set(element, values, containerElement);\n      } else {\n        var condition = values.condition;\n\n        conditionProps.body = condition;\n      }\n\n      var conditionOrConditionExpression;\n\n      if (conditionType) {\n        conditionOrConditionExpression = elementHelper.createElement(\n          'bpmn:FormalExpression',\n          conditionProps,\n          conditionalEventDefinition || bo,\n          bpmnFactory\n        );\n\n        var source = element.source;\n\n        // if default-flow, remove default-property from source\n        if (source && source.businessObject.default === bo) {\n          commands.push(cmdHelper.updateProperties(source, { 'default': undefined }));\n        }\n      }\n\n      var update = conditionalEventDefinition\n        ? { condition: conditionOrConditionExpression }\n        : { conditionExpression: conditionOrConditionExpression };\n\n      commands.push(cmdHelper.updateBusinessObject(element, conditionalEventDefinition || bo, update));\n\n      return commands;\n    },\n\n    validate: function(element, values) {\n      var validationResult = {};\n\n      if (!values.condition && values.conditionType === 'expression') {\n        validationResult.condition = translate('Must provide a value');\n      }\n      else if (values.conditionType === 'script') {\n        validationResult = script.validate(element, values);\n      }\n\n      return validationResult;\n    },\n\n    isExpression: function(element, inputNode) {\n      var conditionType = domQuery('select[name=conditionType]', inputNode);\n      if (conditionType.selectedIndex >= 0) {\n        return conditionType.options[conditionType.selectedIndex].value === 'expression';\n      }\n    },\n\n    isScript: function(element, inputNode) {\n      var conditionType = domQuery('select[name=conditionType]', inputNode);\n      if (conditionType.selectedIndex >= 0) {\n        return conditionType.options[conditionType.selectedIndex].value === 'script';\n      }\n    },\n\n    clear: function(element, inputNode) {\n\n      // clear text input\n      domQuery('input[name=condition]', inputNode).value='';\n\n      return true;\n    },\n\n    canClear: function(element, inputNode) {\n      var input = domQuery('input[name=condition]', inputNode);\n\n      return input.value !== '';\n    },\n\n    script : script,\n\n    cssClasses: [ 'bpp-textfield' ]\n  });\n};\n\n\n// utilities //////////////////////////\n\nvar CONDITIONAL_SOURCES = [\n  'bpmn:Activity',\n  'bpmn:ExclusiveGateway',\n  'bpmn:InclusiveGateway',\n  'bpmn:ComplexGateway'\n];\n\nfunction isConditionalSource(element) {\n  return isAny(element, CONDITIONAL_SOURCES);\n}\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var jobPriorityEntry = entryFactory.textField(translate, {\n    id: 'jobPriority',\n    label: translate('Job Priority'),\n    modelProperty: 'jobPriority',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        jobPriority: bo.get('camunda:jobPriority')\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:jobPriority': values.jobPriority || undefined\n      });\n    }\n\n  });\n\n  return [ jobPriorityEntry ];\n\n};\n","module.exports = {\n  __depends__: [\n    require('./cmd'),\n    require('diagram-js/lib/i18n/translate').default\n  ],\n  __init__: [\n    'customElementsPropertiesActivator',\n    'elementTemplatesLoader',\n    'replaceBehavior'\n  ],\n  customElementsPropertiesActivator: [ 'type', require('./CustomElementsPropertiesActivator') ],\n  elementTemplates: [ 'type', require('./ElementTemplates') ],\n  elementTemplatesLoader: [ 'type', require('./ElementTemplatesLoader') ],\n  replaceBehavior: [ 'type', require('./ReplaceBehavior') ],\n};\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    countHolders = require('./_countHolders'),\n    createCtor = require('./_createCtor'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    reorder = require('./_reorder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_ARY_FLAG = 128,\n    WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & WRAP_ARY_FLAG,\n      isBind = bitmask & WRAP_BIND_FLAG,\n      isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n      isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n      isFlip = bitmask & WRAP_FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createHybrid;\n","var WeakMap = require('./_WeakMap');\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nmodule.exports = metaMap;\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","'use strict';\r\n\r\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\r\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\r\n\r\nvar tasklist = require('./implementation/Tasklist');\r\n\r\nmodule.exports = function(group, element, bpmnFactory, translate) {\r\n  var businessObject = getBusinessObject(element);\r\n\r\n  if (is(element, 'camunda:Process') ||\r\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\r\n\r\n    group.entries = group.entries.concat(tasklist(element, bpmnFactory, {\r\n      getBusinessObject: function(element) {\r\n        var bo = getBusinessObject(element);\r\n\r\n        if (!is(bo, 'bpmn:Participant')) {\r\n          return bo;\r\n        }\r\n\r\n        return bo.get('processRef');\r\n      }\r\n    }, translate));\r\n\r\n  }\r\n};\r\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nvar forEach = require('lodash/forEach');\n\nfunction getLinkEventDefinition(element) {\n\n  var bo = getBusinessObject(element);\n\n  var linkEventDefinition = null;\n  if (bo.eventDefinitions) {\n    forEach(bo.eventDefinitions, function(eventDefinition) {\n      if (is(eventDefinition, 'bpmn:LinkEventDefinition')) {\n        linkEventDefinition = eventDefinition;\n      }\n    });\n  }\n\n  return linkEventDefinition;\n}\n\nmodule.exports = function(group, element, translate) {\n  var linkEvents = [ 'bpmn:IntermediateThrowEvent', 'bpmn:IntermediateCatchEvent' ];\n\n  forEach(linkEvents, function(event) {\n    if (is(element, event)) {\n\n      var linkEventDefinition = getLinkEventDefinition(element);\n\n      if (linkEventDefinition) {\n        var entry = entryFactory.textField(translate, {\n          id: 'link-event',\n          label: translate('Link Name'),\n          modelProperty: 'link-name'\n        });\n\n        entry.get = function() {\n          return { 'link-name': linkEventDefinition.get('name') };\n        };\n\n        entry.set = function(element, values) {\n          var newProperties = {\n            name: values['link-name']\n          };\n          return cmdHelper.updateBusinessObject(element, linkEventDefinition, newProperties);\n        };\n\n        group.entries.push(entry);\n      }\n    }\n  });\n};\n\n","'use strict';\n\nvar Validator = require('./Validator');\n\n/**\n * The guy responsible for template loading.\n *\n * Provide the actual templates via the `config.elementTemplates`.\n *\n * That configuration can either be an array of template\n * descriptors or a node style callback to retrieve\n * the templates asynchronously.\n *\n * @param {Array<TemplateDescriptor>|Function} loadTemplates\n * @param {EventBus} eventBus\n * @param {ElementTemplates} elementTemplates\n */\nfunction ElementTemplatesLoader(loadTemplates, eventBus, elementTemplates) {\n  this._loadTemplates = loadTemplates;\n  this._eventBus = eventBus;\n  this._elementTemplates = elementTemplates;\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n    self.reload();\n  });\n}\n\nmodule.exports = ElementTemplatesLoader;\n\nElementTemplatesLoader.$inject = [\n  'config.elementTemplates',\n  'eventBus',\n  'elementTemplates'\n];\n\n\nElementTemplatesLoader.prototype.reload = function() {\n\n  var self = this;\n\n  var loadTemplates = this._loadTemplates;\n\n  // no templates specified\n  if (typeof loadTemplates === 'undefined') {\n    return;\n  }\n\n  // template loader function specified\n  if (typeof loadTemplates === 'function') {\n\n    return loadTemplates(function(err, templates) {\n\n      if (err) {\n        return self.templateErrors([ err ]);\n      }\n\n      self.setTemplates(templates);\n    });\n  }\n\n  // templates array specified\n  if (loadTemplates.length) {\n    return this.setTemplates(loadTemplates);\n  }\n\n};\n\nElementTemplatesLoader.prototype.setTemplates = function(templates) {\n\n  var elementTemplates = this._elementTemplates;\n\n  var validator = new Validator().addAll(templates);\n\n  var errors = validator.getErrors(),\n      validTemplates = validator.getValidTemplates();\n\n  elementTemplates.set(validTemplates);\n\n  if (errors.length) {\n    this.templateErrors(errors);\n  }\n\n  this.templatesChanged();\n};\n\nElementTemplatesLoader.prototype.templatesChanged = function() {\n  this._eventBus.fire('elementTemplates.changed');\n};\n\nElementTemplatesLoader.prototype.templateErrors = function(errors) {\n  this._eventBus.fire('elementTemplates.errors', {\n    errors: errors\n  });\n};","'use strict';\n\nvar assign = require('lodash/assign'),\n    find = require('lodash/find');\n\nvar domify = require('min-dom').domify,\n    domQuery = require('min-dom').query;\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar selectEntryFactory = require('./SelectEntryFactory'),\n    entryFieldDescription = require('./EntryFieldDescription');\n\n\n/**\n * The combo box is a special implementation of the select entry and adds the option 'custom' to the\n * select box. If 'custom' is selected, an additional text input field is shown which allows to define\n * a custom value.\n *\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} options.label\n * @param  {Array<Object>} options.selectOptions list of name/value pairs\n * @param  {string} options.modelProperty\n * @param  {function} options.get\n * @param  {function} options.set\n * @param  {string} [options.customValue] custom select option value (default: 'custom')\n * @param  {string} [options.customName] custom select option name visible in the select box (default: 'custom')\n *\n * @return {Object}\n */\nvar comboBox = function(translate, options) {\n\n  var selectOptions = options.selectOptions,\n      modelProperty = options.modelProperty,\n      customValue = options.customValue || 'custom',\n      customName = options.customName || 'custom ' + modelProperty,\n      description = options.description;\n\n  // check if a value is not a built in value\n  var isCustomValue = function(value) {\n    if (typeof value[modelProperty] === 'undefined') {\n      return false;\n    }\n\n    var isCustom = !find(selectOptions, function(option) {\n      return value[modelProperty] === option.value;\n    });\n\n    return isCustom;\n  };\n\n  var comboOptions = assign({}, options);\n\n  // true if the selected value in the select box is customValue\n  comboOptions.showCustomInput = function(element, node) {\n    var selectBox = domQuery('[data-entry=\"'+ options.id +'\"] select', node.parentNode);\n\n    if (selectBox) {\n      return selectBox.value === customValue;\n    }\n\n    return false;\n  };\n\n  comboOptions.get = function(element, node) {\n    var value = options.get(element, node);\n\n    var modifiedValues = {};\n\n    if (!isCustomValue(value)) {\n      modifiedValues[modelProperty] = value[modelProperty] || '';\n\n      return modifiedValues;\n    }\n\n    modifiedValues[modelProperty] = customValue;\n    modifiedValues['custom-'+modelProperty] = value[modelProperty];\n\n    return modifiedValues;\n  };\n\n  comboOptions.set = function(element, values, node) {\n    var modifiedValues = {};\n\n    // if the custom select option has been selected\n    // take the value from the text input field\n    if (values[modelProperty] === customValue) {\n      modifiedValues[modelProperty] = values['custom-' + modelProperty] || '';\n    }\n    else if (options.emptyParameter && values[modelProperty] === '') {\n      modifiedValues[modelProperty] = undefined;\n    } else {\n      modifiedValues[modelProperty] = values[modelProperty];\n    }\n    return options.set(element, modifiedValues, node);\n  };\n\n  comboOptions.selectOptions.push({ name: customName, value: customValue });\n\n  var comboBoxEntry = assign({}, selectEntryFactory(translate, comboOptions, comboOptions));\n\n  var fragment = document.createDocumentFragment();\n\n  fragment.appendChild(comboBoxEntry.html);\n\n  comboBoxEntry.html = fragment;\n\n  comboBoxEntry.html.appendChild(domify('<div class=\"bpp-field-wrapper bpp-combo-input\" ' +\n    'data-show=\"showCustomInput\"' +\n    '>' +\n    '<input id=\"camunda-' + escapeHTML(options.id) + '-input\" type=\"text\" name=\"custom-' +\n      escapeHTML(modelProperty) + '\" ' +\n    ' />' +\n  '</div>'));\n\n  // add description below combo box entry field\n  if (description) {\n    comboBoxEntry.html.appendChild(entryFieldDescription(translate, description, { show: 'showCustomInput' }));\n  }\n\n  return comboBoxEntry;\n};\n\nmodule.exports = comboBox;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar ImplementationTypeHelper = require('../../../helper/ImplementationTypeHelper');\n\nvar externalTaskPriority = require('./implementation/ExternalTaskPriority');\n\nfunction getServiceTaskLikeBusinessObject(element) {\n  var bo = ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n\n  // if the element is not a serviceTaskLike element, fetch the normal business object\n  // This avoids the loss of the process / participant business object\n  if (!bo) {\n    bo = getBusinessObject(element);\n  }\n\n  return bo;\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var bo = getServiceTaskLikeBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(bo, 'camunda:TaskPriorized') || (is(bo, 'bpmn:Participant')) && bo.get('processRef')) {\n    group.entries = group.entries.concat(externalTaskPriority(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n        return bo.get('processRef');\n      }\n    }, translate));\n  }\n};","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar domQuery = require('min-dom').query,\n    domClosest = require('min-dom').closest,\n    domify = require('min-dom').domify,\n    forEach = require('lodash/forEach');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils'),\n    escapeHTML = utils.escapeHTML;\n\nfunction getSelectBox(node, id) {\n  var currentTab = domClosest(node, 'div.bpp-properties-tab');\n  var query = 'select[name=selectedExtensionElement]' + (id ? '[id=cam-extensionElements-' + id + ']' : '');\n  return domQuery(query, currentTab);\n}\n\nfunction getSelected(node, id) {\n  var selectBox = getSelectBox(node, id);\n  return {\n    value: (selectBox || {}).value,\n    idx: (selectBox || {}).selectedIndex\n  };\n}\n\nfunction generateElementId(prefix) {\n  prefix = prefix + '_';\n  return utils.nextId(prefix);\n}\n\nvar CREATE_EXTENSION_ELEMENT_ACTION = 'create-extension-element',\n    REMOVE_EXTENSION_ELEMENT_ACTION = 'remove-extension-element';\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var id = options.id,\n      prefix = options.prefix || 'elem',\n      label = options.label || id,\n      idGeneration = (options.idGeneration === false) ? options.idGeneration : true,\n      businessObject = options.businessObject || getBusinessObject(element);\n\n  var modelProperty = options.modelProperty || 'id';\n\n  var getElements = options.getExtensionElements;\n\n  var createElement = options.createExtensionElement,\n      canCreate = typeof createElement === 'function';\n\n  var removeElement = options.removeExtensionElement,\n      canRemove = typeof removeElement === 'function';\n\n  var onSelectionChange = options.onSelectionChange;\n\n  var hideElements = options.hideExtensionElements,\n      canBeHidden = typeof hideElements === 'function';\n\n  var setOptionLabelValue = options.setOptionLabelValue;\n\n  var defaultSize = options.size || 5,\n      resizable = options.resizable;\n\n  var reference = options.reference || undefined;\n\n  var selectionChanged = function(element, node, event, scope) {\n    if (typeof onSelectionChange === 'function') {\n      return onSelectionChange(element, node, event, scope);\n    }\n  };\n\n  var createOption = function(value) {\n    return '<option value=\"' + escapeHTML(value) + '\" data-value data-name=\"extensionElementValue\">' + escapeHTML(value) + '</option>';\n  };\n\n  var initSelectionSize = function(selectBox, optionsLength) {\n    if (resizable) {\n      selectBox.size = optionsLength > defaultSize ? optionsLength : defaultSize;\n    }\n  };\n\n  return {\n    id: id,\n    html: '<div class=\"bpp-row bpp-element-list\" ' +\n            (canBeHidden ? 'data-show=\"hideElements\"' : '') + '>' +\n            '<label for=\"cam-extensionElements-' + escapeHTML(id) + '\">' + escapeHTML(label) + '</label>' +\n            '<div class=\"bpp-field-wrapper\">' +\n              '<select id=\"cam-extensionElements-' + escapeHTML(id) + '\"' +\n                      'name=\"selectedExtensionElement\" ' +\n                      'size=\"' + escapeHTML(defaultSize) + '\" ' +\n                      'data-list-entry-container ' +\n                      'data-on-change=\"selectElement\">' +\n              '</select>' +\n              (canCreate ? '<button class=\"action-button add\" ' +\n                                   'id=\"cam-extensionElements-create-' + escapeHTML(id) + '\" ' +\n                                   'data-action=\"createElement\">' +\n                             '<span>+</span>' +\n                           '</button>' : '') +\n              (canRemove ? '<button class=\"action-button clear\" ' +\n                                   'id=\"cam-extensionElements-remove-' + escapeHTML(id) + '\" ' +\n                                   'data-action=\"removeElement\" ' +\n                                   'data-disable=\"disableRemove\">' +\n                             '<span>-</span>' +\n                           '</button>' : '') +\n            '</div>' +\n          '</div>',\n\n    get: function(element, node) {\n      var elements = getElements(element, node);\n\n      var result = [];\n      forEach(elements, function(elem) {\n        result.push({\n          extensionElementValue: elem.get(modelProperty)\n        });\n      });\n\n      var selectBox = getSelectBox(node.parentNode, id);\n      initSelectionSize(selectBox, result.length);\n\n      return result;\n    },\n\n    set: function(element, values, node) {\n      var action = this.__action;\n      delete this.__action;\n\n      businessObject = businessObject || getBusinessObject(element);\n\n      var bo =\n        (reference && businessObject.get(reference))\n          ? businessObject.get(reference)\n          : businessObject;\n\n      var extensionElements = bo.get('extensionElements');\n\n      if (action.id === CREATE_EXTENSION_ELEMENT_ACTION) {\n        var commands = [];\n        if (!extensionElements) {\n          extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n          commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n        }\n        commands.push(createElement(element, extensionElements, action.value, node));\n        return commands;\n\n      }\n      else if (action.id === REMOVE_EXTENSION_ELEMENT_ACTION) {\n        return removeElement(element, extensionElements, action.value, action.idx, node);\n      }\n\n    },\n\n    createListEntryTemplate: function(value, index, selectBox) {\n      initSelectionSize(selectBox, selectBox.options.length + 1);\n      return createOption(value.extensionElementValue);\n    },\n\n    deselect: function(element, node) {\n      var selectBox = getSelectBox(node, id);\n      selectBox.selectedIndex = -1;\n    },\n\n    getSelected: function(element, node) {\n      return getSelected(node, id);\n    },\n\n    setControlValue: function(element, node, option, property, value, idx) {\n      node.value = value;\n\n      if (!setOptionLabelValue) {\n        node.text = value;\n      } else {\n        setOptionLabelValue(element, node, option, property, value, idx);\n      }\n    },\n\n    createElement: function(element, node) {\n\n      // create option template\n      var generatedId;\n      if (idGeneration) {\n        generatedId = generateElementId(prefix);\n      }\n\n      var selectBox = getSelectBox(node, id);\n      var template = domify(createOption(generatedId));\n\n      // add new empty option as last child element\n      selectBox.appendChild(template);\n\n      // select last child element\n      selectBox.lastChild.selected = 'selected';\n      selectionChanged(element, node);\n\n      // update select box size\n      initSelectionSize(selectBox, selectBox.options.length);\n\n      this.__action = {\n        id: CREATE_EXTENSION_ELEMENT_ACTION,\n        value: generatedId\n      };\n\n      return true;\n    },\n\n    removeElement: function(element, node) {\n      var selection = getSelected(node, id);\n\n      var selectBox = getSelectBox(node, id);\n      selectBox.removeChild(selectBox.options[selection.idx]);\n\n      // update select box size\n      initSelectionSize(selectBox, selectBox.options.length);\n\n      this.__action = {\n        id: REMOVE_EXTENSION_ELEMENT_ACTION,\n        value: selection.value,\n        idx: selection.idx\n      };\n\n      return true;\n    },\n\n    hideElements: function(element, entryNode, node, scopeNode) {\n      return !hideElements(element, entryNode, node, scopeNode);\n    },\n\n    disableRemove: function(element, entryNode, node, scopeNode) {\n      return (getSelected(entryNode, id) || {}).idx < 0;\n    },\n\n    selectElement: selectionChanged\n  };\n\n};\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar extensionElementsEntry = require('./ExtensionElements'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementHelper = require('../../../../helper/ElementHelper'),\n    ImplementationTypeHelper = require('../../../../helper/ImplementationTypeHelper');\n\n\nfunction getListeners(bo, type) {\n  return bo && extensionElementsHelper.getExtensionElements(bo, type) || [];\n}\n\nvar CAMUNDA_EXECUTION_LISTENER_ELEMENT = 'camunda:ExecutionListener';\nvar CAMUNDA_TASK_LISTENER_ELEMENT = 'camunda:TaskListener';\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var LISTENER_TYPE_LABEL = {\n    class: translate('Java Class'),\n    expression: translate('Expression'),\n    delegateExpression: translate('Delegate Expression'),\n    script: translate('Script')\n  };\n\n  var bo;\n\n  var result = {\n    getSelectedListener: getSelectedListener\n  };\n\n  var entries = result.entries = [];\n\n  var isSequenceFlow = ImplementationTypeHelper.isSequenceFlow(element);\n\n  function getSelectedListener(element, node) {\n    var selection = (executionListenerEntry && executionListenerEntry.getSelected(element, node)) || { idx: -1 };\n\n    var listener = getListeners(bo, CAMUNDA_EXECUTION_LISTENER_ELEMENT)[selection.idx];\n    if (!listener && taskListenerEntry) {\n      selection = taskListenerEntry.getSelected(element, node);\n      listener = getListeners(bo, CAMUNDA_TASK_LISTENER_ELEMENT)[selection.idx];\n    }\n    return listener;\n  }\n\n  var setOptionLabelValue = function(type) {\n    return function(element, node, option, property, value, idx) {\n      var listeners = getListeners(bo, type);\n      var listener = listeners[idx];\n      var listenerType = ImplementationTypeHelper.getImplementationType(listener);\n\n      var event = (listener.get('event')) ? listener.get('event') : '<empty>';\n\n      var label = (event || '*') + ' : ' + (LISTENER_TYPE_LABEL[listenerType] || '');\n\n      option.text = label;\n    };\n  };\n\n  var newElement = function(element, type, initialEvent) {\n    return function(element, extensionElements, value) {\n      var props = {\n        event: initialEvent,\n        class: ''\n      };\n\n      var newElem = elementHelper.createElement(type, props, extensionElements, bpmnFactory);\n\n      return cmdHelper.addElementsTolist(element, extensionElements, 'values', [ newElem ]);\n    };\n  };\n\n  var removeElement = function(element, type) {\n    return function(element, extensionElements, value, idx) {\n      var listeners = getListeners(bo, type);\n      var listener = listeners[idx];\n      if (listener) {\n        return extensionElementsHelper.removeEntry(bo, element, listener);\n      }\n    };\n  };\n\n\n  // Execution Listener\n\n  if (is(element, 'bpmn:FlowElement') || is(element, 'bpmn:Process') || is(element, 'bpmn:Participant')) {\n    bo = getBusinessObject(element);\n    if (is(element, 'bpmn:Participant')) {\n      element = element.processRef;\n      bo = bo.get('processRef');\n    }\n\n    if (bo) {\n\n      var executionListenerEntry = extensionElementsEntry(element, bpmnFactory, {\n        id : 'executionListeners',\n        label : translate('Execution Listener'),\n        modelProperty: 'name',\n        idGeneration: 'false',\n        reference: 'processRef',\n\n        createExtensionElement: newElement(element, CAMUNDA_EXECUTION_LISTENER_ELEMENT, (isSequenceFlow) ? 'take' : 'start'),\n        removeExtensionElement: removeElement(element, CAMUNDA_EXECUTION_LISTENER_ELEMENT),\n\n        getExtensionElements: function(element) {\n          return getListeners(bo, CAMUNDA_EXECUTION_LISTENER_ELEMENT);\n        },\n\n        onSelectionChange: function(element, node, event, scope) {\n          taskListenerEntry && taskListenerEntry.deselect(element, node);\n        },\n\n        setOptionLabelValue: setOptionLabelValue(CAMUNDA_EXECUTION_LISTENER_ELEMENT)\n\n      });\n      entries.push(executionListenerEntry);\n\n    }\n  }\n\n\n  // Task Listener\n\n  if (is(element, 'bpmn:UserTask')) {\n    bo = getBusinessObject(element);\n\n    var taskListenerEntry = extensionElementsEntry(element, bpmnFactory, {\n      id : 'taskListeners',\n      label : translate('Task Listener'),\n      modelProperty: 'name',\n      idGeneration: 'false',\n\n      createExtensionElement: newElement(element, CAMUNDA_TASK_LISTENER_ELEMENT, 'create'),\n      removeExtensionElement: removeElement(element, CAMUNDA_TASK_LISTENER_ELEMENT),\n\n      getExtensionElements: function(element) {\n        return getListeners(bo, CAMUNDA_TASK_LISTENER_ELEMENT);\n      },\n\n      onSelectionChange: function(element, node, event, scope) {\n        executionListenerEntry.deselect(element, node);\n      },\n\n      setOptionLabelValue: setOptionLabelValue(CAMUNDA_TASK_LISTENER_ELEMENT)\n\n    });\n    entries.push(taskListenerEntry);\n  }\n\n  return result;\n\n};\n","'use strict';\n\nvar ChangeElementTemplateHandler = require('./ChangeElementTemplateHandler');\n\nfunction registerHandlers(commandStack, elementTemplates, eventBus) {\n  commandStack.registerHandler(\n    'propertiesPanel.camunda.changeTemplate',\n    ChangeElementTemplateHandler\n  );\n\n  // apply default element templates on shape creation\n  eventBus.on([ 'commandStack.shape.create.postExecuted' ], function(context) {\n    applyDefaultTemplate(context.context.shape, elementTemplates, commandStack);\n  });\n\n  // apply default element templates on connection creation\n  eventBus.on([ 'commandStack.connection.create.postExecuted' ], function(context) {\n    applyDefaultTemplate(context.context.connection, elementTemplates, commandStack);\n  });\n}\n\nregisterHandlers.$inject = [ 'commandStack', 'elementTemplates', 'eventBus' ];\n\n\nmodule.exports = {\n  __init__: [ registerHandlers ]\n};\n\n\nfunction applyDefaultTemplate(element, elementTemplates, commandStack) {\n\n  if (!elementTemplates.get(element) && elementTemplates.getDefault(element)) {\n\n    var command = 'propertiesPanel.camunda.changeTemplate';\n    var commandContext = {\n      element: element,\n      newTemplate: elementTemplates.getDefault(element)\n    };\n\n    commandStack.execute(command, commandContext);\n  }\n}\n","'use strict';\n\n/**\n * Calculate the selection update for the given\n * current and new input values.\n *\n * @param {Object} currentSelection as {start, end}\n * @param {String} currentValue\n * @param {String} newValue\n *\n * @return {Object} newSelection as {start, end}\n */\nfunction calculateUpdate(currentSelection, currentValue, newValue) {\n\n  var currentCursor = currentSelection.start,\n      newCursor = currentCursor,\n      diff = newValue.length - currentValue.length,\n      idx;\n\n  var lengthDelta = newValue.length - currentValue.length;\n\n  var currentTail = currentValue.substring(currentCursor);\n\n  // check if we can remove common ending from the equation\n  // to be able to properly detect a selection change for\n  // the following scenarios:\n  //\n  //  * (AAATTT|TF) => (AAAT|TF)\n  //  * (AAAT|TF) =>  (AAATTT|TF)\n  //\n  if (newValue.lastIndexOf(currentTail) === newValue.length - currentTail.length) {\n    currentValue = currentValue.substring(0, currentValue.length - currentTail.length);\n    newValue = newValue.substring(0, newValue.length - currentTail.length);\n  }\n\n  // diff\n  var diff = createDiff(currentValue, newValue);\n\n  if (diff) {\n    if (diff.type === 'remove') {\n      newCursor = diff.newStart;\n    } else {\n      newCursor = diff.newEnd;\n    }\n  }\n\n  return range(newCursor);\n}\n\nmodule.exports = calculateUpdate;\n\n\nfunction createDiff(currentValue, newValue) {\n\n  var insert;\n\n  var l_str, l_char, l_idx = 0,\n      s_str, s_char, s_idx = 0;\n\n  if (newValue.length > currentValue.length) {\n    l_str = newValue;\n    s_str = currentValue;\n  } else {\n    l_str = currentValue;\n    s_str = newValue;\n  }\n\n  // assume there will be only one insert / remove and\n  // detect that _first_ edit operation only\n  while (l_idx < l_str.length) {\n\n    l_char = l_str.charAt(l_idx);\n    s_char = s_str.charAt(s_idx);\n\n    // chars no not equal\n    if (l_char !== s_char) {\n\n      if (!insert) {\n        insert = {\n          l_start: l_idx,\n          s_start: s_idx\n        };\n      }\n\n      l_idx++;\n    }\n\n    // chars equal (again?)\n    else {\n\n      if (insert && !insert.complete) {\n        insert.l_end = l_idx;\n        insert.s_end = s_idx;\n        insert.complete = true;\n      }\n\n      s_idx++;\n      l_idx++;\n    }\n  }\n\n  if (insert && !insert.complete) {\n    insert.complete = true;\n    insert.s_end = s_str.length;\n    insert.l_end = l_str.length;\n  }\n\n  // no diff\n  if (!insert) {\n    return;\n  }\n\n  if (newValue.length > currentValue.length) {\n    return {\n      newStart: insert.l_start,\n      newEnd: insert.l_end,\n      type: 'add'\n    };\n  } else {\n    return {\n      newStart: insert.s_start,\n      newEnd: insert.s_end,\n      type: newValue.length < currentValue.length ? 'remove' : 'replace'\n    };\n  }\n}\n\n/**\n * Utility method for creating a new selection range {start, end} object.\n *\n * @param {Number} start\n * @param {Number} [end]\n *\n * @return {Object} selection range as {start, end}\n */\nfunction range(start, end) {\n  return {\n    start: start,\n    end: end === undefined ? start : end\n  };\n}\n\nmodule.exports.range = range;\n\n\nfunction splitStr(str, position) {\n  return {\n    before: str.substring(0, position),\n    after: str.substring(position)\n  };\n}","module.exports = {\n  __depends__: [\n    require('./cmd'),\n    require('diagram-js/lib/i18n/translate').default\n  ],\n  __init__: [ 'propertiesPanel' ],\n  propertiesPanel: [ 'type', require('./PropertiesPanel') ]\n};\n","var baseUnset = require('./_baseUnset'),\n    isIndex = require('./_isIndex');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAt` without support for individual\n * indexes or capturing the removed elements.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {number[]} indexes The indexes of elements to remove.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAt(array, indexes) {\n  var length = array ? indexes.length : 0,\n      lastIndex = length - 1;\n\n  while (length--) {\n    var index = indexes[length];\n    if (length == lastIndex || index !== previous) {\n      var previous = index;\n      if (isIndex(index)) {\n        splice.call(array, index, 1);\n      } else {\n        baseUnset(array, index);\n      }\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAt;\n","'use strict';\n\nvar inherits = require('inherits');\n\nvar PropertiesActivator = require('../../PropertiesActivator');\n\nvar asyncCapableHelper = require('../../helper/AsyncCapableHelper'),\n    ImplementationTypeHelper = require('../../helper/ImplementationTypeHelper');\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\n// bpmn properties\nvar processProps = require('../bpmn/parts/ProcessProps'),\n    eventProps = require('../bpmn/parts/EventProps'),\n    linkProps = require('../bpmn/parts/LinkProps'),\n    documentationProps = require('../bpmn/parts/DocumentationProps'),\n    idProps = require('../bpmn/parts/IdProps'),\n    nameProps = require('../bpmn/parts/NameProps'),\n    executableProps = require('../bpmn/parts/ExecutableProps');\n\n// camunda properties\nvar serviceTaskDelegateProps = require('./parts/ServiceTaskDelegateProps'),\n    userTaskProps = require('./parts/UserTaskProps'),\n    asynchronousContinuationProps = require('./parts/AsynchronousContinuationProps'),\n    callActivityProps = require('./parts/CallActivityProps'),\n    multiInstanceProps = require('./parts/MultiInstanceLoopProps'),\n    conditionalProps = require('./parts/ConditionalProps'),\n    scriptProps = require('./parts/ScriptTaskProps'),\n    errorProps = require('./parts/ErrorEventProps'),\n    formProps = require('./parts/FormProps'),\n    startEventInitiator = require('./parts/StartEventInitiator'),\n    variableMapping = require('./parts/VariableMappingProps'),\n    versionTag = require('./parts/VersionTagProps'),\n    processVariablesProps = require('./parts/ProcessVariablesProps');\n\nvar listenerProps = require('./parts/ListenerProps'),\n    listenerDetails = require('./parts/ListenerDetailProps'),\n    listenerFields = require('./parts/ListenerFieldInjectionProps');\n\nvar elementTemplateDescriptionProps = require('./element-templates/parts/DescriptionProps'),\n    elementTemplateChooserProps = require('./element-templates/parts/ChooserProps'),\n    elementTemplateCustomProps = require('./element-templates/parts/CustomProps'),\n    elementTemplateInputParametersProps = require('./element-templates/parts/InputParametersProps'),\n    elementTemplateOutputParametersProps = require('./element-templates/parts/OutputParametersProps'),\n    getTemplateId = require('./element-templates/Helper').getTemplateId;\n\n// Input/Output\nvar inputParameters = require('./parts/InputParametersProps'),\n    outputParameters = require('./parts/OutputParametersProps');\n\n// Connector\nvar connectorDetails = require('./parts/ConnectorDetailProps'),\n    connectorInputParameters = require('./parts/ConnectorInputParametersProps'),\n    connectorOutputParameters = require('./parts/ConnectorOutputParametersProps');\n\n// properties\nvar properties = require('./parts/PropertiesProps');\n\n// job configuration\nvar jobConfiguration = require('./parts/JobConfigurationProps');\n\n// history time to live\nvar historyTimeToLive = require('./parts/HistoryTimeToLiveProps');\n\n// candidate starter groups/users\nvar candidateStarter = require('./parts/CandidateStarterProps');\n\n// tasklist\nvar tasklist = require('./parts/TasklistProps');\n\n// external task configuration\nvar externalTaskConfiguration = require('./parts/ExternalTaskConfigurationProps');\n\n// field injection\nvar fieldInjections = require('./parts/FieldInjectionProps');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    eventDefinitionHelper = require('../../helper/EventDefinitionHelper'),\n    implementationTypeHelper = require('../../helper/ImplementationTypeHelper');\n\n// helpers ////////////////////////////////////////\n\nvar isExternalTaskPriorityEnabled = function(element) {\n  var businessObject = getBusinessObject(element);\n\n  // show only if element is a process, a participant ...\n  if (is(element, 'bpmn:Process') || is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n    return true;\n  }\n\n  var externalBo = ImplementationTypeHelper.getServiceTaskLikeBusinessObject(element),\n      isExternalTask = ImplementationTypeHelper.getImplementationType(externalBo) === 'external';\n\n  // ... or an external task with selected external implementation type\n  return !!ImplementationTypeHelper.isExternalCapable(externalBo) && isExternalTask;\n};\n\nvar isJobConfigEnabled = function(element) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'bpmn:Process') || is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n    return true;\n  }\n\n  // async behavior\n  var bo = getBusinessObject(element);\n  if (asyncCapableHelper.isAsyncBefore(bo) || asyncCapableHelper.isAsyncAfter(bo)) {\n    return true;\n  }\n\n  // timer definition\n  if (is(element, 'bpmn:Event')) {\n    return !!eventDefinitionHelper.getTimerEventDefinition(element);\n  }\n\n  return false;\n};\n\nvar getListenerLabel = function(param, translate) {\n\n  if (is(param, 'camunda:ExecutionListener')) {\n    return translate('Execution Listener');\n  }\n\n  if (is(param, 'camunda:TaskListener')) {\n    return translate('Task Listener');\n  }\n\n  return '';\n};\n\nvar PROCESS_KEY_HINT = 'This maps to the process definition key.';\nvar TASK_KEY_HINT = 'This maps to the task definition key.';\n\nfunction getIdOptions(element) {\n\n  if (is(element, 'bpmn:Participant')) {\n    return { id: 'participant-id', label: 'Participant Id' };\n  }\n\n  if (is(element, 'bpmn:Process')) {\n    return { description: PROCESS_KEY_HINT };\n  }\n\n  if (is(element, 'bpmn:UserTask')) {\n    return { description: TASK_KEY_HINT };\n  }\n}\n\nfunction getNameOptions(element) {\n  if (is(element, 'bpmn:Participant')) {\n    return { id: 'participant-name', label: 'Participant Name' };\n  }\n}\n\nfunction getProcessOptions(element) {\n  if (is(element, 'bpmn:Participant')) {\n    return { processIdDescription: PROCESS_KEY_HINT };\n  }\n}\n\nfunction createElementTemplateGroups(\n    element,\n    bpmnFactory,\n    canvas,\n    commandStack,\n    elementTemplates,\n    modeling,\n    replace,\n    selection,\n    translate) {\n  var templateId = getTemplateId(element);\n\n  if (!templateId) {\n    return [];\n  }\n\n  var descriptionGroup = elementTemplateDescriptionProps(\n    element, commandStack, elementTemplates, modeling, replace, selection, translate);\n\n  var idOptions = getIdOptions(element) || {};\n\n  idOptions.id = 'element-template-element-id';\n\n  var nameOptions = { id: 'element-template-element-name' };\n\n  idProps(descriptionGroup, element, translate, idOptions);\n  nameProps(descriptionGroup, element, bpmnFactory, canvas, translate, nameOptions);\n  processProps(descriptionGroup, element, translate, getProcessOptions(element));\n\n  var elementTemplateInputParametersGroup = {\n    id: 'template-inputs',\n    label: translate('Input Parameters'),\n    entries: []\n  };\n  elementTemplateInputParametersProps(elementTemplateInputParametersGroup, element, elementTemplates, bpmnFactory, translate);\n\n  var elementTemplateOutputParametersGroup = {\n    id: 'template-outputs',\n    label: translate('Output Parameters'),\n    entries: []\n  };\n  elementTemplateOutputParametersProps(elementTemplateOutputParametersGroup, element, elementTemplates, bpmnFactory, translate);\n\n  var customFieldsGroups = elementTemplateCustomProps(element, elementTemplates, bpmnFactory, translate);\n\n  return [\n    descriptionGroup,\n    elementTemplateInputParametersGroup,\n    elementTemplateOutputParametersGroup\n  ].concat(customFieldsGroups);\n}\n\nfunction createGeneralTabGroups(\n    element, canvas, bpmnFactory,\n    elementRegistry, elementTemplates, translate) {\n\n  // refer to target element for external labels\n  element = element.labelTarget || element;\n\n  var generalGroup = {\n    id: 'general',\n    label: translate('General'),\n    entries: []\n  };\n\n  idProps(generalGroup, element, translate, getIdOptions(element));\n  nameProps(generalGroup, element, bpmnFactory, canvas, translate, getNameOptions(element));\n  processProps(generalGroup, element, translate, getProcessOptions(element));\n  versionTag(generalGroup, element, translate);\n  executableProps(generalGroup, element, translate);\n  elementTemplateChooserProps(generalGroup, element, elementTemplates, translate);\n\n  var detailsGroup = {\n    id: 'details',\n    label: translate('Details'),\n    entries: []\n  };\n  serviceTaskDelegateProps(detailsGroup, element, bpmnFactory, translate);\n  userTaskProps(detailsGroup, element, translate);\n  scriptProps(detailsGroup, element, bpmnFactory, translate);\n  linkProps(detailsGroup, element, translate);\n  callActivityProps(detailsGroup, element, bpmnFactory, translate);\n  eventProps(detailsGroup, element, bpmnFactory, elementRegistry, translate);\n  errorProps(detailsGroup, element, bpmnFactory, translate);\n  conditionalProps(detailsGroup, element, bpmnFactory, translate);\n  startEventInitiator(detailsGroup, element, translate); // this must be the last element of the details group!\n\n  var multiInstanceGroup = {\n    id: 'multiInstance',\n    label: translate('Multi Instance'),\n    entries: []\n  };\n  multiInstanceProps(multiInstanceGroup, element, bpmnFactory, translate);\n\n  var asyncGroup = {\n    id : 'async',\n    label: translate('Asynchronous Continuations'),\n    entries : []\n  };\n  asynchronousContinuationProps(asyncGroup, element, bpmnFactory, translate);\n\n  var jobConfigurationGroup = {\n    id : 'jobConfiguration',\n    label : translate('Job Configuration'),\n    entries : [],\n    enabled: isJobConfigEnabled\n  };\n  jobConfiguration(jobConfigurationGroup, element, bpmnFactory, translate);\n\n  var externalTaskGroup = {\n    id : 'externalTaskConfiguration',\n    label : translate('External Task Configuration'),\n    entries : [],\n    enabled: isExternalTaskPriorityEnabled\n  };\n  externalTaskConfiguration(externalTaskGroup, element, bpmnFactory, translate);\n\n\n  var candidateStarterGroup = {\n    id: 'candidateStarterConfiguration',\n    label: translate('Candidate Starter Configuration'),\n    entries: []\n  };\n  candidateStarter(candidateStarterGroup, element, bpmnFactory, translate);\n\n  var historyTimeToLiveGroup = {\n    id: 'historyConfiguration',\n    label: translate('History Configuration'),\n    entries: []\n  };\n  historyTimeToLive(historyTimeToLiveGroup, element, bpmnFactory, translate);\n\n  var tasklistGroup = {\n    id: 'tasklist',\n    label: translate('Tasklist Configuration'),\n    entries: []\n  };\n  tasklist(tasklistGroup, element, bpmnFactory, translate);\n\n  var documentationGroup = {\n    id: 'documentation',\n    label: translate('Documentation'),\n    entries: []\n  };\n  documentationProps(documentationGroup, element, bpmnFactory, translate);\n\n  var groups = [];\n  groups.push(generalGroup);\n  groups.push(detailsGroup);\n  groups.push(externalTaskGroup);\n  groups.push(multiInstanceGroup);\n  groups.push(asyncGroup);\n  groups.push(jobConfigurationGroup);\n  groups.push(candidateStarterGroup);\n  groups.push(historyTimeToLiveGroup);\n  groups.push(tasklistGroup);\n  groups.push(documentationGroup);\n\n  return groups;\n}\n\nfunction createVariablesTabGroups(element, bpmnFactory, elementRegistry, translate) {\n  var variablesGroup = {\n    id : 'variables',\n    label : translate('Variables'),\n    entries: []\n  };\n  variableMapping(variablesGroup, element, bpmnFactory, translate);\n\n  return [\n    variablesGroup\n  ];\n}\n\nfunction createProcessVariablesTabGroups(element, translate) {\n  var processVariablesGroup = {\n    id : 'process-variables',\n    label : translate('Variables'),\n    entries: []\n  };\n\n  processVariablesProps(processVariablesGroup, element, translate);\n\n  return [\n    processVariablesGroup\n  ];\n}\n\nfunction createFormsTabGroups(element, bpmnFactory, elementRegistry, translate) {\n  var formGroup = {\n    id : 'forms',\n    label : translate('Forms'),\n    entries: []\n  };\n  formProps(formGroup, element, bpmnFactory, translate);\n\n  return [\n    formGroup\n  ];\n}\n\nfunction createListenersTabGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var listenersGroup = {\n    id : 'listeners',\n    label: translate('Listeners'),\n    entries: []\n  };\n\n  var options = listenerProps(listenersGroup, element, bpmnFactory, translate);\n\n  var listenerDetailsGroup = {\n    id: 'listener-details',\n    entries: [],\n    enabled: function(element, node) {\n      return options.getSelectedListener(element, node);\n    },\n    label: function(element, node) {\n      var param = options.getSelectedListener(element, node);\n      return getListenerLabel(param, translate);\n    }\n  };\n\n  listenerDetails(listenerDetailsGroup, element, bpmnFactory, options, translate);\n\n  var listenerFieldsGroup = {\n    id: 'listener-fields',\n    label: translate('Field Injection'),\n    entries: [],\n    enabled: function(element, node) {\n      return options.getSelectedListener(element, node);\n    }\n  };\n\n  listenerFields(listenerFieldsGroup, element, bpmnFactory, options, translate);\n\n  return [\n    listenersGroup,\n    listenerDetailsGroup,\n    listenerFieldsGroup\n  ];\n}\n\nfunction createInputOutputTabGroups(element, bpmnFactory, elementTemplates, translate) {\n\n  var inputParametersGroup = {\n    id: 'input-parameters',\n    label: translate('Input Parameters'),\n    entries: []\n  };\n\n  inputParameters(inputParametersGroup, element, bpmnFactory, elementTemplates, translate);\n\n  var outputParametersGroup = {\n    id: 'output-parameters',\n    label: translate('Output Parameters'),\n    entries: []\n  };\n\n  outputParameters(outputParametersGroup, element, bpmnFactory, elementTemplates, translate);\n\n  return [\n    inputParametersGroup,\n    outputParametersGroup\n  ];\n}\n\nfunction createConnectorTabGroups(element, bpmnFactory, elementRegistry, translate) {\n  var connectorDetailsGroup = {\n    id: 'connector-details',\n    label: translate('Details'),\n    entries: []\n  };\n\n  connectorDetails(connectorDetailsGroup, element, bpmnFactory, translate);\n\n  var connectorInputParametersGroup = {\n    id: 'connector-input-parameters',\n    label: translate('Input Parameters'),\n    entries: []\n  };\n\n  connectorInputParameters(connectorInputParametersGroup, element, bpmnFactory, translate);\n\n  var connectorOutputParametersGroup = {\n    id: 'connector-output-parameters',\n    label: translate('Output Parameters'),\n    entries: []\n  };\n\n  connectorOutputParameters(connectorOutputParametersGroup, element, bpmnFactory, translate);\n\n  return [\n    connectorDetailsGroup,\n    connectorInputParametersGroup,\n    connectorOutputParametersGroup\n  ];\n}\n\nfunction createFieldInjectionsTabGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var fieldGroup = {\n    id: 'field-injections-properties',\n    label: translate('Field Injections'),\n    entries: []\n  };\n\n  fieldInjections(fieldGroup, element, bpmnFactory, translate);\n\n  return [\n    fieldGroup\n  ];\n}\n\nfunction createExtensionElementsGroups(element, bpmnFactory, elementRegistry, translate) {\n\n  var propertiesGroup = {\n    id : 'extensionElements-properties',\n    label: translate('Properties'),\n    entries: []\n  };\n  properties(propertiesGroup, element, bpmnFactory, translate);\n\n  return [\n    propertiesGroup\n  ];\n}\n\n// Camunda Properties Provider /////////////////////////////////////\n\n\n/**\n * A properties provider for Camunda related properties.\n *\n * @param {BpmnFactory} bpmnFactory\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n * @param {ElementTemplates} elementTemplates\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {Replace} replace\n * @param {Selection} selection\n * @param {Translate} translate\n */\nfunction CamundaPropertiesProvider(\n    bpmnFactory,\n    canvas,\n    commandStack,\n    elementRegistry,\n    elementTemplates,\n    eventBus,\n    modeling,\n    replace,\n    selection,\n    translate\n) {\n  PropertiesActivator.call(this, eventBus);\n\n  this.getTabs = function(element) {\n\n    var generalTab = {\n      id: 'general',\n      label: translate('General'),\n      groups: createGeneralTabGroups(\n        element, canvas, bpmnFactory,\n        elementRegistry, elementTemplates, translate)\n    };\n\n    var elementTemplateTab = {\n      id: 'element-template',\n      label: translate('Template'),\n      groups: createElementTemplateGroups(\n        element,\n        bpmnFactory,\n        canvas,\n        commandStack,\n        elementTemplates,\n        modeling,\n        replace,\n        selection,\n        translate\n      )\n    };\n\n    var variablesTab = {\n      id: 'variables',\n      label: translate('Variables'),\n      groups: createVariablesTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var processVariablesTab = {\n      id: 'process-variables',\n      label: translate('Variables'),\n      groups: createProcessVariablesTabGroups(element, translate)\n    };\n\n    var formsTab = {\n      id: 'forms',\n      label: translate('Forms'),\n      groups: createFormsTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var listenersTab = {\n      id: 'listeners',\n      label: translate('Listeners'),\n      groups: createListenersTabGroups(element, bpmnFactory, elementRegistry, translate),\n      enabled: function(element) {\n        return !eventDefinitionHelper.getLinkEventDefinition(element)\n          || (!is(element, 'bpmn:IntermediateThrowEvent')\n          && eventDefinitionHelper.getLinkEventDefinition(element));\n      }\n    };\n\n    var inputOutputTab = {\n      id: 'input-output',\n      label: translate('Input/Output'),\n      groups: createInputOutputTabGroups(element, bpmnFactory, elementTemplates, translate)\n    };\n\n    var connectorTab = {\n      id: 'connector',\n      label: translate('Connector'),\n      groups: createConnectorTabGroups(element, bpmnFactory, elementRegistry, translate),\n      enabled: function(element) {\n        var bo = implementationTypeHelper.getServiceTaskLikeBusinessObject(element);\n        return bo && implementationTypeHelper.getImplementationType(bo) === 'connector';\n      }\n    };\n\n    var fieldInjectionsTab = {\n      id: 'field-injections',\n      label: translate('Field Injections'),\n      groups: createFieldInjectionsTabGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    var extensionsTab = {\n      id: 'extensionElements',\n      label: translate('Extensions'),\n      groups: createExtensionElementsGroups(element, bpmnFactory, elementRegistry, translate)\n    };\n\n    return [\n      generalTab,\n      elementTemplateTab,\n      variablesTab,\n      processVariablesTab,\n      connectorTab,\n      formsTab,\n      listenersTab,\n      inputOutputTab,\n      fieldInjectionsTab,\n      extensionsTab\n    ];\n  };\n\n}\n\nCamundaPropertiesProvider.$inject = [\n  'bpmnFactory',\n  'canvas',\n  'commandStack',\n  'elementRegistry',\n  'elementTemplates',\n  'eventBus',\n  'modeling',\n  'replace',\n  'selection',\n  'translate'\n];\n\ninherits(CamundaPropertiesProvider, PropertiesActivator);\n\nmodule.exports = CamundaPropertiesProvider;\n","'use strict';\n\nvar forEach = require('lodash/forEach');\n\nvar HANDLERS = {\n  'properties-panel.update-businessobject': require('./UpdateBusinessObjectHandler'),\n  'properties-panel.create-and-reference': require('./CreateAndReferenceHandler'),\n  'properties-panel.create-businessobject-list': require('./CreateBusinessObjectListHandler'),\n  'properties-panel.update-businessobject-list': require('./UpdateBusinessObjectListHandler'),\n  'properties-panel.multi-command-executor': require('./MultiCommandHandler')\n};\n\n\nfunction CommandInitializer(eventBus, commandStack) {\n\n  eventBus.on('diagram.init', function() {\n    forEach(HANDLERS, function(handler, id) {\n      commandStack.registerHandler(id, handler);\n    });\n  });\n}\n\nCommandInitializer.$inject = [ 'eventBus', 'commandStack' ];\n\nmodule.exports = {\n  __init__: [ CommandInitializer ]\n};","'use strict';\n\nvar domify = require('min-dom').domify,\n    domClasses = require('min-dom').classes,\n    domEvent = require('min-dom').event;\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar MAX_DESCRIPTION_LENGTH = 200;\n\n/**\n * Create a linkified and HTML escaped entry field description.\n *\n * As a special feature, this description may contain both markdown,\n * plain <a href> links and <br />\n *\n * @param {string} description\n * @param {object} [options]\n * @param {string} [options.show] - name of callback to determine whether description is shown\n */\nmodule.exports = function entryFieldDescription(translate, description, options) {\n  var show = options && options.show;\n\n  // we tokenize the description to extract text, HTML and markdown links\n  // text, links and new lines are handled seperately\n\n  var escaped = [];\n\n  // match markdown [{TEXT}]({URL}) and HTML links <a href=\"{URL}\">{TEXT}</a>\n  var pattern = /(?:\\[([^\\]]+)\\]\\((https?:\\/\\/[^)]+)\\))|(?:<a href=\"(https?:\\/\\/[^\"]+)\">(.+?(?=<\\/))<\\/a>)/gi;\n\n  var index = 0;\n  var match;\n  var link, text;\n\n  while ((match = pattern.exec(description))) {\n\n    // escape + insert text before match\n    if (match.index > index) {\n      escaped.push(escapeText(description.substring(index, match.index)));\n    }\n\n    link = match[2] && encodeURI(match[2]) || match[3];\n    text = match[1] || match[4];\n\n    // insert safe link\n    escaped.push('<a href=\"' + link + '\" target=\"_blank\">' + escapeText(text) + '</a>');\n\n    index = match.index + match[0].length;\n  }\n\n  // escape and insert text after last match\n  if (index < description.length) {\n    escaped.push(escapeText(description.substring(index)));\n  }\n\n  description = escaped.join('');\n\n  var html = domify(\n    '<div class=\"bpp-field-description description description--expanded\"' +\n    (show ? 'data-show=\"' + show + '\">' : '>') +\n    '</div>'\n  );\n\n  var descriptionText = domify('<span class=\"description__text\">' + description + '</span>');\n\n  html.appendChild(descriptionText);\n\n  function toggleExpanded(expanded) {\n    if (expanded) {\n      domClasses(html).add('description--expanded');\n\n      descriptionText.textContent = description + ' ';\n\n      expand.textContent = translate('Less');\n    } else {\n      domClasses(html).remove('description--expanded');\n\n      descriptionText.textContent = descriptionShortened + ' ... ';\n\n      expand.textContent = translate('More');\n    }\n  }\n\n  var descriptionShortened,\n      expand,\n      expanded = false;\n\n  if (description.length > MAX_DESCRIPTION_LENGTH) {\n    descriptionShortened = description.slice(0, MAX_DESCRIPTION_LENGTH);\n\n    expand = domify(\n      '<span class=\"bpp-entry-link description__expand\">' +\n        translate('More') +\n      '</span>'\n    );\n\n    domEvent.bind(expand, 'click', function() {\n      expanded = !expanded;\n\n      toggleExpanded(expanded);\n    });\n\n    html.appendChild(expand);\n\n    toggleExpanded(expanded);\n  }\n\n  return html;\n};\n\nfunction escapeText(text) {\n  var match, index = 0, escaped = [];\n\n  // match new line <br/> <br /> <br.... /> etc.\n  var pattern = /<br\\s*\\/?>/gi;\n\n  while ((match = pattern.exec(text))) {\n\n    if (match.index > index) {\n      escaped.push(escapeHTML(text.substring(index, match.index)));\n    }\n\n    escaped.push('<br />');\n\n    index = match.index + match[0].length;\n  }\n\n  if (index < text.length) {\n    escaped.push(escapeHTML(text.substring(index)));\n  }\n\n  return escaped.join('');\n}","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    escapeHTML = require('../../../../Utils').escapeHTML;\n\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar domClasses = require('min-dom').classes;\n\n/**\n * Get a property value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n * @param {string} propertyName\n *\n * @return {any} the property value\n */\nfunction getProperty(element, propertyName) {\n  var loopCharacteristics = getLoopCharacteristics(element);\n  return loopCharacteristics && loopCharacteristics.get(propertyName);\n}\n\n/**\n * Get the body of a given expression.\n *\n * @param {ModdleElement<bpmn:FormalExpression>} expression\n *\n * @return {string} the body (value) of the expression\n */\nfunction getBody(expression) {\n  return expression && expression.get('body');\n}\n\n\n/**\n * Get the loop characteristics of an element.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement<bpmn:MultiInstanceLoopCharacteristics>} the loop characteristics\n */\nfunction getLoopCharacteristics(element) {\n  var bo = getBusinessObject(element);\n  return bo.loopCharacteristics;\n}\n\n/**\n * Get the loop cardinality of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement<bpmn:FormalExpression>} an expression representing the loop cardinality\n */\nfunction getLoopCardinality(element) {\n  return getProperty(element, 'loopCardinality');\n}\n\n/**\n * Get the loop cardinality value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the loop cardinality value\n */\nfunction getLoopCardinalityValue(element) {\n  var loopCardinality = getLoopCardinality(element);\n  return getBody(loopCardinality);\n}\n\n/**\n * Get the completion condition of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement<bpmn:FormalExpression>} an expression representing the completion condition\n */\nfunction getCompletionCondition(element) {\n  return getProperty(element, 'completionCondition');\n}\n\n/**\n * Get the completion condition value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the completion condition value\n */\nfunction getCompletionConditionValue(element) {\n  var completionCondition = getCompletionCondition(element);\n  return getBody(completionCondition);\n}\n\n/**\n * Get the 'camunda:collection' attribute value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the 'camunda:collection' value\n */\nfunction getCollection(element) {\n  return getProperty(element, 'camunda:collection');\n}\n\n/**\n * Get the 'camunda:elementVariable' attribute value of the loop characteristics.\n *\n * @param {djs.model.Base} element\n *\n * @return {string} the 'camunda:elementVariable' value\n */\nfunction getElementVariable(element) {\n  return getProperty(element, 'camunda:elementVariable');\n}\n\n\n/**\n * Creates 'bpmn:FormalExpression' element.\n *\n * @param {ModdleElement} parent\n * @param {string} body\n * @param {BpmnFactory} bpmnFactory\n *\n * @result {ModdleElement<bpmn:FormalExpression>} a formal expression\n */\nfunction createFormalExpression(parent, body, bpmnFactory) {\n  return elementHelper.createElement('bpmn:FormalExpression', { body: body }, parent, bpmnFactory);\n}\n\n/**\n * Updates a specific formal expression of the loop characteristics.\n *\n * @param {djs.model.Base} element\n * @param {string} propertyName\n * @param {string} newValue\n * @param {BpmnFactory} bpmnFactory\n */\nfunction updateFormalExpression(element, propertyName, newValue, bpmnFactory) {\n  var loopCharacteristics = getLoopCharacteristics(element);\n\n  var expressionProps = {};\n\n  if (!newValue) {\n\n    // remove formal expression\n    expressionProps[propertyName] = undefined;\n    return cmdHelper.updateBusinessObject(element, loopCharacteristics, expressionProps);\n  }\n\n  var existingExpression = loopCharacteristics.get(propertyName);\n\n  if (!existingExpression) {\n\n    // add formal expression\n    expressionProps[propertyName] = createFormalExpression(loopCharacteristics, newValue, bpmnFactory);\n    return cmdHelper.updateBusinessObject(element, loopCharacteristics, expressionProps);\n  }\n\n  // edit existing formal expression\n  return cmdHelper.updateBusinessObject(element, existingExpression, {\n    body: newValue\n  });\n}\n\n\nmodule.exports = function(element, bpmnFactory, translate) {\n\n  var entries = [];\n\n  // error message /////////////////////////////////////////////////////////////////\n\n  entries.push({\n    id: 'multiInstance-errorMessage',\n    html: '<div data-show=\"isValid\">' +\n             '<span class=\"bpp-icon-warning\"></span> ' +\n             escapeHTML(translate('Must provide either loop cardinality or collection')) +\n          '</div>',\n\n    isValid: function(element, node, notification, scope) {\n      var loopCharacteristics = getLoopCharacteristics(element);\n\n      var isValid = true;\n      if (loopCharacteristics) {\n        var loopCardinality = getLoopCardinalityValue(element);\n        var collection = getCollection(element);\n\n        isValid = !loopCardinality && !collection;\n      }\n\n      domClasses(node).toggle('bpp-hidden', !isValid);\n      domClasses(notification).toggle('bpp-error-message', isValid);\n\n      return isValid;\n    }\n  });\n\n  // loop cardinality //////////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'multiInstance-loopCardinality',\n    label: translate('Loop Cardinality'),\n    modelProperty: 'loopCardinality',\n\n    get: function(element, node) {\n      return {\n        loopCardinality: getLoopCardinalityValue(element)\n      };\n    },\n\n    set: function(element, values) {\n      return updateFormalExpression(element, 'loopCardinality', values.loopCardinality, bpmnFactory);\n    }\n  }));\n\n\n  // collection //////////////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'multiInstance-collection',\n    label: translate('Collection'),\n    modelProperty: 'collection',\n\n    get: function(element, node) {\n      return {\n        collection: getCollection(element)\n      };\n    },\n\n    set: function(element, values) {\n      var loopCharacteristics = getLoopCharacteristics(element);\n      return cmdHelper.updateBusinessObject(element, loopCharacteristics, {\n        'camunda:collection': values.collection || undefined\n      });\n    },\n\n    validate: function(element, values, node) {\n      var collection = getCollection(element);\n      var elementVariable = getElementVariable(element);\n\n      if (!collection && elementVariable) {\n        return { collection : 'Must provide a value' };\n      }\n    }\n  }));\n\n\n  // element variable ////////////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'multiInstance-elementVariable',\n    label: translate('Element Variable'),\n    modelProperty: 'elementVariable',\n\n    get: function(element, node) {\n      return {\n        elementVariable: getElementVariable(element)\n      };\n    },\n\n    set: function(element, values) {\n      var loopCharacteristics = getLoopCharacteristics(element);\n      return cmdHelper.updateBusinessObject(element, loopCharacteristics, {\n        'camunda:elementVariable': values.elementVariable || undefined\n      });\n    }\n  }));\n\n\n  // Completion Condition //////////////////////////////////////////////////////\n\n  entries.push(entryFactory.textField(translate, {\n    id: 'multiInstance-completionCondition',\n    label: translate('Completion Condition'),\n    modelProperty: 'completionCondition',\n\n    get: function(element) {\n      return {\n        completionCondition: getCompletionConditionValue(element)\n      };\n    },\n\n    set: function(element, values) {\n      return updateFormalExpression(element, 'completionCondition', values.completionCondition, bpmnFactory);\n    }\n  }));\n\n  return entries;\n\n};\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\nvar domQuery = require('min-dom').query;\n\n\n/**\n * @param  {object} options\n * @param  {string} options.id\n * @param  {string} [options.title='']\n * @param  {string} [options.description='']\n * @param  {boolean} [options.open=false]\n * @param  {Function} [options.onToggle]\n * @param  {Function} [options.onRemove]\n *\n * @return {object}\n */\nfunction Collapsible(options) {\n\n  var id = options.id,\n      title = options.title || '',\n      description = options.description || '',\n      open = !!options.open || false,\n      onToggle = options.onToggle || noop,\n      onRemove = options.onRemove,\n      cssClasses = options.cssClasses || [];\n\n\n  var collapsibleEntry = {\n    id: id,\n    toggle: toggle,\n    isOpen: isOpen,\n    set: set,\n    setOpen: setOpen,\n    get: get\n  };\n\n  if (typeof onRemove === 'function') {\n    collapsibleEntry.onRemove = function(entry, entryNode, actionId, event) {\n      var commands = onRemove(entry, entryNode, actionId, event);\n\n      if (commands) {\n        scheduleCommands(commands, entryNode);\n        return true;\n      }\n    };\n  }\n\n  function get(element, entryNode) {\n    if (options.get) {\n      return options.get(element, entryNode);\n    }\n\n    return {\n      title: title || '',\n      description: description || ''\n    };\n  }\n\n  function set() {\n    var commands = this._commands;\n\n    if (commands) {\n      delete this._commands;\n      return commands;\n    }\n  }\n\n  function toggle(element, entryNode, event, scope) {\n    var value = !open;\n\n    setOpen(value, entryNode);\n    onToggle(value, entryNode);\n  }\n\n  /**\n   * Set entry's open state.\n   *\n   * @param {boolean} value\n   * @param {HTMLElement} entryNode\n   */\n  function setOpen(value, entryNode) {\n    open = value;\n    entryNode.classList.toggle('bpp-collapsible--collapsed', !value);\n  }\n\n  function isOpen() {\n    return open;\n  }\n\n  /**\n   * Schedule commands to be run with next `set` method call.\n   *\n   * @param {Array<any>} commands\n   * @param {HTMLElement} entryNode\n   */\n  function scheduleCommands(commands, entryNode) {\n    collapsibleEntry._commands = commands;\n\n    // @barmac: hack to make properties panel call `set`\n    var input = domQuery('input[type=\"hidden\"]', entryNode);\n    input.value = 1;\n  }\n\n  collapsibleEntry.html = '<div class=\"bpp-field-wrapper\" data-action=\"toggle\"><input name=\"hidden\" type=\"hidden\">' +\n    '<span class=\"bpp-collapsible__icon\"></span>' +\n    '<label class=\"bpp-collapsible__title\" data-value=\"title\">' + escapeHTML(title) + '</label>' +\n    '<label class=\"bpp-collapsible__description\" data-value=\"description\">' + escapeHTML(description) + '</label>' +\n    (onRemove ? '<button class=\"bpp-collapsible__remove action-button clear\" data-action=\"onRemove\"></button>' : '') +\n  '</div>';\n\n  collapsibleEntry.cssClasses = cssClasses.concat(open ?\n    [ 'bpp-collapsible' ] : [ 'bpp-collapsible', 'bpp-collapsible--collapsed' ]\n  );\n\n  return collapsibleEntry;\n}\n\nmodule.exports = Collapsible;\n\nfunction noop() {}\n","var createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\nmodule.exports = createBind;\n","'use strict';\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, errorEventDefinition, translate) {\n\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, errorEventDefinition, bpmnFactory, {\n    label: translate('Error'),\n    elementName: 'error',\n    elementType: 'bpmn:Error',\n    referenceProperty: 'errorRef',\n    newElementIdPrefix: 'Error_'\n  }));\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, errorEventDefinition, bpmnFactory, translate, {\n      id: 'error-element-name',\n      label: translate('Error Name'),\n      referenceProperty: 'errorRef',\n      modelProperty: 'name',\n      shouldValidate: true\n    })\n  );\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, errorEventDefinition, bpmnFactory, translate, {\n      id: 'error-element-code',\n      label: translate('Error Code'),\n      referenceProperty: 'errorRef',\n      modelProperty: 'errorCode'\n    })\n  );\n\n};\n","'use strict';\n\nvar domify = require('min-dom').domify;\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('../helper/CmdHelper'),\n    escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar checkbox = function(translate, options, defaultParameters) {\n  var resource = defaultParameters,\n      id = resource.id,\n      label = options.label || id,\n      canBeDisabled = !!options.disabled && typeof options.disabled === 'function',\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      description = options.description;\n\n  resource.html =\n    domify('<input id=\"camunda-' + escapeHTML(id) + '\" ' +\n         'type=\"checkbox\" ' +\n         'name=\"' + escapeHTML(options.modelProperty) + '\" ' +\n         (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n         (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n         ' />' +\n    '<label for=\"camunda-' + escapeHTML(id) + '\" ' +\n         (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n         (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n         '>' + escapeHTML(label) + '</label>');\n\n  // add description below checkbox entry field\n  if (description) {\n    resource.html.appendChild(entryFieldDescription(translate, description, { show: canBeHidden && 'isHidden' }));\n  }\n\n  resource.get = function(element) {\n    var bo = getBusinessObject(element),\n        res = {};\n\n    res[options.modelProperty] = bo.get(options.modelProperty);\n\n    return res;\n  };\n\n  resource.set = function(element, values) {\n    var res = {};\n\n    res[options.modelProperty] = !!values[options.modelProperty];\n\n    return cmdHelper.updateProperties(element, res);\n  };\n\n  if (typeof options.set === 'function') {\n    resource.set = options.set;\n  }\n\n  if (typeof options.get === 'function') {\n    resource.get = options.get;\n  }\n\n  if (canBeDisabled) {\n    resource.isDisabled = function() {\n      return options.disabled.apply(resource, arguments);\n    };\n  }\n\n  if (canBeHidden) {\n    resource.isHidden = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-checkbox'];\n\n  return resource;\n};\n\nmodule.exports = checkbox;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n *\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n * // => objects for ['fred', 'barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    asyncContinuation = require('./implementation/AsyncContinuation');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (is(element, 'camunda:AsyncCapable')) {\n\n    group.entries = group.entries.concat(asyncContinuation(element, bpmnFactory, {\n      getBusinessObject: getBusinessObject\n    }, translate));\n\n  }\n};","'use strict';\n\nvar collectionAdd = require('diagram-js/lib/util/Collections').add,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar CategoryHelper = {};\n\nmodule.exports = CategoryHelper;\n\n/**\n * Creates a new bpmn:CategoryValue inside a new bpmn:Category\n *\n * @param {ModdleElement} definitions\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement} categoryValue.\n */\nCategoryHelper.createCategoryValue = function(definitions, bpmnFactory) {\n  var categoryValue = bpmnFactory.create('bpmn:CategoryValue'),\n      category = bpmnFactory.create('bpmn:Category', {\n        categoryValue: [ categoryValue ]\n      });\n\n  // add to correct place\n  collectionAdd(definitions.get('rootElements'), category);\n  getBusinessObject(category).$parent = definitions;\n  getBusinessObject(categoryValue).$parent = category;\n\n  return categoryValue;\n\n};","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    elementHelper = require('../../../../helper/ElementHelper');\n\nvar assign = require('lodash/assign');\nvar map = require('lodash/map');\n\nvar DEFAULT_DELEGATE_PROPS = [ 'class', 'expression', 'delegateExpression' ];\n\nvar DELEGATE_PROPS = {\n  'camunda:class': undefined,\n  'camunda:expression': undefined,\n  'camunda:delegateExpression': undefined,\n  'camunda:resultVariable': undefined\n};\n\nvar DMN_CAPABLE_PROPS = {\n  'camunda:decisionRef': undefined,\n  'camunda:decisionRefBinding': 'latest',\n  'camunda:decisionRefVersion': undefined,\n  'camunda:mapDecisionResult': 'resultList',\n  'camunda:decisionRefTenantId': undefined\n};\n\n\nvar EXTERNAL_CAPABLE_PROPS = {\n  'camunda:type': undefined,\n  'camunda:topic': undefined\n};\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var DEFAULT_OPTIONS = [\n    { value: 'class', name: translate('Java Class') },\n    { value: 'expression', name: translate('Expression') },\n    { value: 'delegateExpression', name: translate('Delegate Expression') }\n  ];\n\n  var DMN_OPTION = [\n    { value: 'dmn', name: translate('DMN') }\n  ];\n\n  var EXTERNAL_OPTION = [\n    { value: 'external', name: translate('External') }\n  ];\n\n  var CONNECTOR_OPTION = [\n    { value: 'connector', name: translate('Connector') }\n  ];\n\n  var SCRIPT_OPTION = [\n    { value: 'script', name: translate('Script') }\n  ];\n\n  var getType = options.getImplementationType,\n      getBusinessObject = options.getBusinessObject;\n\n  var hasDmnSupport = options.hasDmnSupport,\n      hasExternalSupport = options.hasExternalSupport,\n      hasServiceTaskLikeSupport = options.hasServiceTaskLikeSupport,\n      hasScriptSupport = options.hasScriptSupport;\n\n  var entries = [];\n\n  var selectOptions = DEFAULT_OPTIONS.concat([]);\n\n  if (hasDmnSupport) {\n    selectOptions = selectOptions.concat(DMN_OPTION);\n  }\n\n  if (hasExternalSupport) {\n    selectOptions = selectOptions.concat(EXTERNAL_OPTION);\n  }\n\n  if (hasServiceTaskLikeSupport) {\n    selectOptions = selectOptions.concat(CONNECTOR_OPTION);\n  }\n\n  if (hasScriptSupport) {\n    selectOptions = selectOptions.concat(SCRIPT_OPTION);\n  }\n\n  selectOptions.push({ value: '' });\n\n  entries.push(entryFactory.selectBox(translate, {\n    id : 'implementation',\n    label: translate('Implementation'),\n    selectOptions: selectOptions,\n    modelProperty: 'implType',\n\n    get: function(element, node) {\n      return {\n        implType: getType(element) || ''\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      var oldType = getType(element);\n      var newType = values.implType;\n\n      var props = assign({}, DELEGATE_PROPS);\n\n      if (DEFAULT_DELEGATE_PROPS.indexOf(newType) !== -1) {\n\n        var newValue = '';\n        if (DEFAULT_DELEGATE_PROPS.indexOf(oldType) !== -1) {\n          newValue = bo.get('camunda:' + oldType);\n        }\n        props['camunda:' + newType] = newValue;\n      }\n\n      if (hasDmnSupport) {\n        props = assign(props, DMN_CAPABLE_PROPS);\n        if (newType === 'dmn') {\n          props['camunda:decisionRef'] = '';\n        }\n      }\n\n      if (hasExternalSupport) {\n        props = assign(props, EXTERNAL_CAPABLE_PROPS);\n        if (newType === 'external') {\n          props['camunda:type'] = 'external';\n          props['camunda:topic'] = '';\n        }\n      }\n\n      if (hasScriptSupport) {\n        props['camunda:script'] = undefined;\n\n        if (newType === 'script') {\n          props['camunda:script'] = elementHelper.createElement('camunda:Script', {}, bo, bpmnFactory);\n        }\n      }\n\n      var commands = [];\n      commands.push(cmdHelper.updateBusinessObject(element, bo, props));\n\n      if (hasServiceTaskLikeSupport) {\n        var connectors = extensionElementsHelper.getExtensionElements(bo, 'camunda:Connector');\n        commands.push(map(connectors, function(connector) {\n          return extensionElementsHelper.removeEntry(bo, element, connector);\n        }));\n\n        if (newType === 'connector') {\n          var extensionElements = bo.get('extensionElements');\n          if (!extensionElements) {\n            extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n            commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n          }\n          var connector = elementHelper.createElement('camunda:Connector', {}, extensionElements, bpmnFactory);\n          commands.push(cmdHelper.addAndRemoveElementsFromList(\n            element,\n            extensionElements,\n            'values',\n            'extensionElements',\n            [ connector ],\n            []\n          ));\n        }\n      }\n\n      return commands;\n\n    }\n  }));\n\n  return entries;\n\n};\n","'use strict';\n\nvar outputParameters = require('./implementation/OutputParameters');\n\nmodule.exports = function(group, element, bpmnFactory, elementTemplates, translate) {\n\n  var template = elementTemplates.get(element);\n\n  if (template) {\n    return;\n  }\n\n  var outputParametersEntry = outputParameters(element, bpmnFactory, {}, translate);\n\n  group.entries = group.entries.concat(outputParametersEntry.entries);\n};\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    entryFactory = require('../../../factory/EntryFactory'),\n    participantHelper = require('../../../helper/ParticipantHelper'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    nameEntryFactory = require('./implementation/Name'),\n    utils = require('../../../Utils');\n\nmodule.exports = function(group, element, translate, options) {\n  var businessObject = getBusinessObject(element);\n\n  var processIdDescription = options && options.processIdDescription;\n\n  if (is(element, 'bpmn:Process') || (is(element, 'bpmn:Participant') && businessObject.get('processRef'))) {\n\n    /**\n     * processId\n     */\n    if (is(element, 'bpmn:Participant')) {\n      var idEntry = entryFactory.validationAwareTextField(translate, {\n        id: 'process-id',\n        label: translate('Process Id'),\n        description: processIdDescription && translate(processIdDescription),\n        modelProperty: 'processId'\n      });\n\n      // in participants we have to change the default behavior of set and get\n      idEntry.get = function(element) {\n        var properties = participantHelper.getProcessBusinessObject(element, 'id');\n        return { processId: properties.id };\n      };\n\n      idEntry.set = function(element, values) {\n        return participantHelper.modifyProcessBusinessObject(element, 'id', { id: values.processId });\n      };\n\n      idEntry.validate = function(element, values) {\n        var idValue = values.processId;\n\n        var bo = getBusinessObject(element);\n\n        var processIdError = utils.isIdValid(bo.processRef, idValue, translate);\n\n        return processIdError ? { processId: processIdError } : {};\n      };\n\n      group.entries.push(idEntry);\n\n\n      /**\n       * process name\n       */\n      var processNameEntry = nameEntryFactory(element, {\n        id: 'process-name',\n        label: translate('Process Name')\n      })[0];\n\n      // in participants we have to change the default behavior of set and get\n      processNameEntry.get = function(element) {\n        return participantHelper.getProcessBusinessObject(element, 'name');\n      };\n\n      processNameEntry.set = function(element, values) {\n        return participantHelper.modifyProcessBusinessObject(element, 'name', values);\n      };\n\n      group.entries.push(processNameEntry);\n    }\n  }\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    getExtensionElements = require('./ExtensionElementsHelper').getExtensionElements;\n\nvar FormHelper = {};\n\nmodule.exports = FormHelper;\n\n/**\n * Return form data from business object or undefined if none exist\n *\n * @param  {djs.model.Base} element\n *\n * @return {ModdleElement|undefined} formData\n */\nFormHelper.getFormData = function(element) {\n  var bo = getBusinessObject(element);\n\n  var formData = getExtensionElements(bo, 'camunda:FormData');\n\n  if (typeof formData !== 'undefined') {\n    return formData[0];\n  }\n};\n\n\n/**\n * Return all form fields existing in the business object, and\n * an empty array if none exist.\n *\n * @param  {djs.model.Base} element\n *\n * @return {Array} a list of form field objects\n */\nFormHelper.getFormFields = function(element) {\n  var formData = this.getFormData(element);\n\n  if (typeof formData === 'undefined') {\n    return [];\n  }\n\n  return formData.fields || [];\n};\n\n\n/**\n * Get a form field from the business object at given index\n *\n * @param {djs.model.Base} element\n * @param {number} idx\n *\n * @return {ModdleElement} the form field\n */\nFormHelper.getFormField = function(element, idx) {\n\n  var formFields = this.getFormFields(element);\n\n  return formFields[idx];\n};\n\n\n/**\n * Get all constraints for a specific form field from the business object\n *\n * @param  {ModdleElement} formField\n *\n * @return {Array<ModdleElement>} a list of constraint objects\n */\nFormHelper.getConstraints = function(formField) {\n  if (formField && formField.validation && formField.validation.constraints) {\n    return formField.validation.constraints;\n  }\n  return [];\n};\n\n\n/**\n * Get all camunda:value objects for a specific form field from the business object\n *\n * @param  {ModdleElement} formField\n *\n * @return {Array<ModdleElement>} a list of camunda:value objects\n */\nFormHelper.getEnumValues = function(formField) {\n  if (formField && formField.values) {\n    return formField.values;\n  }\n  return [];\n};\n\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseFlatten = require('./_baseFlatten');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nmodule.exports = flattenDeep;\n","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementHelper = require('../../../../helper/ElementHelper');\n\nvar findExtension = require('../Helper').findExtension,\n    findExtensions = require('../Helper').findExtensions,\n    findInputParameter = require('../Helper').findInputParameter,\n    findOutputParameter = require('../Helper').findOutputParameter,\n    findCamundaProperty = require('../Helper').findCamundaProperty,\n    findCamundaInOut = require('../Helper').findCamundaInOut;\n\nvar createCamundaProperty = require('../CreateHelper').createCamundaProperty,\n    createInputParameter = require('../CreateHelper').createInputParameter,\n    createOutputParameter = require('../CreateHelper').createOutputParameter,\n    createCamundaIn = require('../CreateHelper').createCamundaIn,\n    createCamundaOut = require('../CreateHelper').createCamundaOut,\n    createCamundaInWithBusinessKey = require('../CreateHelper').createCamundaInWithBusinessKey,\n    createCamundaFieldInjection = require('../CreateHelper').createCamundaFieldInjection;\n\nvar PROPERTY_TYPE = 'property',\n    CAMUNDA_PROPERTY_TYPE = 'camunda:property',\n    CAMUNDA_INPUT_PARAMETER_TYPE = 'camunda:inputParameter',\n    CAMUNDA_OUTPUT_PARAMETER_TYPE = 'camunda:outputParameter',\n    CAMUNDA_IN_TYPE = 'camunda:in',\n    CAMUNDA_OUT_TYPE = 'camunda:out',\n    CAMUNDA_IN_BUSINESS_KEY_TYPE = 'camunda:in:businessKey',\n    CAMUNDA_EXECUTION_LISTENER_TYPE = 'camunda:executionListener',\n    CAMUNDA_FIELD = 'camunda:field';\n\nvar BASIC_MODDLE_TYPES = [\n  'Boolean',\n  'Integer',\n  'String'\n];\n\nvar EXTENSION_BINDING_TYPES = [\n  CAMUNDA_PROPERTY_TYPE,\n  CAMUNDA_INPUT_PARAMETER_TYPE,\n  CAMUNDA_OUTPUT_PARAMETER_TYPE,\n  CAMUNDA_IN_TYPE,\n  CAMUNDA_OUT_TYPE,\n  CAMUNDA_IN_BUSINESS_KEY_TYPE,\n  CAMUNDA_FIELD\n];\n\nvar IO_BINDING_TYPES = [\n  CAMUNDA_INPUT_PARAMETER_TYPE,\n  CAMUNDA_OUTPUT_PARAMETER_TYPE\n];\n\nvar IN_OUT_BINDING_TYPES = [\n  CAMUNDA_IN_TYPE,\n  CAMUNDA_OUT_TYPE,\n  CAMUNDA_IN_BUSINESS_KEY_TYPE\n];\n\n/**\n * Injects custom properties into the given group.\n *\n * @param {djs.model.Base} element\n * @param {ElementTemplates} elementTemplates\n * @param {BpmnFactory} bpmnFactory\n * @param {Function} translate\n */\nmodule.exports = function(element, elementTemplates, bpmnFactory, translate) {\n\n  var template = elementTemplates.get(element);\n\n  if (!template) {\n    return [];\n  }\n\n  var renderCustomField = function(id, p, idx) {\n    var propertyType = p.type;\n\n    var entryOptions = {\n      id: id,\n      description: p.description,\n      label: p.label ? translate(p.label) : p.label,\n      modelProperty: id,\n      get: propertyGetter(id, p),\n      set: propertySetter(id, p, bpmnFactory),\n      validate: propertyValidator(id, p, translate)\n    };\n\n    var entry;\n\n    if (!propertyType) {\n      propertyType = getDefaultType(p);\n    }\n\n    if (propertyType === 'Boolean') {\n      entry = entryFactory.checkbox(translate, entryOptions);\n    }\n\n    if (propertyType === 'String') {\n      entry = entryFactory.textField(translate, entryOptions);\n    }\n\n    if (propertyType === 'Text') {\n      entry = entryFactory.textBox(translate, entryOptions);\n    }\n\n    if (propertyType === 'Dropdown') {\n      entryOptions.selectOptions = p.choices;\n\n      entry = entryFactory.selectBox(translate, entryOptions);\n    }\n\n    return entry;\n  };\n\n  var groups = [];\n  var id, entry;\n\n  var customFieldsGroup = {\n    id: 'customField',\n    label: translate('Custom Fields'),\n    entries: []\n  };\n  template.properties.forEach(function(p, idx) {\n\n    id = 'custom-' + template.id + '-' + idx;\n\n    entry = renderCustomField(id, p, idx);\n    if (entry) {\n      customFieldsGroup.entries.push(entry);\n    }\n  });\n  if (customFieldsGroup.entries.length > 0) {\n    groups.push(customFieldsGroup);\n  }\n\n  if (template.scopes) {\n    for (var scopeName in template.scopes) {\n\n      var scope = template.scopes[scopeName];\n      var idScopeName = scopeName.replace(/:/g, '_');\n\n      var customScopeFieldsGroup = {\n        id: 'customField-' + idScopeName,\n        label: translate('Custom Fields for scope: ') + scopeName,\n        entries: []\n      };\n\n      scope.properties.forEach(function(p, idx) {\n\n        var propertyId = 'custom-' + template.id + '-' + idScopeName + '-' + idx;\n\n        var scopedProperty = propertyWithScope(p, scopeName);\n\n        entry = renderCustomField(propertyId, scopedProperty, idx);\n        if (entry) {\n          customScopeFieldsGroup.entries.push(entry);\n        }\n      });\n\n      if (customScopeFieldsGroup.entries.length > 0) {\n        groups.push(customScopeFieldsGroup);\n      }\n    }\n  }\n\n  return groups;\n};\n\n\n// getters, setters and validators ///////////////\n\n\n/**\n * Return a getter that retrieves the given property.\n *\n * @param {String} name\n * @param {PropertyDescriptor} property\n *\n * @return {Function}\n */\nfunction propertyGetter(name, property) {\n\n  /* getter */\n  return function get(element) {\n    var value = getPropertyValue(element, property);\n\n    return objectWithKey(name, value);\n  };\n}\n\n/**\n * Return a setter that updates the given property.\n *\n * @param {String} name\n * @param {PropertyDescriptor} property\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {Function}\n */\nfunction propertySetter(name, property, bpmnFactory) {\n\n  /* setter */\n  return function set(element, values) {\n\n    var value = values[name];\n\n    return setPropertyValue(element, property, value, bpmnFactory);\n  };\n}\n\n/**\n * Return a validator that ensures the property is ok.\n *\n * @param {String} name\n * @param {PropertyDescriptor} property\n * @param {Function} translate\n *\n * @return {Function}\n */\nfunction propertyValidator(name, property, translate) {\n\n  /* validator */\n  return function validate(element, values) {\n    var value = values[name];\n\n    var error = validateValue(value, property, translate);\n\n    if (error) {\n      return objectWithKey(name, error);\n    }\n  };\n}\n\n\n// get, set and validate helpers ///////////////////\n\n/**\n * Return the value of the specified property descriptor,\n * on the passed diagram element.\n *\n * @param {djs.model.Base} element\n * @param {PropertyDescriptor} property\n *\n * @return {Any}\n */\nfunction getPropertyValue(element, property) {\n\n  var bo = getBusinessObject(element);\n\n  var binding = property.binding,\n      scope = property.scope;\n\n  var bindingType = binding.type,\n      bindingName = binding.name;\n\n  var propertyValue = property.value || '';\n\n  if (scope) {\n    bo = findExtension(bo, scope.name);\n    if (!bo) {\n      return propertyValue;\n    }\n  }\n\n  // property\n  if (bindingType === 'property') {\n\n    var value = bo.get(bindingName);\n\n    if (bindingName === 'conditionExpression') {\n      if (value) {\n        return value.body;\n      } else {\n\n        // return defined default\n        return propertyValue;\n      }\n    } else {\n\n      // return value; default to defined default\n      return typeof value !== 'undefined' ? value : propertyValue;\n    }\n  }\n\n  var camundaProperties,\n      camundaProperty;\n\n  if (bindingType === CAMUNDA_PROPERTY_TYPE) {\n    if (scope) {\n      camundaProperties = bo.get('properties');\n    } else {\n      camundaProperties = findExtension(bo, 'camunda:Properties');\n    }\n\n    if (camundaProperties) {\n      camundaProperty = findCamundaProperty(camundaProperties, binding);\n\n      if (camundaProperty) {\n        return camundaProperty.value;\n      }\n    }\n\n    return propertyValue;\n  }\n\n  var inputOutput,\n      ioParameter;\n\n  if (IO_BINDING_TYPES.indexOf(bindingType) !== -1) {\n\n    if (scope) {\n      inputOutput = bo.get('inputOutput');\n    } else {\n      inputOutput = findExtension(bo, 'camunda:InputOutput');\n    }\n\n    if (!inputOutput) {\n\n      // ioParameter cannot exist yet, return property value\n      return propertyValue;\n    }\n  }\n\n  // camunda input parameter\n  if (bindingType === CAMUNDA_INPUT_PARAMETER_TYPE) {\n    ioParameter = findInputParameter(inputOutput, binding);\n\n    if (ioParameter) {\n      if (binding.scriptFormat) {\n        if (ioParameter.definition) {\n          return ioParameter.definition.value;\n        }\n      } else {\n        return ioParameter.value || '';\n      }\n    }\n\n    return propertyValue;\n  }\n\n  // camunda output parameter\n  if (binding.type === CAMUNDA_OUTPUT_PARAMETER_TYPE) {\n    ioParameter = findOutputParameter(inputOutput, binding);\n\n    if (ioParameter) {\n      return ioParameter.name;\n    }\n\n    return propertyValue;\n  }\n\n\n  var ioElement;\n\n  if (IN_OUT_BINDING_TYPES.indexOf(bindingType) != -1) {\n    ioElement = findCamundaInOut(bo, binding);\n\n    if (ioElement) {\n      if (bindingType === CAMUNDA_IN_BUSINESS_KEY_TYPE) {\n        return ioElement.businessKey;\n      } else\n      if (bindingType === CAMUNDA_OUT_TYPE) {\n        return ioElement.target;\n      } else\n      if (bindingType === CAMUNDA_IN_TYPE) {\n        return ioElement[binding.expression ? 'sourceExpression' : 'source'];\n      }\n    }\n\n    return propertyValue;\n  }\n\n  if (bindingType === CAMUNDA_EXECUTION_LISTENER_TYPE) {\n    var executionListener;\n    if (scope) {\n      executionListener = bo.get('executionListener');\n    } else {\n      executionListener = findExtension(bo, 'camunda:ExecutionListener');\n    }\n\n    return executionListener.script.value;\n  }\n\n  var fieldInjection;\n  if (CAMUNDA_FIELD === bindingType) {\n    var fieldInjections = findExtensions(bo, [ 'camunda:Field' ]);\n    fieldInjections.forEach(function(item) {\n      if (item.name === binding.name) {\n        fieldInjection = item;\n      }\n    });\n    if (fieldInjection) {\n      return fieldInjection.string || fieldInjection.expression;\n    } else {\n      return '';\n    }\n  }\n\n  throw unknownPropertyBinding(property);\n}\n\nmodule.exports.getPropertyValue = getPropertyValue;\n\n\n/**\n * Return an update operation that changes the diagram\n * element's custom property to the given value.\n *\n * The response of this method will be processed via\n * {@link PropertiesPanel#applyChanges}.\n *\n * @param {djs.model.Base} element\n * @param {PropertyDescriptor} property\n * @param {String} value\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {Object|Array<Object>} results to be processed\n */\nfunction setPropertyValue(element, property, value, bpmnFactory) {\n  var bo = getBusinessObject(element);\n\n  var binding = property.binding,\n      scope = property.scope;\n\n  var bindingType = binding.type,\n      bindingName = binding.name;\n\n  var propertyValue;\n\n  var updates = [];\n\n  var extensionElements;\n\n  if (EXTENSION_BINDING_TYPES.indexOf(bindingType) !== -1) {\n    extensionElements = bo.get('extensionElements');\n\n    // create extension elements, if they do not exist (yet)\n    if (!extensionElements) {\n      extensionElements = elementHelper.createElement('bpmn:ExtensionElements', null, element, bpmnFactory);\n\n      updates.push(cmdHelper.updateBusinessObject(\n        element, bo, objectWithKey('extensionElements', extensionElements)\n      ));\n    }\n  }\n\n  if (scope) {\n    bo = findExtension(bo, scope.name);\n    if (!bo) {\n      bo = elementHelper.createElement(scope.name, null, element, bpmnFactory);\n\n      updates.push(cmdHelper.addElementsTolist(\n        bo, extensionElements, 'values', [ bo ]\n      ));\n    }\n  }\n\n  // property\n  if (bindingType === 'property') {\n\n    if (bindingName === 'conditionExpression') {\n\n      propertyValue = elementHelper.createElement('bpmn:FormalExpression', {\n        body: value,\n        language: binding.scriptFormat\n      }, bo, bpmnFactory);\n    } else {\n\n      var moddlePropertyDescriptor = bo.$descriptor.propertiesByName[bindingName];\n\n      var moddleType = moddlePropertyDescriptor.type;\n\n      // make sure we only update String, Integer, Real and\n      // Boolean properties (do not accidentally override complex objects...)\n      if (BASIC_MODDLE_TYPES.indexOf(moddleType) === -1) {\n        throw new Error('cannot set moddle type <' + moddleType + '>');\n      }\n\n      if (moddleType === 'Boolean') {\n        propertyValue = !!value;\n      } else\n      if (moddleType === 'Integer') {\n        propertyValue = parseInt(value, 10);\n\n        if (isNaN(propertyValue)) {\n\n          // do not write NaN value\n          propertyValue = undefined;\n        }\n      } else {\n        propertyValue = value;\n      }\n    }\n\n    if (propertyValue !== undefined) {\n      updates.push(cmdHelper.updateBusinessObject(\n        element, bo, objectWithKey(bindingName, propertyValue)\n      ));\n    }\n  }\n\n  // camunda:property\n  var camundaProperties,\n      existingCamundaProperty,\n      newCamundaProperty;\n\n  if (bindingType === CAMUNDA_PROPERTY_TYPE) {\n\n    if (scope) {\n      camundaProperties = bo.get('properties');\n    } else {\n      camundaProperties = findExtension(extensionElements, 'camunda:Properties');\n    }\n\n    if (!camundaProperties) {\n      camundaProperties = elementHelper.createElement('camunda:Properties', null, bo, bpmnFactory);\n\n      if (scope) {\n        updates.push(cmdHelper.updateBusinessObject(\n          element, bo, { properties: camundaProperties }\n        ));\n      }\n      else {\n        updates.push(cmdHelper.addElementsTolist(\n          element, extensionElements, 'values', [ camundaProperties ]\n        ));\n      }\n    }\n\n    existingCamundaProperty = findCamundaProperty(camundaProperties, binding);\n\n    newCamundaProperty = createCamundaProperty(binding, value, bpmnFactory);\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      camundaProperties,\n      'values',\n      null,\n      [ newCamundaProperty ],\n      existingCamundaProperty ? [ existingCamundaProperty ] : []\n    ));\n  }\n\n  // camunda:inputParameter\n  // camunda:outputParameter\n  var inputOutput,\n      existingIoParameter,\n      newIoParameter;\n\n  if (IO_BINDING_TYPES.indexOf(bindingType) !== -1) {\n\n    if (scope) {\n      inputOutput = bo.get('inputOutput');\n    } else {\n      inputOutput = findExtension(extensionElements, 'camunda:InputOutput');\n    }\n\n    // create inputOutput element, if it do not exist (yet)\n    if (!inputOutput) {\n      inputOutput = elementHelper.createElement('camunda:InputOutput', null, bo, bpmnFactory);\n\n      if (scope) {\n        updates.push(cmdHelper.updateBusinessObject(\n          element, bo, { inputOutput: inputOutput }\n        ));\n      }\n      else {\n        updates.push(cmdHelper.addElementsTolist(\n          element, extensionElements, 'values', inputOutput\n        ));\n      }\n    }\n  }\n\n  if (bindingType === CAMUNDA_INPUT_PARAMETER_TYPE) {\n\n    existingIoParameter = findInputParameter(inputOutput, binding);\n\n    newIoParameter = createInputParameter(binding, value, bpmnFactory);\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      inputOutput,\n      'inputParameters',\n      null,\n      [ newIoParameter ],\n      existingIoParameter ? [ existingIoParameter ] : []\n    ));\n  }\n\n  if (bindingType === CAMUNDA_OUTPUT_PARAMETER_TYPE) {\n\n    existingIoParameter = findOutputParameter(inputOutput, binding);\n\n    newIoParameter = createOutputParameter(binding, value, bpmnFactory);\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      inputOutput,\n      'outputParameters',\n      null,\n      [ newIoParameter ],\n      existingIoParameter ? [ existingIoParameter ] : []\n    ));\n  }\n\n\n  // camunda:in\n  // camunda:out\n  // camunda:in:businessKey\n  var existingInOut,\n      newInOut;\n\n  if (IN_OUT_BINDING_TYPES.indexOf(bindingType) !== -1) {\n\n    existingInOut = findCamundaInOut(bo, binding);\n\n    if (bindingType === CAMUNDA_IN_TYPE) {\n      newInOut = createCamundaIn(binding, value, bpmnFactory);\n    } else\n    if (bindingType === CAMUNDA_OUT_TYPE) {\n      newInOut = createCamundaOut(binding, value, bpmnFactory);\n    } else {\n      newInOut = createCamundaInWithBusinessKey(binding, value, bpmnFactory);\n    }\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      extensionElements,\n      'values',\n      null,\n      [ newInOut ],\n      existingInOut ? [ existingInOut ] : []\n    ));\n  }\n\n  if (bindingType === CAMUNDA_FIELD) {\n    var existingFieldInjections = findExtensions(bo, [ 'camunda:Field' ]);\n    var newFieldInjections = [];\n\n    if (existingFieldInjections.length > 0) {\n      existingFieldInjections.forEach(function(item) {\n        if (item.name === binding.name) {\n          newFieldInjections.push(createCamundaFieldInjection(binding, value, bpmnFactory));\n        } else {\n          newFieldInjections.push(item);\n        }\n      });\n    } else {\n      newFieldInjections.push(createCamundaFieldInjection(binding, value, bpmnFactory));\n    }\n\n    updates.push(cmdHelper.addAndRemoveElementsFromList(\n      element,\n      extensionElements,\n      'values',\n      null,\n      newFieldInjections,\n      existingFieldInjections ? existingFieldInjections : []\n    ));\n  }\n\n  if (updates.length) {\n    return updates;\n  }\n\n  // quick warning for better debugging\n  console.warn('no update', element, property, value);\n}\n\nmodule.exports.setPropertyValue = setPropertyValue;\n\n/**\n * Validate value of a given property.\n *\n * @param {String} value\n * @param {PropertyDescriptor} property\n * @param {Function} translate\n *\n * @return {Object} with validation errors\n */\nfunction validateValue(value, property, translate) {\n\n  var constraints = property.constraints || {};\n\n  if (constraints.notEmpty && isEmpty(value)) {\n    return translate('Must not be empty');\n  }\n\n  if (constraints.maxLength && value.length > constraints.maxLength) {\n    return translate('Must have max length {length}', { length: constraints.maxLength });\n  }\n\n  if (constraints.minLength && value.length < constraints.minLength) {\n    return translate('Must have min length {length}', { length: constraints.minLength });\n  }\n\n  var pattern = constraints.pattern,\n      message;\n\n  if (pattern) {\n\n    if (typeof pattern !== 'string') {\n      message = pattern.message;\n      pattern = pattern.value;\n    }\n\n    if (!matchesPattern(value, pattern)) {\n      return message || translate('Must match pattern {pattern}', { pattern: pattern });\n    }\n  }\n}\n\n\n// misc helpers ///////////////////////////////\n\nfunction propertyWithScope(property, scopeName) {\n  if (!scopeName) {\n    return property;\n  }\n\n  return assign({}, property, {\n    scope: {\n      name: scopeName\n    }\n  });\n}\n\n/**\n * Return an object with a single key -> value association.\n *\n * @param {String} key\n * @param {Any} value\n *\n * @return {Object}\n */\nfunction objectWithKey(key, value) {\n  var obj = {};\n\n  obj[key] = value;\n\n  return obj;\n}\n\n/**\n * Does the given string match the specified pattern?\n *\n * @param {String} str\n * @param {String} pattern\n *\n * @return {Boolean}\n */\nfunction matchesPattern(str, pattern) {\n  var regexp = new RegExp(pattern);\n\n  return regexp.test(str);\n}\n\nfunction isEmpty(str) {\n  return !str || /^\\s*$/.test(str);\n}\n\n/**\n * Create a new {@link Error} indicating an unknown\n * property binding.\n *\n * @param {PropertyDescriptor} property\n *\n * @return {Error}\n */\nfunction unknownPropertyBinding(property) {\n  var binding = property.binding;\n\n  return new Error('unknown binding: <' + binding.type + '>');\n}\n\nfunction getDefaultType(property) {\n  var binding = property.binding,\n      bindingType = binding.type;\n\n  if (bindingType === PROPERTY_TYPE ||\n      bindingType === CAMUNDA_PROPERTY_TYPE ||\n      bindingType === CAMUNDA_IN_TYPE ||\n      bindingType === CAMUNDA_IN_BUSINESS_KEY_TYPE ||\n      bindingType === CAMUNDA_OUT_TYPE ||\n      bindingType === CAMUNDA_FIELD) {\n    return 'String';\n  }\n\n  if (bindingType === CAMUNDA_EXECUTION_LISTENER_TYPE) {\n    return 'Hidden';\n  }\n}\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar asyncCapableHelper = require('../../../../helper/AsyncCapableHelper');\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    eventDefinitionHelper = require('../../../../helper/EventDefinitionHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nfunction isAsyncBefore(bo) {\n  return asyncCapableHelper.isAsyncBefore(bo);\n}\n\nfunction isAsyncAfter(bo) {\n  return asyncCapableHelper.isAsyncAfter(bo);\n}\n\nfunction getFailedJobRetryTimeCycle(bo) {\n  return asyncCapableHelper.getFailedJobRetryTimeCycle(bo);\n}\n\nfunction removeFailedJobRetryTimeCycle(bo, element) {\n  return asyncCapableHelper.removeFailedJobRetryTimeCycle(bo, element);\n}\n\nfunction createExtensionElements(parent, bpmnFactory) {\n  return elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, parent, bpmnFactory);\n}\n\nfunction createFailedJobRetryTimeCycle(parent, bpmnFactory, cycle) {\n  return elementHelper.createElement('camunda:FailedJobRetryTimeCycle', { body: cycle }, parent, bpmnFactory);\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var idPrefix = options.idPrefix || '',\n      labelPrefix = options.labelPrefix || '';\n\n  var retryTimeCycleEntry = entryFactory.textField(translate, {\n    id: idPrefix + 'retryTimeCycle',\n    label: labelPrefix + translate('Retry Time Cycle'),\n    modelProperty: 'cycle',\n\n    get: function(element, node) {\n      var retryTimeCycle = getFailedJobRetryTimeCycle(getBusinessObject(element));\n      var value = retryTimeCycle && retryTimeCycle.get('body');\n      return {\n        cycle: value\n      };\n    },\n\n    set: function(element, values, node) {\n      var newCycle = values.cycle;\n      var bo = getBusinessObject(element);\n\n      if (newCycle === '' || typeof newCycle === 'undefined') {\n\n        // remove retry time cycle element(s)\n        return removeFailedJobRetryTimeCycle(bo, element);\n      }\n\n      var retryTimeCycle = getFailedJobRetryTimeCycle(bo);\n\n      if (!retryTimeCycle) {\n\n        // add new retry time cycle element\n        var commands = [];\n\n        var extensionElements = bo.get('extensionElements');\n        if (!extensionElements) {\n          extensionElements = createExtensionElements(bo, bpmnFactory);\n          commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n        }\n\n        retryTimeCycle = createFailedJobRetryTimeCycle(extensionElements, bpmnFactory, newCycle);\n        commands.push(cmdHelper.addAndRemoveElementsFromList(\n          element,\n          extensionElements,\n          'values',\n          'extensionElements',\n          [ retryTimeCycle ],\n          []\n        ));\n\n        return commands;\n      }\n\n      // update existing retry time cycle element\n      return cmdHelper.updateBusinessObject(element, retryTimeCycle, { body: newCycle });\n    },\n\n    hidden: function(element) {\n      var bo = getBusinessObject(element);\n\n      if (bo && (isAsyncBefore(bo) || isAsyncAfter(bo))) {\n        return false;\n      }\n\n      if (is(element, 'bpmn:Event')) {\n        return !eventDefinitionHelper.getTimerEventDefinition(element);\n      }\n\n      return true;\n    }\n\n  });\n\n  return [ retryTimeCycleEntry ];\n\n};\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","'use strict';\n\nvar domQuery = require('min-dom').query,\n    escapeHTML = require('../../../../Utils').escapeHTML,\n    utils = require('../../../../Utils');\n\n\nfunction getScriptType(node, idPrefix) {\n\n  // if we have an idPrefix, work with specific selector\n  var selector;\n\n  if (idPrefix && idPrefix != '') {\n    selector = 'select[id=\"' + idPrefix + 'cam-script-type\"]';\n  } else {\n    selector = 'select[name=\"scriptType\"]';\n  }\n\n  return utils.selectedType(selector, node.parentElement);\n}\n\n\nmodule.exports = function(scriptLanguagePropName, scriptValuePropName, isFormatRequired, translate, options) {\n  var idPrefix = options && options.idPrefix || '';\n\n  return {\n    template:\n    '<div class=\"bpp-row bpp-textfield\">' +\n      '<label for=\"' + idPrefix + 'cam-script-format\">' + escapeHTML(translate('Script Format')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\">' +\n        '<input id=\"' + idPrefix + 'cam-script-format\" type=\"text\" name=\"scriptFormat\" />' +\n        '<button class=\"action-button clear\" data-action=\"script.clearScriptFormat\" data-show=\"script.canClearScriptFormat\">' +\n          '<span>X</span>' +\n        '</button>' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"bpp-row\">' +\n      '<label for=\"' + idPrefix + 'cam-script-type\">' + escapeHTML(translate('Script Type')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\">' +\n        '<select id=\"' + idPrefix + 'cam-script-type\" name=\"scriptType\" data-value>' +\n          '<option value=\"script\" selected>' + escapeHTML(translate('Inline Script')) + '</option>' +\n          '<option value=\"scriptResource\">' + escapeHTML(translate('External Resource')) + '</option>' +\n        '</select>' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"bpp-row bpp-textfield\">' +\n      '<label for=\"' + idPrefix + 'cam-script-resource-val\" data-show=\"script.isScriptResource\">' + escapeHTML(translate('Resource')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\" data-show=\"script.isScriptResource\">' +\n        '<input id=\"' + idPrefix + 'cam-script-resource-val\" type=\"text\" name=\"scriptResourceValue\" />' +\n        '<button class=\"action-button clear\" data-action=\"script.clearScriptResource\" data-show=\"script.canClearScriptResource\">' +\n          '<span>X</span>' +\n        '</button>' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"bpp-row\">' +\n      '<label for=\"' + idPrefix + 'cam-script-val\" data-show=\"script.isScript\">' + escapeHTML(translate('Script')) + '</label>' +\n      '<div class=\"bpp-field-wrapper\" data-show=\"script.isScript\">' +\n        '<textarea id=\"' + idPrefix + 'cam-script-val\" type=\"text\" name=\"scriptValue\"></textarea>' +\n      '</div>'+\n    '</div>',\n\n    get: function(element, bo) {\n      var values = {};\n\n      // read values from xml:\n      var boScriptResource = bo.get('camunda:resource'),\n          boScript = bo.get(scriptValuePropName),\n          boScriptFormat = bo.get(scriptLanguagePropName);\n\n      if (typeof boScriptResource !== 'undefined') {\n        values.scriptResourceValue = boScriptResource;\n        values.scriptType = 'scriptResource';\n      } else {\n        values.scriptValue = boScript;\n        values.scriptType = 'script';\n      }\n\n      values.scriptFormat = boScriptFormat;\n\n      return values;\n    },\n\n    set: function(element, values, containerElement) {\n      var scriptFormat = values.scriptFormat,\n          scriptType = values.scriptType,\n          scriptResourceValue = values.scriptResourceValue,\n          scriptValue = values.scriptValue;\n\n      // init update\n      var update = {\n        'camunda:resource': undefined\n      };\n      update[scriptValuePropName] = undefined;\n      update[scriptLanguagePropName] = undefined;\n\n      if (isFormatRequired) {\n\n        // always set language\n        update[scriptLanguagePropName] = scriptFormat || '';\n      } else\n\n      // set language only when scriptFormat has a value\n      if (scriptFormat !== '') {\n        update[scriptLanguagePropName] = scriptFormat;\n      }\n\n      // set either inline script or resource\n      if ('scriptResource' === scriptType) {\n        update['camunda:resource'] = scriptResourceValue || '';\n      } else {\n        update[scriptValuePropName] = scriptValue || '';\n      }\n\n      return update;\n    },\n\n    validate: function(element, values) {\n      var validationResult = {};\n\n      if (values.scriptType === 'script' && !values.scriptValue) {\n        validationResult.scriptValue = translate('Must provide a value');\n      }\n\n      if (values.scriptType === 'scriptResource' && !values.scriptResourceValue) {\n        validationResult.scriptResourceValue = translate('Must provide a value');\n      }\n\n      if (isFormatRequired && (!values.scriptFormat || values.scriptFormat.length === 0)) {\n        validationResult.scriptFormat = translate('Must provide a value');\n      }\n\n      return validationResult;\n    },\n\n    clearScriptFormat: function(element, inputNode, btnNode, scopeNode) {\n      domQuery('input[name=scriptFormat]', scopeNode).value='';\n\n      return true;\n    },\n\n    canClearScriptFormat: function(element, inputNode, btnNode, scopeNode) {\n      var input = domQuery('input[name=scriptFormat]', scopeNode);\n\n      return input.value !== '';\n    },\n\n    clearScriptResource: function(element, inputNode, btnNode, scopeNode) {\n      domQuery('input[name=scriptResourceValue]', scopeNode).value='';\n\n      return true;\n    },\n\n    canClearScriptResource: function(element, inputNode, btnNode, scopeNode) {\n      var input = domQuery('input[name=scriptResourceValue]', scopeNode);\n\n      return input.value !== '';\n    },\n\n    clearScript: function(element, inputNode, btnNode, scopeNode) {\n      domQuery('textarea[name=scriptValue]', scopeNode).value='';\n\n      return true;\n    },\n\n    canClearScript: function(element, inputNode, btnNode, scopeNode) {\n      var input = domQuery('textarea[name=scriptValue]', scopeNode);\n\n      return input.value !== '';\n    },\n\n    isScriptResource: function(element, inputNode, btnNode, scopeNode) {\n      var scriptType = getScriptType(scopeNode, idPrefix);\n      return scriptType === 'scriptResource';\n    },\n\n    isScript: function(element, inputNode, btnNode, scopeNode) {\n      var scriptType = getScriptType(scopeNode, idPrefix);\n      return scriptType === 'script';\n    }\n\n  };\n\n};\n","'use strict';\n\nvar inputParameters = require('./implementation/InputParameters');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var inputParametersEntry = inputParameters(element, bpmnFactory, {\n    idPrefix: 'connector-',\n    insideConnector: true\n  }, translate);\n\n  group.entries = group.entries.concat(inputParametersEntry.entries);\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    inputOutputHelper = require('../../../../helper/InputOutputHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils');\n\nvar entryFieldDescription = require('../../../../factory/EntryFieldDescription');\n\nvar domQuery = require('min-dom').query;\n\nvar InputOutputParameter = require('./InputOutputParameter');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  options = options || {};\n\n  var insideConnector = !!options.insideConnector,\n      idPrefix = options.idPrefix || '';\n\n  var result = {};\n\n  var entries = result.entries = [];\n\n  if (!inputOutputHelper.isInputOutputSupported(element, insideConnector) ||\n    !inputOutputHelper.areOutputParametersSupported(element, insideConnector)) {\n    return result;\n  }\n\n  var parametersOptions = {\n    insideConnector: insideConnector,\n    idPrefix: idPrefix\n  };\n\n  // output parameters ///////////////////////////////////////////////////////\n  entries.push(\n    getParametersHeading(element, bpmnFactory, {\n      idPrefix: idPrefix,\n      insideConnector: insideConnector,\n      type: 'camunda:OutputParameter',\n      prop: 'outputParameters',\n      prefix: 'Output'\n    }));\n\n  append(entries,\n    getOutputParameterEntries(element, bpmnFactory, parametersOptions, translate)\n  );\n\n  return result;\n};\n\nfunction getParametersHeading(element, bpmnFactory, options) {\n  var idPrefix = options.idPrefix || '',\n      prefix = options.prefix,\n      type = options.type,\n      prop = options.prop,\n      insideConnector = options.insideConnector;\n\n  var entry = {\n    id: idPrefix + prefix + '-heading',\n    cssClasses: [ 'bpp-input-output' ],\n    html: '<div class=\"bpp-field-wrapper\">' +\n      '<button type=\"button\" class=\"bpp-input-output__add add action-button\" ' + 'data-action=\"createElement\">' +\n      '</button><input name=\"hidden\" type=\"hidden\">' +\n      '</div>'\n  };\n\n  entry.createElement = function(_, entryNode) {\n    var commands = createElement();\n\n    if (commands) {\n      scheduleCommands(commands, entryNode);\n      return true;\n    }\n  };\n\n  entry.set = function() {\n    var commands = entry._commands;\n\n    if (commands) {\n      delete entry._commands;\n      return commands;\n    }\n  };\n\n  function createElement() {\n    var commands = [];\n    var bo = getBusinessObject(element);\n    var extensionElements = bo.get('extensionElements');\n\n    if (!extensionElements) {\n      extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n      commands.push(cmdHelper.updateBusinessObject(element, bo, { extensionElements: extensionElements }));\n    }\n\n    var inputOutput = getInputOutput(element, insideConnector);\n    if (!inputOutput) {\n      var parent = !insideConnector ? extensionElements : getConnector(element);\n      inputOutput = createInputOutput(parent, bpmnFactory, {\n        inputParameters: [],\n        outputParameters: []\n      });\n\n      if (!insideConnector) {\n        commands.push(cmdHelper.addAndRemoveElementsFromList(\n          element,\n          extensionElements,\n          'values',\n          'extensionElements',\n          [ inputOutput ],\n          []\n        ));\n      } else {\n        commands.push(cmdHelper.updateBusinessObject(element, parent, { inputOutput: inputOutput }));\n      }\n    }\n\n    var newElem = createParameter(type, inputOutput, bpmnFactory, { name: generateElementId(prefix) });\n    commands.push(cmdHelper.addElementsTolist(element, inputOutput, prop, [], [ newElem ]));\n\n    return commands;\n  }\n\n  /**\n   * Schedule commands to be run with next `set` method call.\n   *\n   * @param {Array<any>} commands\n   * @param {HTMLElement} entryNode\n   */\n  function scheduleCommands(commands, entryNode) {\n    entry._commands = commands;\n\n    // @barmac: hack to make properties panel call `set`\n    var input = domQuery('input[type=\"hidden\"]', entryNode);\n    input.value = 1;\n  }\n\n  return entry;\n}\n\nfunction getOutputParameterEntries(element, bpmnFactory, options, translate) {\n  var idPrefix = options.idPrefix,\n      insideConnector = options.insideConnector,\n      inputOutput = getInputOutput(element, insideConnector),\n      params = getOutputParameters(element, insideConnector),\n      entries;\n\n  if (!params.length) {\n    var description = entryFieldDescription(translate, translate('No variables defined.'));\n\n    return [{\n      id: idPrefix + 'output-parameter' + '-placeholder',\n      cssClasses: [ 'bpp-input-output-placeholder' ],\n      html: description\n    }];\n  }\n\n  var outputParameters = params.map(function(param, index) {\n    function onRemove() {\n      var commands = [];\n      commands.push(cmdHelper.removeElementsFromList(element, inputOutput, 'outputParameters', null, [param]));\n\n      // remove inputOutput if there are no input/output parameters anymore\n      if (inputOutput.get('outputParameters').length === 1 && (inputOutput.get('inputParameters') || []).length === 0) {\n\n        if (!insideConnector) {\n          commands.push(extensionElementsHelper.removeEntry(getBusinessObject(element), element, inputOutput));\n        }\n        else {\n          var connector = getConnector(element);\n          commands.push(cmdHelper.updateBusinessObject(element, connector, { inputOutput: undefined }));\n        }\n      }\n\n      return commands;\n    }\n\n    return InputOutputParameter(param, bpmnFactory,\n      {\n        idPrefix: idPrefix + 'output-parameter-' + index,\n        onRemove: onRemove,\n        onToggle: onToggle\n      }, translate);\n  });\n\n  /**\n   * Close remaining collapsible entries within group.\n   *\n   * @param {boolean} value\n   * @param {HTMLElement} entryNode\n   */\n  function onToggle(value, entryNode) {\n    if (!value) {\n      return;\n    }\n\n    var currentEntryId = entryNode.dataset.entry;\n\n    outputParameters.forEach(function(outputParameter) {\n      if (outputParameter.entries[0].id === currentEntryId) {\n        return;\n      }\n\n      outputParameter.setOpen(false);\n    });\n  }\n\n  entries = outputParameters.map(function(input) {\n    return input.entries;\n  });\n\n  return flatten(entries);\n}\n\nfunction append(array, items) {\n  Array.prototype.push.apply(array, items);\n}\n\nfunction flatten(arrays) {\n  return Array.prototype.concat.apply([], arrays);\n}\n\nfunction generateElementId(prefix) {\n  prefix = prefix + '_';\n  return utils.nextId(prefix);\n}\n\nfunction getInputOutput(element, insideConnector) {\n  return inputOutputHelper.getInputOutput(element, insideConnector);\n}\n\nfunction getConnector(element) {\n  return inputOutputHelper.getConnector(element);\n}\n\nfunction getOutputParameters(element, insideConnector) {\n  return inputOutputHelper.getOutputParameters(element, insideConnector);\n}\n\nfunction createElement(type, parent, factory, properties) {\n  return elementHelper.createElement(type, properties, parent, factory);\n}\n\nfunction createInputOutput(parent, bpmnFactory, properties) {\n  return createElement('camunda:InputOutput', parent, bpmnFactory, properties);\n}\n\nfunction createParameter(type, parent, bpmnFactory, properties) {\n  return createElement(type, parent, bpmnFactory, properties);\n}\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper'),\n    eventDefinitionHelper = require('../../../../helper/EventDefinitionHelper'),\n    utils = require('../../../../Utils');\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar forEach = require('lodash/forEach'),\n    find = require('lodash/find'),\n    filter = require('lodash/filter');\n\n\nfunction getContainedActivities(element) {\n  return getFlowElements(element, 'bpmn:Activity');\n}\n\nfunction getContainedBoundaryEvents(element) {\n  return getFlowElements(element, 'bpmn:BoundaryEvent');\n}\n\nfunction getFlowElements(element, type) {\n  return utils.filterElementsByType(element.flowElements, type);\n}\n\nfunction isCompensationEventAttachedToActivity(activity, boundaryEvents) {\n  var activityId = activity.id;\n  var boundaryEvent = find(boundaryEvents, function(boundaryEvent) {\n    var compensateEventDefinition = eventDefinitionHelper.getCompensateEventDefinition(boundaryEvent);\n    var attachedToRef = boundaryEvent.attachedToRef;\n    return compensateEventDefinition && attachedToRef && attachedToRef.id === activityId;\n  });\n  return !!boundaryEvent;\n}\n\n// subprocess: only when it is not triggeredByEvent\n// activity: only when it attach a compensation boundary event\n// callActivity: no limitation\nfunction canActivityBeCompensated(activity, boundaryEvents) {\n  return (is(activity, 'bpmn:SubProcess') && !activity.triggeredByEvent) ||\n          is(activity, 'bpmn:CallActivity') ||\n          isCompensationEventAttachedToActivity(activity, boundaryEvents);\n}\n\nfunction getActivitiesForCompensation(element) {\n  var boundaryEvents = getContainedBoundaryEvents(element);\n  return filter(getContainedActivities(element), function(activity) {\n    return canActivityBeCompensated(activity, boundaryEvents);\n  });\n}\n\nfunction getActivitiesForActivityRef(element) {\n  var bo = getBusinessObject(element);\n  var parent = bo.$parent;\n\n  var activitiesForActivityRef = getActivitiesForCompensation(parent);\n\n  // if throwing compensation event is in an event sub process:\n  // get also all activities outside of the event sub process\n  if (is(parent, 'bpmn:SubProcess') && parent.triggeredByEvent) {\n    parent = parent.$parent;\n    if (parent) {\n      activitiesForActivityRef = activitiesForActivityRef.concat(getActivitiesForCompensation(parent));\n    }\n\n  }\n\n  return activitiesForActivityRef;\n}\n\nfunction createActivityRefOptions(element) {\n  var options = [ { value: '' } ];\n\n  var activities = getActivitiesForActivityRef(element);\n  forEach(activities, function(activity) {\n    var activityId = activity.id;\n    var name = (activity.name ? (activity.name + ' ') : '') + '(id=' + activityId + ')';\n    options.push({ value: activityId, name: name });\n  });\n\n  return options;\n}\n\n\nmodule.exports = function(group, element, bpmnFactory, compensateEventDefinition, elementRegistry, translate) {\n\n  group.entries.push(entryFactory.checkbox(translate, {\n    id: 'wait-for-completion',\n    label: translate('Wait for Completion'),\n    modelProperty: 'waitForCompletion',\n\n    get: function(element, node) {\n      return {\n        waitForCompletion: compensateEventDefinition.waitForCompletion\n      };\n    },\n\n    set: function(element, values) {\n      values.waitForCompletion = values.waitForCompletion || false;\n      return cmdHelper.updateBusinessObject(element, compensateEventDefinition, values);\n    }\n  }));\n\n  group.entries.push(entryFactory.selectBox(translate, {\n    id: 'activity-ref',\n    label: translate('Activity Ref'),\n    selectOptions: createActivityRefOptions(element),\n    modelProperty: 'activityRef',\n\n    get: function(element, node) {\n      var activityRef = compensateEventDefinition.activityRef;\n      activityRef = activityRef && activityRef.id;\n      return {\n        activityRef: activityRef || ''\n      };\n    },\n\n    set: function(element, values) {\n      var activityRef = values.activityRef || undefined;\n      activityRef = activityRef && getBusinessObject(elementRegistry.get(activityRef));\n      return cmdHelper.updateBusinessObject(element, compensateEventDefinition, {\n        activityRef: activityRef\n      });\n    }\n  }));\n\n};\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar DELEGATE_TYPES = [\n  'class',\n  'expression',\n  'delegateExpression'\n];\n\nvar PROPERTIES = {\n  class: 'camunda:class',\n  expression: 'camunda:expression',\n  delegateExpression: 'camunda:delegateExpression'\n};\n\nfunction isDelegate(type) {\n  return DELEGATE_TYPES.indexOf(type) !== -1;\n}\n\nfunction getAttribute(type) {\n  return PROPERTIES[type];\n}\n\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getImplementationType = options.getImplementationType,\n      getBusinessObject = options.getBusinessObject;\n\n  function getDelegationLabel(type) {\n    switch (type) {\n    case 'class':\n      return translate('Java Class');\n    case 'expression':\n      return translate('Expression');\n    case 'delegateExpression':\n      return translate('Delegate Expression');\n    default:\n      return '';\n    }\n  }\n\n  var delegateEntry = entryFactory.textField(translate, {\n    id: 'delegate',\n    label: translate('Value'),\n    dataValueLabel: 'delegationLabel',\n    modelProperty: 'delegate',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      var type = getImplementationType(element);\n      var attr = getAttribute(type);\n      var label = getDelegationLabel(type);\n      return {\n        delegate: bo.get(attr),\n        delegationLabel: label\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n      var type = getImplementationType(element);\n      var attr = getAttribute(type);\n      var prop = {};\n      prop[attr] = values.delegate || '';\n      return cmdHelper.updateBusinessObject(element, bo, prop);\n    },\n\n    validate: function(element, values, node) {\n      return isDelegate(getImplementationType(element)) && !values.delegate ? { delegate: translate('Must provide a value') } : {};\n    },\n\n    hidden: function(element, node) {\n      return !isDelegate(getImplementationType(element));\n    }\n\n  });\n\n  return [ delegateEntry ];\n\n};\n","var copyArray = require('./_copyArray'),\n    isIndex = require('./_isIndex');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nmodule.exports = reorder;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\n/**\n * Create an entry to modify a property of an element which\n * is referenced by a event definition.\n *\n * @param  {djs.model.Base} element\n * @param  {ModdleElement} definition\n * @param  {BpmnFactory} bpmnFactory\n * @param  {Object} options\n * @param  {string} options.id the id of the entry\n * @param  {string} options.label the label of the entry\n * @param  {string} options.referenceProperty the name of referencing property\n * @param  {string} options.modelProperty the name of property to modify\n * @param  {string} options.shouldValidate a flag indicate whether to validate or not\n *\n * @return {Array<Object>} return an array containing the entries\n */\nmodule.exports = function(element, definition, bpmnFactory, translate, options) {\n\n  var id = options.id || 'element-property';\n  var label = options.label;\n  var referenceProperty = options.referenceProperty;\n  var modelProperty = options.modelProperty || 'name';\n  var shouldValidate = options.shouldValidate || false;\n\n  var entry = entryFactory.textField(translate, {\n    id: id,\n    label: label,\n    modelProperty: modelProperty,\n\n    get: function(element, node) {\n      var reference = definition.get(referenceProperty);\n      var props = {};\n      props[modelProperty] = reference && reference.get(modelProperty);\n      return props;\n    },\n\n    set: function(element, values, node) {\n      var reference = definition.get(referenceProperty);\n      var props = {};\n      props[modelProperty] = values[modelProperty] || undefined;\n      return cmdHelper.updateBusinessObject(element, reference, props);\n    },\n\n    hidden: function(element, node) {\n      return !definition.get(referenceProperty);\n    }\n  });\n\n  if (shouldValidate) {\n    entry.validate = function(element, values, node) {\n      var reference = definition.get(referenceProperty);\n      if (reference && !values[modelProperty]) {\n        var validationErrors = {};\n        validationErrors[modelProperty] = 'Must provide a value';\n        return validationErrors;\n      }\n    };\n  }\n\n  return [ entry ];\n};\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\n\nvar getVariablesForScope = require('@bpmn-io/extract-process-variables').getVariablesForScope;\n\nvar filter = require('min-dash').filter,\n    map = require('min-dash').map,\n    sortBy = require('min-dash').sortBy;\n\nvar elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    utils = require('../../../../Utils');\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    scriptImplementation = require('./Script');\n\nvar domQuery = require('min-dom').query;\n\nmodule.exports = function(parameter, bpmnFactory, options, translate) {\n\n  var typeInfo = {\n    'camunda:Map': {\n      value: 'map',\n      label: translate('Map')\n    },\n    'camunda:List': {\n      value: 'list',\n      label: translate('List')\n    },\n    'camunda:Script': {\n      value: 'script',\n      label: translate('Script')\n    }\n  };\n\n  options = options || {};\n\n  var idPrefix = options.idPrefix || '';\n\n  var getParameter =\n    (options.getParameter && typeof options.getParameter === 'function') ?\n      function() {\n        return options.getParameter();\n      } :\n      function() {\n        return parameter;\n      };\n\n  var result = {},\n      entries = [];\n\n  result.entries = entries;\n\n  // heading ////////////////////////////////////////////////////////\n  var collapsible = entryFactory.collapsible({\n    id: idPrefix + 'collapsible',\n    title: parameter.name,\n    description: getDescription(parameter),\n    cssClasses: [ 'bpp-collapsible--with-mapping' ],\n    open: false,\n    onRemove: options.onRemove,\n    onToggle: options.onToggle,\n    get: function() {\n      return {\n        title: getParameter().name,\n        description: getDescription(getParameter())\n      };\n    }\n  });\n\n  var isOpen = options.isOpen || collapsible.isOpen;\n\n  result.setOpen = function(value) {\n    var entryNode = domQuery('[data-entry=\"' + collapsible.id + '\"]');\n    collapsible.setOpen(value, entryNode);\n  };\n\n  entries.push(collapsible);\n\n  // parameter name ////////////////////////////////////////////////////////\n  entries.push(entryFactory.validationAwareTextField(translate, {\n    id: idPrefix + 'parameterName',\n    label: is(parameter, 'camunda:InputParameter') ?\n      translate('Local Variable Name') : translate('Process Variable Name'),\n    modelProperty: 'name',\n\n    getProperty: function(element, node) {\n      return parameter.name;\n    },\n\n    setProperty: function(element, values, node) {\n      return cmdHelper.updateBusinessObject(element, parameter, values);\n    },\n\n    validate: function(element, values, node) {\n      var validation = {};\n      var nameValue = values.name;\n\n      if (nameValue) {\n        if (utils.containsSpace(nameValue)) {\n          validation.name = translate('Name must not contain spaces');\n        }\n      } else {\n        validation.name = translate('Parameter must have a name');\n      }\n\n      return validation;\n    },\n\n    hidden: function(element, node) {\n      return !isOpen();\n    }\n  }));\n\n\n  // parameter type //////////////////////////////////////////////////////\n\n  var selectOptions = [\n    { value: 'text', name: translate('String or Expression') },\n    { value: 'script', name: translate('Script') },\n    { value: 'list', name: translate('List') },\n    { value: 'map', name: translate('Map') }\n  ];\n\n  entries.push(entryFactory.selectBox(translate, {\n    id : idPrefix + 'parameterType',\n    label: translate('Variable Assignment Type'),\n    selectOptions: selectOptions,\n    modelProperty: 'parameterType',\n\n    get: function(element, node) {\n      var parameterType = 'text';\n\n      var definition = getParameter().get('definition');\n      if (typeof definition !== 'undefined') {\n        var type = definition.$type;\n        parameterType = typeInfo[type].value;\n      }\n\n      return {\n        parameterType: parameterType\n      };\n    },\n\n    set: function(element, values, node) {\n      var properties = {\n        value: undefined,\n        definition: undefined\n      };\n\n      var createParameterTypeElem = function(type) {\n        return createElement(type, getParameter(), bpmnFactory);\n      };\n\n      var parameterType = values.parameterType;\n\n      if (parameterType === 'script') {\n        properties.definition = createParameterTypeElem('camunda:Script');\n      }\n      else if (parameterType === 'list') {\n        properties.definition = createParameterTypeElem('camunda:List');\n      }\n      else if (parameterType === 'map') {\n        properties.definition = createParameterTypeElem('camunda:Map');\n      }\n\n      return cmdHelper.updateBusinessObject(element, getParameter(), properties);\n    },\n\n    hidden: function(element, node) {\n      return !isOpen();\n    }\n\n  }));\n\n\n  // parameter value (type = text) ///////////////////////////////////////////////////////\n\n  entries.push(entryFactory.autoSuggest(translate, {\n    id : idPrefix + 'parameterType-text',\n    label : translate('Variable Assignment Value'),\n    description: translate('Start typing \"${}\" to create an expression.'),\n    modelProperty: 'value',\n    get: function(element, node) {\n      return {\n        value: getParameter().value\n      };\n    },\n\n    set: function(element, values, node) {\n      values.value = values.value || undefined;\n      return cmdHelper.updateBusinessObject(element, getParameter(), values);\n    },\n\n    show: function(element, node) {\n      return isOpen() && !getParameter().definition;\n    },\n\n    getItems: function(element) {\n      var scope = getScope(element),\n          rootElement = getRootElement(element);\n\n      // (1) get all available variables for the current scope\n      var variables = getVariablesForScope(scope, rootElement);\n\n      // (2) ignore all variables which are (only) written in the current element\n      variables = filter(variables, function(variable) {\n        var origin = variable.origin,\n            withOutCurrent = filter(origin, function(o) {\n              return o.id !== element.id;\n            });\n\n        return !!withOutCurrent.length;\n      });\n\n      // (3) sort by name\n      var sorted = sortByName(variables);\n\n      // (4) retrieve names as suggestion items\n      return map(sorted, function(variable) {\n        return variable.name;\n      });\n    },\n\n    canSuggest: function(word, editorNode, focusNode) {\n      var globalIndex = findWordInContentEditable(word, editorNode, focusNode);\n\n      if (isInsideExpression(editorNode.innerText, globalIndex)) {\n        return true;\n      }\n\n      if (isInsideUnclosedExpression(editorNode.innerText, globalIndex)) {\n        return true;\n      }\n\n      return false;\n    }\n\n  }));\n\n\n  // parameter value (type = script) ///////////////////////////////////////////////////////\n  var script = scriptImplementation('scriptFormat', 'value', true, translate, { idPrefix: idPrefix });\n  entries.push({\n    id: idPrefix + 'parameterType-script',\n    html: '<div data-show=\"show\">' +\n            script.template +\n          '</div>',\n    get: function(element, node) {\n      return isScript(getParameter().definition) ? script.get(element, getParameter().definition) : {};\n    },\n\n    set: function(element, values, node) {\n      var update = script.set(element, values);\n      return cmdHelper.updateBusinessObject(element, getParameter().definition, update);\n    },\n\n    validate: function(element, values, node) {\n      return isScript(getParameter().definition) ? script.validate(element, getParameter().definition) : {};\n    },\n\n    script: script,\n    show: function(element, node) {\n      return isOpen() && getParameter().definition && isScript(getParameter().definition);\n    }\n  });\n\n\n  // parameter value (type = list) ///////////////////////////////////////////////////////\n\n  entries.push(entryFactory.table(translate, {\n    id: idPrefix + 'parameterType-list',\n    modelProperties: [ 'value' ],\n    labels: [ translate('Value') ],\n    addLabel: translate('Add Value'),\n\n    getElements: function(element, node) {\n\n      if (isList(getParameter().definition)) {\n        return getParameter().definition.items;\n      }\n\n      return [];\n    },\n\n    updateElement: function(element, values, node, idx) {\n      var item = getParameter().definition.items[idx];\n      return cmdHelper.updateBusinessObject(element, item, values);\n    },\n\n    addElement: function(element, node) {\n      var newValue = createElement('camunda:Value', getParameter().definition, bpmnFactory, { value: undefined });\n      return cmdHelper.addElementsTolist(element, getParameter().definition, 'items', [ newValue ]);\n    },\n\n    removeElement: function(element, node, idx) {\n      return cmdHelper.removeElementsFromList(element, getParameter().definition, 'items', null, [ getParameter().definition.items[idx] ]);\n    },\n\n    editable: function(element, node, prop, idx) {\n      var item = getParameter().definition.items[idx];\n      return !isMap(item) && !isList(item) && !isScript(item);\n    },\n\n    setControlValue: function(element, node, input, prop, value, idx) {\n      var item = getParameter().definition.items[idx];\n\n      if (!isMap(item) && !isList(item) && !isScript(item)) {\n        input.value = value;\n      } else {\n        input.value = typeInfo[item.$type].label;\n      }\n    },\n\n    show: function(element, node) {\n      return isOpen() && getParameter().definition && isList(getParameter().definition);\n    }\n\n  }));\n\n\n  // parameter value (type = map) ///////////////////////////////////////////////////////\n\n  entries.push(entryFactory.table(translate, {\n    id: idPrefix + 'parameterType-map',\n    modelProperties: [ 'key', 'value' ],\n    labels: [ translate('Key'), translate('Value') ],\n    addLabel: translate('Add Entry'),\n\n    getElements: function(element, node) {\n\n      if (getParameter() && isMap(getParameter().definition)) {\n        return getParameter().definition.entries;\n      }\n\n      return [];\n    },\n\n    updateElement: function(element, values, node, idx) {\n      var entry = getParameter().definition.entries[idx];\n\n      if (isMap(entry.definition) || isList(entry.definition) || isScript(entry.definition)) {\n        values = {\n          key: values.key\n        };\n      }\n\n      return cmdHelper.updateBusinessObject(element, entry, values);\n    },\n\n    addElement: function(element, node) {\n      var newEntry = createElement('camunda:Entry', getParameter().definition, bpmnFactory, { key: undefined, value: undefined });\n      return cmdHelper.addElementsTolist(element, getParameter().definition, 'entries', [ newEntry ]);\n    },\n\n    removeElement: function(element, node, idx) {\n      return cmdHelper.removeElementsFromList(element, getParameter().definition, 'entries', null, [ getParameter().definition.entries[idx] ]);\n    },\n\n    editable: function(element, node, prop, idx) {\n      var entry = getParameter().definition.entries[idx];\n      return prop === 'key' || (!isMap(entry.definition) && !isList(entry.definition) && !isScript(entry.definition));\n    },\n\n    setControlValue: function(element, node, input, prop, value, idx) {\n      var entry = getParameter().definition.entries[idx];\n\n      if (prop === 'key' || (!isMap(entry.definition) && !isList(entry.definition) && !isScript(entry.definition))) {\n        input.value = value;\n      } else {\n        input.value = typeInfo[entry.definition.$type].label;\n      }\n    },\n\n    show: function(element, node) {\n      return isOpen() && getParameter().definition && isMap(getParameter().definition);\n    }\n\n  }));\n\n  return result;\n};\n\n\n\n// helper /////////////////////\n\nfunction createElement(type, parent, factory, properties) {\n  return elementHelper.createElement(type, properties, parent, factory);\n}\n\nfunction isScript(elem) {\n  return is(elem, 'camunda:Script');\n}\n\nfunction isList(elem) {\n  return is(elem, 'camunda:List');\n}\n\nfunction isMap(elem) {\n  return is(elem, 'camunda:Map');\n}\n\nfunction sortByName(variables) {\n  return sortBy(variables, function(variable) {\n    return variable.name;\n  });\n}\n\nfunction getScope(element) {\n  var businessObject = getBusinessObject(element);\n\n  if (isAny(businessObject, [ 'bpmn:Process', 'bpmn:SubProcess' ])) {\n    return businessObject.id;\n  }\n\n  // look for processes or sub process in parents\n  var parent = businessObject;\n\n  while (parent.$parent && !isAny(parent, [ 'bpmn:Process', 'bpmn:SubProcess' ])) {\n    parent = parent.$parent;\n  }\n\n  return parent.id;\n}\n\nfunction getRootElement(element) {\n  var businessObject = getBusinessObject(element),\n      parent = businessObject;\n\n  while (parent.$parent && !is(parent, 'bpmn:Process')) {\n    parent = parent.$parent;\n  }\n\n  return parent;\n}\n\nfunction isInsideExpression(value, index) {\n  var openIndex = value.indexOf('${'),\n      closeIndex = value.indexOf('}');\n\n  return (\n    openIndex > -1 && openIndex <= index &&\n    closeIndex > -1 && index < closeIndex\n  );\n}\n\nfunction isInsideUnclosedExpression(value, index) {\n  var closeIndex = value.lastIndexOf('}', index),\n      openIndex = value.indexOf('${', closeIndex + 1);\n\n  return (\n    openIndex > -1 && openIndex <= index\n  );\n}\n\nfunction findWordInContentEditable(word, editorNode, focusNode) {\n\n  // retrieve value before focusNode (row)\n  var children = editorNode.childNodes,\n      textBefore = '';\n\n  for (var i = 0; i <= children.length - 1; i++) {\n    var child = children[i];\n\n    if (child.contains(focusNode)) {\n      break;\n    }\n\n    textBefore += (child.innerText || child.wholeText) + '\\n';\n  }\n\n  return textBefore.length + (word.index || 0);\n}\n\nfunction getDescription(parameter) {\n  var definition = parameter.get('definition');\n\n  if (!definition) {\n    return parameter.value;\n  }\n\n  if (isScript(definition)) {\n    return definition.value;\n  } else if (isList(definition)) {\n    return 'List';\n  } else if (isMap(definition)) {\n    return 'Map';\n  }\n}\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers used to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and\n * `_.rearg` modify function arguments, making the order in which they are\n * executed important, preventing the merging of metadata. However, we make\n * an exception for a safe combined case where curried functions have `_.ary`\n * and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n  var isCombo =\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n    ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & WRAP_BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = value;\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & WRAP_ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nmodule.exports = mergeData;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\nvar assign = require('lodash/assign');\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject,\n      hideResultVariable = options.hideResultVariable,\n      id = options.id || 'resultVariable';\n\n\n  var resultVariableEntry = entryFactory.textField(translate, {\n    id: id,\n    label: translate('Result Variable'),\n    modelProperty: 'resultVariable',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return { resultVariable: bo.get('camunda:resultVariable') };\n    },\n\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element);\n\n      var resultVariable = values.resultVariable || undefined;\n\n      var props = {\n        'camunda:resultVariable': resultVariable\n      };\n\n      if (is(bo, 'camunda:DmnCapable') && !resultVariable) {\n        props = assign({ 'camunda:mapDecisionResult': 'resultList' }, props);\n      }\n\n      return cmdHelper.updateBusinessObject(element, bo, props);\n    },\n\n    hidden: function(element, node) {\n      if (typeof hideResultVariable === 'function') {\n        return hideResultVariable.apply(resultVariableEntry, arguments);\n      }\n    }\n\n  });\n\n  return [ resultVariableEntry ];\n\n};\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\n\nmodule.exports = function(group, element, translate) {\n\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(element, 'camunda:Initiator') && !is(element.parent, 'bpmn:SubProcess')) {\n    group.entries.push(entryFactory.textField(translate, {\n      id: 'initiator',\n      label: translate('Initiator'),\n      modelProperty: 'initiator'\n    }));\n  }\n};\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper'),\n    error = require('./implementation/ErrorEventDefinition');\n\nvar forEach = require('lodash/forEach');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var errorEvents = [\n    'bpmn:StartEvent',\n    'bpmn:BoundaryEvent',\n    'bpmn:EndEvent'\n  ];\n\n  forEach(errorEvents, function(event) {\n    if (is(element, event)) {\n\n      var errorEventDefinition = eventDefinitionHelper.getErrorEventDefinition(element);\n\n      if (errorEventDefinition) {\n        var isCatchingErrorEvent = is(element, 'bpmn:StartEvent') || is (element, 'bpmn:BoundaryEvent');\n\n        var showErrorCodeVariable = isCatchingErrorEvent,\n            showErrorMessageVariable = isCatchingErrorEvent;\n\n        error(\n          group,\n          element,\n          bpmnFactory,\n          errorEventDefinition,\n          showErrorCodeVariable,\n          showErrorMessageVariable,\n          translate);\n      }\n    }\n  });\n};\n","var identity = require('./identity'),\n    metaMap = require('./_metaMap');\n\n/**\n * The base implementation of `setData` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nmodule.exports = baseSetData;\n","/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      ++result;\n    }\n  }\n  return result;\n}\n\nmodule.exports = countHolders;\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nmodule.exports = function(group, element, translate) {\n\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(element, 'bpmn:Process') || is(element, 'bpmn:Participant') && bo.get('processRef')) {\n    var versionTagEntry = entryFactory.textField(translate, {\n      id: 'versionTag',\n      label: translate('Version Tag'),\n      modelProperty: 'versionTag'\n    });\n\n    // in participants we have to change the default behavior of set and get\n    if (is(element, 'bpmn:Participant')) {\n      versionTagEntry.get = function(element) {\n        var processBo = bo.get('processRef');\n\n        return {\n          versionTag: processBo.get('camunda:versionTag')\n        };\n      };\n\n      versionTagEntry.set = function(element, values) {\n        var processBo = bo.get('processRef');\n\n        return cmdHelper.updateBusinessObject(element, processBo, {\n          'camunda:versionTag': values.versionTag || undefined\n        });\n      };\n    }\n\n    group.entries.push(versionTagEntry);\n\n  }\n};\n","'use strict';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A component that decides upon the visibility / editable\n * state of properties in the properties panel.\n *\n * Implementors must subclass this component and override\n * {@link PropertiesActivator#isEntryVisible} and\n * {@link PropertiesActivator#isPropertyEditable} to provide\n * custom behavior.\n *\n * @class\n * @constructor\n *\n * @param {EventBus} eventBus\n * @param {Number} [priority] at which priority to hook into the activation\n */\nfunction PropertiesActivator(eventBus, priority) {\n  var self = this;\n\n  priority = priority || DEFAULT_PRIORITY;\n\n  eventBus.on('propertiesPanel.isEntryVisible', priority, function(context) {\n    var element = context.element,\n        entry = context.entry,\n        group = context.group,\n        tab = context.tab;\n\n    return self.isEntryVisible(element, entry, group, tab);\n  });\n\n  eventBus.on('propertiesPanel.isPropertyEditable', priority, function(context) {\n    var element = context.element,\n        entry = context.entry,\n        group = context.group,\n        propertyName = context.propertyName,\n        tab = context.tab;\n\n    return self.isPropertyEditable(propertyName, element, entry, group, tab);\n  });\n}\n\nPropertiesActivator.$inject = [ 'eventBus' ];\n\nmodule.exports = PropertiesActivator;\n\n\n/**\n * Should the given entry be visible for the specified element.\n *\n * @method  PropertiesActivator#isEntryVisible\n *\n * @param {ModdleElement} element\n * @param {Object} entry\n * @param {Object} group\n * @param {Object} tab\n *\n * @returns {boolean}\n */\nPropertiesActivator.prototype.isEntryVisible = function(element, entry, group, tab) {\n  return true;\n};\n\n/**\n * Should the given property be editable for the specified element\n *\n * @method  PropertiesActivator#isPropertyEditable\n *\n * @param {string} propertyName\n * @param {ModdleElement} element\n * @param {Object} entry\n * @param {Object} group\n * @param {Object} tab\n *\n * @returns {boolean}\n */\nPropertiesActivator.prototype.isPropertyEditable = function(propertyName, element, entry, group, tab) {\n  return true;\n};","'use strict';\n\nvar properties = require('./implementation/Properties'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var propertiesEntry = properties(element, bpmnFactory, {\n    id: 'properties',\n    modelProperties: [ 'name', 'value' ],\n    labels: [ translate('Name'), translate('Value') ],\n\n    getParent: function(element, node, bo) {\n      return bo.extensionElements;\n    },\n\n    createParent: function(element, bo) {\n      var parent = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n      var cmd = cmdHelper.updateBusinessObject(element, bo, { extensionElements: parent });\n      return {\n        cmd: cmd,\n        parent: parent\n      };\n    }\n  }, translate);\n\n  if (propertiesEntry) {\n    group.entries.push(propertiesEntry);\n  }\n\n};\n","/** Used to match wrap detail comments. */\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n\nmodule.exports = getWrapDetails;\n","'use strict';\n\nvar flatten = require('min-dash').flatten,\n    filter = require('min-dash').filter,\n    forEach = require('min-dash').forEach;\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('../../../../helper/CmdHelper'),\n    elementHelper = require('../../../../helper/ElementHelper');\n\nvar findExtension = require('../Helper').findExtension,\n    findOutputParameter = require('../Helper').findOutputParameter;\n\nvar createOutputParameter = require('../CreateHelper').createOutputParameter;\n\nvar domClasses = require('min-dom').classes,\n    domEvent = require('min-dom').event,\n    domify = require('min-dom').domify,\n    domQuery = require('min-dom').query;\n\nvar escapeHTML = require('../../../../Utils').escapeHTML;\n\nvar utils = require('../../../../Utils');\n\nvar CAMUNDA_OUTPUT_PARAMETER_TYPE = 'camunda:outputParameter';\n\nvar MAX_DESCRIPTION_LENGTH = 200;\n\nvar EMPTY_PARAMETER = {\n  get: function() {},\n  set: function() {}\n};\n\n/**\n * Injects element template output parameters into the given group.\n *\n * @param {Object} group\n * @param {djs.model.Base} element\n * @param {ElementTemplates} elementTemplates\n * @param {BpmnFactory} bpmnFactory\n * @param {Function} translate\n */\nmodule.exports = function(group, element, elementTemplates, bpmnFactory, translate) {\n\n  var template = elementTemplates.get(element);\n\n  if (!template) {\n    return [];\n  }\n\n  var outputEntries = [];\n\n\n  function onToggle(value, entryNode) {\n    if (!value) {\n      return;\n    }\n\n    var currentEntryId = entryNode.dataset.entry;\n\n    // collapse all other items\n    outputEntries.forEach(function(entries) {\n      var collapsible = entries[0];\n\n      if (collapsible.id === currentEntryId) {\n        return;\n      }\n\n      var entryNode = domQuery('[data-entry=\"' + collapsible.id + '\"]');\n      collapsible.setOpen(false, entryNode);\n    });\n  }\n\n  function renderOutputParameter(id, templateProperty) {\n\n    var parameterEntries = [];\n\n    // find input parameter first\n    var bo = getBusinessObject(element),\n        inputOutput = findExtension(bo, 'camunda:InputOutput');\n\n    if (!inputOutput) {\n      return parameterEntries;\n    }\n\n    var getParameter = function() {\n      return findOutputParameter(inputOutput, templateProperty.binding) || EMPTY_PARAMETER;\n    };\n\n    // (1) add collapsible header\n    var collapsible = entryFactory.collapsible({\n      id: id + '-collapsible',\n      title: translate(templateProperty.label),\n      cssClasses: [\n        'bpp-collapsible--with-mapping',\n        'bpp-collapsible--with-template-out'\n      ],\n      onToggle: onToggle,\n      open: false,\n      get: function() {\n        return {\n          title: translate(templateProperty.label),\n          description: getParameter().name\n        };\n      }\n    });\n    parameterEntries.push(collapsible);\n\n    var isOpen = collapsible.isOpen;\n\n    var assignmentIsOn = function() {\n      var inputOutput = findExtension(getBusinessObject(element), 'camunda:InputOutput'),\n          parameter = findOutputParameter(inputOutput, templateProperty.binding);\n\n      return !!parameter;\n    };\n\n    // (2) add description\n    if (templateProperty.description) {\n      parameterEntries.push(createDescriptionEntry(\n        templateProperty.description,\n        id,\n        isOpen,\n        translate\n      ));\n    }\n\n    // (3) add parameter toggle\n    parameterEntries.splice(templateProperty.description ? 2 : 1, 0, entryFactory.toggleSwitch(translate, {\n      id: id + '-assignment-toggle',\n      label: translate('Process Variable Assignment'),\n      modelProperty: 'isActive',\n      labelOn: translate('On'),\n      labelOff: translate('Off'),\n      descriptionOff: translate('The parameter won\\'t be available in the process scope.'),\n      isOn: assignmentIsOn,\n      get: function(element, node) {\n        return { isActive: assignmentIsOn() };\n      },\n      set: function(element, values, node) {\n        var isActive = values.isActive || false;\n\n        if (isActive) {\n          return createNewOutputParameter(element, templateProperty.binding, bpmnFactory);\n        } else {\n          return removeOutputParameter(element, templateProperty.binding);\n        }\n\n      },\n      hidden: function(element, node) {\n        return !isOpen();\n      }\n    }));\n\n    // (4) add process variable name field\n    parameterEntries.push(entryFactory.validationAwareTextField(translate, {\n      id: id + '-variableName',\n      label: translate('Assign to Process Variable'),\n      modelProperty: 'variableName',\n      getProperty: function(element) {\n        return getParameter().name;\n      },\n      setProperty: function(element, values) {\n        return cmdHelper.updateBusinessObject(element, getParameter(), { name: values.variableName });\n      },\n      validate: function(element, values) {\n        var validation = {},\n            nameValue = values.variableName;\n\n        if (nameValue) {\n          if (utils.containsSpace(nameValue)) {\n            validation.variableName = translate('Process Variable Name must not contain spaces.');\n          }\n        } else {\n          validation.variableName = translate('Process Variable Name must not be empty.');\n        }\n\n        return validation;\n      },\n      hidden: function(element, node) {\n        return !isOpen() || !assignmentIsOn();\n      }\n    }));\n\n    return parameterEntries;\n  }\n\n  // filter specific output parameters from template\n  var outputParameters = filter(template.properties, function(p) {\n    return !p.type && p.binding.type === CAMUNDA_OUTPUT_PARAMETER_TYPE;\n  });\n\n  forEach(outputParameters, function(property, idx) {\n    var id = 'template-outputs-' + template.id + '-' + idx;\n    outputEntries.push(renderOutputParameter(id, property));\n  });\n\n  group.entries = group.entries.concat(flatten(outputEntries));\n};\n\n// helpers ///////////////\n\nfunction createDescriptionEntry(description, id, show, translate) {\n  description = escapeHTML(description);\n\n  var html = domify('<p class=\"description description--expanded\" data-show=\"show\"></p>');\n\n  var descriptionText = domify('<span class=\"description__text\">' + description + '</span>');\n\n  html.appendChild(descriptionText);\n\n  function toggleExpanded(expanded) {\n    if (expanded) {\n      domClasses(html).add('description--expanded');\n\n      descriptionText.textContent = description + ' ';\n\n      expand.textContent = translate('Less');\n    } else {\n      domClasses(html).remove('description--expanded');\n\n      descriptionText.textContent = descriptionShortened + ' ... ';\n\n      expand.textContent = translate('More');\n    }\n  }\n\n  var descriptionShortened,\n      expand,\n      expanded = false;\n\n  if (description.length > MAX_DESCRIPTION_LENGTH) {\n    descriptionShortened = description.slice(0, MAX_DESCRIPTION_LENGTH);\n\n    expand = domify(\n      '<span class=\"bpp-entry-link description__expand\">' +\n        translate('More') +\n      '</span>'\n    );\n\n    domEvent.bind(expand, 'click', function() {\n      expanded = !expanded;\n\n      toggleExpanded(expanded);\n    });\n\n    html.appendChild(expand);\n\n    toggleExpanded(expanded);\n  }\n\n  return {\n    id: id + '-description',\n    html: html,\n    show: show\n  };\n}\n\nfunction removeOutputParameter(element, binding) {\n  var bo = getBusinessObject(element),\n      updates = [],\n      extensionElements = bo.get('extensionElements');\n\n  if (!extensionElements) {\n    return updates;\n  }\n\n  var inputOutput = findExtension(extensionElements, 'camunda:InputOutput');\n\n  if (!inputOutput) {\n    return updates;\n  }\n\n  var outputParameter = findOutputParameter(inputOutput, binding);\n\n  if (!outputParameter) {\n    return updates;\n  }\n\n  updates.push(cmdHelper.removeElementsFromList(element, inputOutput, 'outputParameters', null, [outputParameter]));\n\n  return updates;\n}\n\nfunction createNewOutputParameter(element, binding, bpmnFactory) {\n  var bo = getBusinessObject(element),\n      updates = [],\n      extensionElements = bo.get('extensionElements');\n\n  // (1) ensure extension elements\n  if (!extensionElements) {\n    extensionElements = elementHelper.createElement('bpmn:ExtensionElements', null, element, bpmnFactory);\n\n    updates.push(cmdHelper.updateBusinessObject(\n      element, bo, { extensionElements: extensionElements }\n    ));\n  }\n\n  var inputOutput = findExtension(extensionElements, 'camunda:InputOutput');\n\n  // (2) ensure inputOutput element\n  if (!inputOutput) {\n    inputOutput = elementHelper.createElement('camunda:InputOutput', null, bo, bpmnFactory);\n\n    updates.push(cmdHelper.addElementsTolist(\n      element, extensionElements, 'values', inputOutput\n    ));\n  }\n\n  // (3) create output parameter\n  var outputParameter = createOutputParameter(binding, null, bpmnFactory);\n\n  updates.push(cmdHelper.addAndRemoveElementsFromList(\n    element,\n    inputOutput,\n    'outputParameters',\n    null,\n    [ outputParameter ],\n    [ ]\n  ));\n\n  return updates;\n}","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var externalTaskPriorityEntry = entryFactory.textField(translate, {\n    id: 'externalTaskPriority',\n    label: translate('Task Priority'),\n    modelProperty: 'taskPriority',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        taskPriority: bo.get('camunda:taskPriority')\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, {\n        'camunda:taskPriority': values.taskPriority || undefined\n      });\n    }\n\n  });\n\n  return [ externalTaskPriorityEntry ];\n\n};\n","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar domify = require('min-dom').domify,\n    domQuery = require('min-dom').query;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar textField = function(translate, options, defaultParameters) {\n\n  // Default action for the button next to the input-field\n  var defaultButtonAction = function(element, inputNode) {\n    var input = domQuery('input[name=\"' + options.modelProperty + '\"]', inputNode);\n    input.value = '';\n\n    return true;\n  };\n\n  // default method to determine if the button should be visible\n  var defaultButtonShow = function(element, inputNode) {\n    var input = domQuery('input[name=\"' + options.modelProperty + '\"]', inputNode);\n\n    return input.value !== '';\n  };\n\n\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      dataValueLabel = options.dataValueLabel,\n      buttonLabel = (options.buttonLabel || 'X'),\n      actionName = (typeof options.buttonAction != 'undefined') ? options.buttonAction.name : 'clear',\n      actionMethod = (typeof options.buttonAction != 'undefined') ? options.buttonAction.method : defaultButtonAction,\n      showName = (typeof options.buttonShow != 'undefined') ? options.buttonShow.name : 'canClear',\n      showMethod = (typeof options.buttonShow != 'undefined') ? options.buttonShow.method : defaultButtonShow,\n      canBeDisabled = !!options.disabled && typeof options.disabled === 'function',\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      description = options.description;\n\n  resource.html =\n    domify('<label for=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n      (canBeDisabled ? 'data-disable=\"isDisabled\" ' : '') +\n      (canBeHidden ? 'data-show=\"isHidden\" ' : '') +\n      (dataValueLabel ? 'data-value=\"' + escapeHTML(dataValueLabel) + '\"' : '') + '>'+ escapeHTML(label) +'</label>' +\n    '<div class=\"bpp-field-wrapper\" ' +\n      (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n      (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n      '>' +\n      '<input id=\"camunda-' + escapeHTML(resource.id) + '\" type=\"text\" name=\"' + escapeHTML(options.modelProperty) + '\" ' +\n        (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n        (canBeHidden ? 'data-show=\"isHidden\"' : '') +\n        ' />' +\n      '<button class=\"action-button ' + escapeHTML(actionName) + '\" data-action=\"' + escapeHTML(actionName) + '\" data-show=\"' + escapeHTML(showName) + '\" ' +\n        (canBeDisabled ? 'data-disable=\"isDisabled\"' : '') +\n        (canBeHidden ? ' data-show=\"isHidden\"' : '') + '>' +\n        '<span>' + escapeHTML(buttonLabel) + '</span>' +\n      '</button>' +\n    '</div>');\n\n  // add description below text input entry field\n  if (description) {\n    resource.html.appendChild(entryFieldDescription(translate, description, { show: canBeHidden && 'isHidden' }));\n  }\n\n  resource[actionName] = actionMethod;\n  resource[showName] = showMethod;\n\n  if (canBeDisabled) {\n    resource.isDisabled = function() {\n      return options.disabled.apply(resource, arguments);\n    };\n  }\n\n  if (canBeHidden) {\n    resource.isHidden = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-textfield'];\n\n  return resource;\n};\n\nmodule.exports = textField;\n","'use strict';\n\nvar entryFactory = require('../../../factory/EntryFactory'),\n    cmdHelper = require('../../../helper/CmdHelper');\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    is = ModelUtil.is,\n    getBusinessObject = ModelUtil.getBusinessObject;\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var getValue = function(businessObject) {\n    return function(element) {\n      var documentations = businessObject && businessObject.get('documentation'),\n          text = (documentations && documentations.length > 0) ? documentations[0].text : '';\n\n      return { documentation: text };\n    };\n  };\n\n  var setValue = function(businessObject) {\n    return function(element, values) {\n      var newObjectList = [];\n\n      if (typeof values.documentation !== 'undefined' && values.documentation !== '') {\n        newObjectList.push(bpmnFactory.create('bpmn:Documentation', {\n          text: values.documentation\n        }));\n      }\n\n      return cmdHelper.setList(element, businessObject, 'documentation', newObjectList);\n    };\n  };\n\n  // Element Documentation\n  var elementDocuEntry = entryFactory.textBox(translate, {\n    id: 'documentation',\n    label: translate('Element Documentation'),\n    modelProperty: 'documentation'\n  });\n\n  elementDocuEntry.set = setValue(getBusinessObject(element));\n\n  elementDocuEntry.get = getValue(getBusinessObject(element));\n\n  group.entries.push(elementDocuEntry);\n\n\n  var processRef;\n\n  // Process Documentation when having a Collaboration Diagram\n  if (is(element, 'bpmn:Participant')) {\n\n    processRef = getBusinessObject(element).processRef;\n\n    // do not show for collapsed Pools/Participants\n    if (processRef) {\n      var processDocuEntry = entryFactory.textBox(translate, {\n        id: 'process-documentation',\n        label: translate('Process Documentation'),\n        modelProperty: 'documentation'\n      });\n\n      processDocuEntry.set = setValue(processRef);\n\n      processDocuEntry.get = getValue(processRef);\n\n      group.entries.push(processDocuEntry);\n    }\n  }\n\n};\n","'use strict';\n\nvar domClasses = require('min-dom').classes,\n    domify = require('min-dom').domify,\n    domQuery = require('min-dom').query;\n\nvar assign = require('min-dash').assign,\n    find = require('min-dash').find,\n    forEach = require('min-dash').forEach,\n    debounce = require('min-dash').debounce;\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\nvar CLASS_ACTIVE = 'active';\n\nvar FOCUS_LEAVE_DELAY = '150';\n\nvar TEXT_NODE_NAME = '#text';\n\nvar SUGGESTION_LIST_BOX_THRESHOLD = 15;\n\nvar noop = function() {};\n\n\nvar autoSuggestTextBox = function(translate, options, defaultParameters) {\n\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      canBeShown = !!options.show && typeof options.show === 'function',\n      description = options.description;\n\n  resource.html =\n    domify('<label ' +\n      'for=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n      (canBeShown ? 'data-show=\"isShown\"' : '') +\n      '>' + label + '</label>' +\n    '<div class=\"bpp-field-wrapper\" ' +\n      (canBeShown ? 'data-show=\"isShown\"' : '') +\n    '>' +\n      '<div ' +\n        'contenteditable=\"true\"' +\n        'id=\"camunda-' + escapeHTML(resource.id) + '\" ' +\n        'name=\"' + escapeHTML(options.modelProperty) + '\" ' +\n        'data-auto-suggest=\"suggestItems\"' +\n        'data-blur=\"handleFocusLeave\"' +\n      '></div>' +\n      '<div class=\"bpp-autosuggest-list\"></div>' +\n    '</div>');\n\n  if (description) {\n    domQuery('.bpp-field-wrapper', resource.html).appendChild(entryFieldDescription(translate, description));\n  }\n\n  if (canBeShown) {\n    resource.isShown = function() {\n      return options.show.apply(resource, arguments);\n    };\n  }\n\n  /**\n   * Ensure selected item got recognized before list got hidden\n   */\n  resource.handleFocusLeave = debounce(function(element, entryNode) {\n    clearSuggestionList(entryNode);\n    hideSuggestionList(entryNode);\n  }, FOCUS_LEAVE_DELAY);\n\n  /**\n   * Fill the suggestion list relative to the current word under the cursor.\n   *\n   * @param {djs.model.Base} element\n   * @param {HTMLElement} entryNode\n   * @param {Event} event\n   */\n  resource.suggestItems = function(element, entryNode, event) {\n    var editorNode = event.delegateTarget,\n        range = getSelectionRange(),\n        focusNode = range.focusNode,\n        caretPosition = getCaretPosition(range.range),\n        canSuggest = options.canSuggest || noop,\n        getItems = options.getItems;\n\n    function updateSuggestionList(items) {\n      var listNode = domQuery('.bpp-autosuggest-list', entryNode);\n\n      // (1) clear list before\n      clearSuggestionList(entryNode);\n\n      // (2) keep list invisible if no items\n      if (!items.length) {\n        return;\n      }\n\n      domClasses(listNode).add(CLASS_ACTIVE);\n\n      // (3) create new items\n      forEach(items, function(item) {\n        createSuggestionItem(listNode, item);\n      });\n\n      // (4) place list relative to cursor\n      var position = getSuggestionListPosition(listNode, document.body).position;\n      setPosition(listNode, position.x, position.y);\n    }\n\n    function createSuggestionItem(parentNode, value) {\n      var itemNode = domify('<div class=\"bpp-autosuggest-item\"></div>');\n      itemNode.innerText = escapeHTML(value);\n\n      parentNode.appendChild(itemNode);\n\n      itemNode.addEventListener('click', handleItemClick);\n    }\n\n    function handleItemClick(event) {\n      var value = event.target.innerText,\n          wordIndex = currentWord.index,\n          start = wordIndex,\n          end = wordIndex + currentWord[0].length;\n\n      selectRange(focusNode, start, end);\n\n      document.execCommand('insertText', false, value);\n\n      clearSuggestionList(entryNode);\n      hideSuggestionList(entryNode);\n    }\n\n    hideSuggestionList(entryNode);\n\n    var currentWord = (getWordUnderCursor(focusNode, caretPosition) || []);\n\n    if (currentWord && canSuggest(currentWord, editorNode, focusNode)) {\n      var items = getItems(element, entryNode),\n          results = [],\n          value = currentWord[0];\n\n      // sort matches by\n      // (1) item starts with value (case insensitive)\n      // (2) value is inside suggested item (case insensitive)\n      forEach(items, function(item) {\n        var itemLowerCase = item.toLowerCase(),\n            valueLowerCase = value && value.toLowerCase();\n\n        if (itemLowerCase.indexOf(valueLowerCase) === 0) {\n          results.push(item);\n        }\n      });\n\n      forEach(items, function(item) {\n        var itemLowerCase = item.toLowerCase(item),\n            valueLowerCase = value && value.toLowerCase();\n\n        if (itemLowerCase.indexOf(valueLowerCase) >= 1) {\n          results.push(item);\n        }\n      });\n\n      updateSuggestionList(results);\n    }\n  };\n\n  /**\n  * Calculates the position coordinates of the suggestion list,\n  * dependant on position of cursor\n  *\n  * @return {Object} coordinates\n  */\n  function getSuggestionListPosition(listNode, container) {\n    var range = getSelectionRange().range,\n        cursorBounds = range.getBoundingClientRect(),\n        clientBounds = container.getBoundingClientRect(),\n        listBounds = listNode.getBoundingClientRect();\n\n    var coordinates = {\n      'top-left': {\n        x: cursorBounds.right - listBounds.width,\n        y: cursorBounds.top - listBounds.height\n      },\n      'top-right': {\n        x: cursorBounds.right,\n        y: cursorBounds.top - listBounds.height\n      },\n      'bottom-left': {\n        x: cursorBounds.right - listBounds.width,\n        y: cursorBounds.top + SUGGESTION_LIST_BOX_THRESHOLD\n      },\n      'bottom-right': {\n        x: cursorBounds.right,\n        y: cursorBounds.top + SUGGESTION_LIST_BOX_THRESHOLD\n      }\n    };\n\n    var orientation = '';\n\n    if (cursorBounds.top + SUGGESTION_LIST_BOX_THRESHOLD + listBounds.height > (clientBounds.height + clientBounds.top)) {\n      orientation = 'top-';\n    } else {\n      orientation = 'bottom-';\n    }\n\n    if (cursorBounds.right + listBounds.width > (clientBounds.width + clientBounds.left)) {\n      orientation += 'left';\n    } else {\n      orientation += 'right';\n    }\n\n    return { orientation: orientation, position: coordinates[orientation] };\n  }\n\n  resource.getSuggestionListPosition = getSuggestionListPosition;\n\n\n  resource.cssClasses = ['bpp-autosuggest-textbox'];\n\n  return resource;\n};\n\nmodule.exports = autoSuggestTextBox;\n\n\n// helpers /////////////////////////////\n\nfunction getSelectionRange() {\n  var selection = document.getSelection();\n\n  return {\n    range: selection.getRangeAt(0),\n    focusNode: selection.focusNode\n  };\n}\n\nfunction getCaretPosition(range) {\n  return range.startOffset;\n}\n\nfunction selectRange(focusNode, start, end) {\n  var range = document.createRange(),\n      selection = window.getSelection();\n\n  range.setStart(focusNode, start);\n  range.setEnd(focusNode, end);\n\n  selection.removeAllRanges();\n\n  selection.addRange(range);\n}\n\nfunction hideSuggestionList(entryNode) {\n  var listNode = domQuery('.bpp-autosuggest-list', entryNode);\n  domClasses(listNode).remove(CLASS_ACTIVE);\n}\n\nfunction clearSuggestionList(entryNode) {\n  var listNode = domQuery('.bpp-autosuggest-list', entryNode);\n  while (listNode.firstChild) {\n    listNode.removeChild(listNode.firstChild);\n  }\n}\n\nfunction getWordUnderCursor(node, currentCursorPositon) {\n  var value = node.nodeName === TEXT_NODE_NAME ? node.wholeText : node.innerText,\n      allWords = findWords(value);\n\n  return find(allWords, function(word) {\n    var matchValue = word[0],\n        wordStart = word.index,\n        wordEnd = wordStart + matchValue.length - 1;\n\n    return (\n      wordStart <= (currentCursorPositon - 1) &&\n      wordEnd >= (currentCursorPositon - 1)\n    );\n  });\n}\n\n/**\n * Retrieves all words inside a text (also inside clauses and after operators)\n *\n * @param {string} value\n *\n * @return {Array<Object>}\n */\nfunction findWords(value) {\n\n  // eslint-disable-next-line no-useless-escape\n  return matchAll(value, /[^\\s\\r\\(\\)\\,\\+\\-\\*\\/\\{\\}]+/g);\n}\n\nfunction matchAll(value, regex) {\n  var regexp = RegExp(regex),\n      match,\n      matches = [];\n\n  while ((match = regexp.exec(value)) !== null) {\n    matches.push(match);\n  }\n\n  return matches;\n}\n\nfunction setPosition(el, x, y) {\n  assign(el.style, { left: x + 'px', top: y + 'px' });\n}\n","var baseIteratee = require('./_baseIteratee'),\n    basePullAt = require('./_basePullAt');\n\n/**\n * Removes all elements from `array` that `predicate` returns truthy for\n * and returns an array of the removed elements. The predicate is invoked\n * with three arguments: (value, index, array).\n *\n * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n * to pull elements from an array by value.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new array of removed elements.\n * @example\n *\n * var array = [1, 2, 3, 4];\n * var evens = _.remove(array, function(n) {\n *   return n % 2 == 0;\n * });\n *\n * console.log(array);\n * // => [1, 3]\n *\n * console.log(evens);\n * // => [2, 4]\n */\nfunction remove(array, predicate) {\n  var result = [];\n  if (!(array && array.length)) {\n    return result;\n  }\n  var index = -1,\n      indexes = [],\n      length = array.length;\n\n  predicate = baseIteratee(predicate, 3);\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result.push(value);\n      indexes.push(index);\n    }\n  }\n  basePullAt(array, indexes);\n  return result;\n}\n\nmodule.exports = remove;\n","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isEventSubProcess = require('bpmn-js/lib/util/DiUtil').isEventSubProcess;\n\nmodule.exports = function(group, element, bpmnFactory, conditionalEventDefinition, elementRegistry, translate) {\n\n  var getValue = function(modelProperty) {\n    return function(element) {\n      var modelPropertyValue = conditionalEventDefinition.get('camunda:' + modelProperty);\n      var value = {};\n\n      value[modelProperty] = modelPropertyValue;\n      return value;\n    };\n  };\n\n  var setValue = function(modelProperty) {\n    return function(element, values) {\n      var props = {};\n\n      props['camunda:' + modelProperty] = values[modelProperty] || undefined;\n\n      return cmdHelper.updateBusinessObject(element, conditionalEventDefinition, props);\n    };\n  };\n\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'variableName',\n    label: translate('Variable Name'),\n    modelProperty : 'variableName',\n\n    get: getValue('variableName'),\n    set: setValue('variableName')\n  }));\n\n  var isConditionalStartEvent =\n    is(element, 'bpmn:StartEvent') && !isEventSubProcess(element.parent);\n\n  if (!isConditionalStartEvent) {\n    group.entries.push(entryFactory.textField(translate, {\n      id: 'variableEvents',\n      label: translate('Variable Events'),\n      description: translate('Specify more than one variable change event as a comma separated list.'),\n      modelProperty : 'variableEvents',\n\n      get: getValue('variableEvents'),\n      set: setValue('variableEvents')\n    }));\n  }\n};\n","'use strict';\n\nvar elementHelper = require('../helper/ElementHelper');\n\n/**\n * A handler capable of creating a new element under a provided parent\n * and updating / creating a reference to it in one atomic action.\n *\n * @class\n * @constructor\n */\nfunction CreateAndReferenceElementHandler(elementRegistry, bpmnFactory) {\n  this._elementRegistry = elementRegistry;\n  this._bpmnFactory = bpmnFactory;\n}\n\nCreateAndReferenceElementHandler.$inject = [ 'elementRegistry', 'bpmnFactory' ];\n\nmodule.exports = CreateAndReferenceElementHandler;\n\n\n// api ////////////////////\n\n/**\n * Creates a new element under a provided parent and updates / creates a reference to it in\n * one atomic action.\n *\n * @method  CreateAndReferenceElementHandler#execute\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element which is the context for the reference\n * @param {moddle.referencingObject} context.referencingObject the object which creates the reference\n * @param {String} context.referenceProperty the property of the referencingObject which makes the reference\n * @param {moddle.newObject} context.newObject the new object to add\n * @param {moddle.newObjectContainer} context.newObjectContainer the container for the new object\n *\n * @returns {Array<djs.mode.Base>} the updated element\n */\nCreateAndReferenceElementHandler.prototype.execute = function(context) {\n\n  var referencingObject = ensureNotNull(context.referencingObject, 'referencingObject'),\n      referenceProperty = ensureNotNull(context.referenceProperty, 'referenceProperty'),\n      newObject = ensureNotNull(context.newObject, 'newObject'),\n      newObjectContainer = ensureNotNull(context.newObjectContainer, 'newObjectContainer'),\n      newObjectParent = ensureNotNull(context.newObjectParent, 'newObjectParent'),\n      changed = [ context.element ]; // this will not change any diagram-js elements\n\n  // create new object\n  var referencedObject = elementHelper\n    .createElement(newObject.type, newObject.properties, newObjectParent, this._bpmnFactory);\n  context.referencedObject = referencedObject;\n\n  // add to containing list\n  newObjectContainer.push(referencedObject);\n\n  // adjust reference attribute\n  context.previousReference = referencingObject[referenceProperty];\n  referencingObject[referenceProperty] = referencedObject;\n\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  CreateAndReferenceElementHandler#revert\n *\n * @param {Object} context\n *\n * @returns {djs.mode.Base} the updated element\n */\nCreateAndReferenceElementHandler.prototype.revert = function(context) {\n\n  var referencingObject = context.referencingObject,\n      referenceProperty = context.referenceProperty,\n      previousReference = context.previousReference,\n      referencedObject = context.referencedObject,\n      newObjectContainer = context.newObjectContainer;\n\n  // reset reference\n  referencingObject.set(referenceProperty, previousReference);\n\n  // remove new element\n  newObjectContainer.splice(newObjectContainer.indexOf(referencedObject), 1);\n\n  return context.changed;\n};\n\n\n\n// helpers //////////////\n\nfunction ensureNotNull(prop, name) {\n  if (!prop) {\n    throw new Error(name + ' required');\n  }\n  return prop;\n}\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    copyArray = require('./_copyArray');\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  if (wrapper instanceof LazyWrapper) {\n    return wrapper.clone();\n  }\n  var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n  result.__actions__ = copyArray(wrapper.__actions__);\n  result.__index__  = wrapper.__index__;\n  result.__values__ = wrapper.__values__;\n  return result;\n}\n\nmodule.exports = wrapperClone;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar filter = require('lodash/filter');\n\nvar extensionElementsHelper = require('../../../helper/ExtensionElementsHelper'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    eventDefinitionHelper = require('../../../helper/EventDefinitionHelper');\n\nvar extensionElementsEntry = require('./implementation/ExtensionElements');\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\n/**\n  * return depend on parameter 'type' camunda:in or camunda:out extension elements\n  */\nfunction getCamundaInOutMappings(element, type) {\n  var bo = getBusinessObject(element);\n\n  var signalEventDefinition = eventDefinitionHelper.getSignalEventDefinition(bo);\n\n  return extensionElementsHelper.getExtensionElements(signalEventDefinition || bo, type) || [];\n}\n\n/**\n  * return depend on parameter 'type' camunda:in or camunda:out extension elements\n  * with source or sourceExpression attribute\n  */\nfunction getVariableMappings(element, type) {\n  var camundaMappings = getCamundaInOutMappings(element, type);\n\n  return filter(camundaMappings, function(mapping) {\n    return !mapping.businessKey;\n  });\n}\n\nfunction getInOutType(mapping) {\n  var inOutType = 'source';\n\n  if (mapping.variables === 'all') {\n    inOutType = 'variables';\n  }\n  else if (typeof mapping.source !== 'undefined') {\n    inOutType = 'source';\n  }\n  else if (typeof mapping.sourceExpression !== 'undefined') {\n    inOutType = 'sourceExpression';\n  }\n\n  return inOutType;\n}\n\nvar CAMUNDA_IN_EXTENSION_ELEMENT = 'camunda:In',\n    CAMUNDA_OUT_EXTENSION_ELEMENT = 'camunda:Out';\n\nvar WHITESPACE_REGEX = /\\s/;\n\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  var inOutTypeOptions = [\n    {\n      name: translate('Source'),\n      value: 'source'\n    },\n    {\n      name: translate('Source Expression'),\n      value: 'sourceExpression'\n    },\n    {\n      name: translate('All'),\n      value: 'variables'\n    }\n  ];\n\n  var signalEventDefinition = eventDefinitionHelper.getSignalEventDefinition(element);\n\n  if (!is(element, 'camunda:CallActivity') && !signalEventDefinition) {\n    return;\n  }\n\n  if (signalEventDefinition && !(isAny(element, [\n    'bpmn:IntermediateThrowEvent',\n    'bpmn:EndEvent'\n  ]))) {\n    return;\n  }\n\n  var isSelected = function(element, node) {\n    return !!getSelected(element, node);\n  };\n\n  var getSelected = function(element, node) {\n    var parentNode = node.parentNode;\n    var selection = inEntry.getSelected(element, parentNode);\n\n    var parameter = getVariableMappings(element, CAMUNDA_IN_EXTENSION_ELEMENT)[selection.idx];\n\n    if (!parameter && outEntry) {\n      selection = outEntry.getSelected(element, parentNode);\n      parameter = getVariableMappings(element, CAMUNDA_OUT_EXTENSION_ELEMENT)[selection.idx];\n    }\n\n    return parameter;\n  };\n\n  var setOptionLabelValue = function(type) {\n    return function(element, node, option, property, value, idx) {\n      var variableMappings = getVariableMappings(element, type);\n      var mappingValue = variableMappings[idx];\n      var label = (mappingValue.target || '<undefined>') + ' := ';\n      var mappingType = getInOutType(mappingValue);\n\n      if (mappingType === 'variables') {\n        label = 'all';\n      }\n      else if (mappingType === 'source') {\n        label = label + (mappingValue.source || '<empty>');\n      }\n      else if (mappingType === 'sourceExpression') {\n        label = label + (mappingValue.sourceExpression || '<empty>');\n      } else {\n        label = label + '<empty>';\n      }\n\n      option.text = label;\n    };\n  };\n\n  var newElement = function(type) {\n    return function(element, extensionElements, value) {\n      var newElem = elementHelper.createElement(type, { source: '' }, extensionElements, bpmnFactory);\n\n      return cmdHelper.addElementsTolist(element, extensionElements, 'values', [ newElem ]);\n    };\n  };\n\n  var removeElement = function(type) {\n    return function(element, extensionElements, value, idx) {\n      var variablesMappings= getVariableMappings(element, type);\n      var mapping = variablesMappings[idx];\n\n      if (mapping) {\n        return extensionElementsHelper\n          .removeEntry(signalEventDefinition || getBusinessObject(element), element, mapping);\n      }\n    };\n  };\n\n  // in mapping for source and sourceExpression ///////////////////////////////////////////////////////////////\n\n  var inEntry = extensionElementsEntry(element, bpmnFactory, {\n    id: 'variableMapping-in',\n    label: translate('In Mapping'),\n    modelProperty: 'source',\n    prefix: 'In',\n    idGeneration: false,\n    resizable: true,\n    businessObject: signalEventDefinition || getBusinessObject(element),\n\n    createExtensionElement: newElement(CAMUNDA_IN_EXTENSION_ELEMENT),\n    removeExtensionElement: removeElement(CAMUNDA_IN_EXTENSION_ELEMENT),\n\n    getExtensionElements: function(element) {\n      return getVariableMappings(element, CAMUNDA_IN_EXTENSION_ELEMENT);\n    },\n\n    onSelectionChange: function(element, node, event, scope) {\n      outEntry && outEntry.deselect(element, node.parentNode);\n    },\n\n    setOptionLabelValue: setOptionLabelValue(CAMUNDA_IN_EXTENSION_ELEMENT)\n  });\n  group.entries.push(inEntry);\n\n  // out mapping for source and sourceExpression ///////////////////////////////////////////////////////\n\n  if (!signalEventDefinition) {\n    var outEntry = extensionElementsEntry(element, bpmnFactory, {\n      id: 'variableMapping-out',\n      label: translate('Out Mapping'),\n      modelProperty: 'source',\n      prefix: 'Out',\n      idGeneration: false,\n      resizable: true,\n\n      createExtensionElement: newElement(CAMUNDA_OUT_EXTENSION_ELEMENT),\n      removeExtensionElement: removeElement(CAMUNDA_OUT_EXTENSION_ELEMENT),\n\n      getExtensionElements: function(element) {\n        return getVariableMappings(element, CAMUNDA_OUT_EXTENSION_ELEMENT);\n      },\n\n      onSelectionChange: function(element, node, event, scope) {\n        inEntry.deselect(element, node.parentNode);\n      },\n\n      setOptionLabelValue: setOptionLabelValue(CAMUNDA_OUT_EXTENSION_ELEMENT)\n    });\n    group.entries.push(outEntry);\n  }\n\n  // label for selected mapping ///////////////////////////////////////////////////////\n\n  group.entries.push(entryFactory.label({\n    id: 'variableMapping-typeLabel',\n    get: function(element, node) {\n      var mapping = getSelected(element, node);\n\n      var value = '';\n      if (is(mapping, CAMUNDA_IN_EXTENSION_ELEMENT)) {\n        value = translate('In Mapping');\n      }\n      else if (is(mapping, CAMUNDA_OUT_EXTENSION_ELEMENT)) {\n        value = translate('Out Mapping');\n      }\n\n      return {\n        label: value\n      };\n    },\n\n    showLabel: function(element, node) {\n      return isSelected(element, node);\n    }\n  }));\n\n\n  group.entries.push(entryFactory.selectBox(translate, {\n    id: 'variableMapping-inOutType',\n    label: translate('Type'),\n    selectOptions: inOutTypeOptions,\n    modelProperty: 'inOutType',\n    get: function(element, node) {\n      var mapping = getSelected(element, node) || {};\n      return {\n        inOutType: getInOutType(mapping)\n      };\n    },\n    set: function(element, values, node) {\n      var inOutType = values.inOutType;\n\n      var props = {\n        'source' : undefined,\n        'sourceExpression' : undefined,\n        'variables' : undefined\n      };\n\n      if (inOutType === 'source') {\n        props.source = '';\n      }\n      else if (inOutType === 'sourceExpression') {\n        props.sourceExpression = '';\n      }\n      else if (inOutType === 'variables') {\n        props.variables = 'all';\n        props.target = undefined;\n      }\n\n      var mapping = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, mapping, props);\n    },\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'variableMapping-source',\n    dataValueLabel: 'sourceLabel',\n    modelProperty: 'source',\n    get: function(element, node) {\n      var mapping = getSelected(element, node) || {};\n\n      var label = '';\n      var inOutType = getInOutType(mapping);\n      if (inOutType === 'source') {\n        label = translate('Source');\n      }\n      else if (inOutType === 'sourceExpression') {\n        label = translate('Source Expression');\n      }\n\n      return {\n        source: mapping[inOutType],\n        sourceLabel: label\n      };\n    },\n    set: function(element, values, node) {\n      values.source = values.source || undefined;\n\n      var mapping = getSelected(element, node);\n      var inOutType = getInOutType(mapping);\n\n      var props = {};\n      props[inOutType] = values.source || '';\n\n      return cmdHelper.updateBusinessObject(element, mapping, props);\n    },\n\n    // one of both (source or sourceExpression) must have a value to make\n    // the configuration easier and more understandable\n    // it is not engine conform\n    validate: function(element, values, node) {\n      var mapping = getSelected(element, node);\n\n      var validation = {};\n      if (mapping) {\n        if (!values.source) {\n          validation.source =\n          validation.source = values.sourceLabel ?\n            translate('Mapping must have a {value}', { value: values.sourceLabel.toLowerCase() }) :\n            translate('Mapping must have a value');\n        }\n\n        var inOutType = getInOutType(mapping);\n\n        if (WHITESPACE_REGEX.test(values.source) && inOutType !== 'sourceExpression') {\n          validation.source = translate('{label} must not contain whitespace', { label: values.sourceLabel });\n        }\n      }\n\n      return validation;\n    },\n    hidden: function(element, node) {\n      var selectedMapping = getSelected(element, node);\n      return !selectedMapping || (selectedMapping && selectedMapping.variables);\n    }\n  }));\n\n\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'variableMapping-target',\n    label: translate('Target'),\n    modelProperty: 'target',\n    get: function(element, node) {\n      return {\n        target: (getSelected(element, node) || {}).target\n      };\n    },\n    set: function(element, values, node) {\n      values.target = values.target || undefined;\n      var mapping = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, mapping, values);\n    },\n    validate: function(element, values, node) {\n      var mapping = getSelected(element, node);\n\n      var validation = {};\n      if (mapping) {\n        var mappingType = getInOutType(mapping);\n\n        if (!values.target && mappingType !== 'variables') {\n          validation.target = translate('Mapping must have a target');\n        }\n\n        if (values.target\n          && WHITESPACE_REGEX.test(values.target)\n          && mappingType !== 'variables') {\n          validation.target = translate('Target must not contain whitespace');\n        }\n      }\n\n      return validation;\n    },\n    hidden: function(element, node) {\n      var selectedMapping = getSelected(element, node);\n      return !selectedMapping || (selectedMapping && selectedMapping.variables);\n    }\n  }));\n\n\n  group.entries.push(entryFactory.checkbox(translate, {\n    id: 'variableMapping-local',\n    label: translate('Local'),\n    modelProperty: 'local',\n    get: function(element, node) {\n      return {\n        local: (getSelected(element, node) || {}).local\n      };\n    },\n    set: function(element, values, node) {\n      values.local = values.local || false;\n      var mapping = getSelected(element, node);\n      return cmdHelper.updateBusinessObject(element, mapping, values);\n    },\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n  }));\n\n};\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nmodule.exports = composeArgs;\n","'use strict';\n\nvar inputParameters = require('./implementation/InputParameters');\n\nmodule.exports = function(group, element, bpmnFactory, elementTemplates, translate) {\n\n  var template = elementTemplates.get(element);\n\n  if (template) {\n    return;\n  }\n\n  var inputParametersEntry = inputParameters(element, bpmnFactory, {}, translate);\n\n  group.entries = group.entries.concat(inputParametersEntry.entries);\n};\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createPartial;\n","'use strict';\n\nvar createDropdown = require('./Utils').createDropdown,\n    escapeHTML = require('./Utils').escapeHTML;\n\nvar domify = require('min-dom').domify,\n    domQuery = require('min-dom').query,\n    domQueryAll = require('min-dom').queryAll,\n    domRemove = require('min-dom').remove,\n    domClasses = require('min-dom').classes,\n    domClosest = require('min-dom').closest,\n    domAttr = require('min-dom').attr,\n    domDelegate = require('min-dom').delegate,\n    domMatches = require('min-dom').matches;\n\nvar forEach = require('lodash/forEach'),\n    filter = require('lodash/filter'),\n    get = require('lodash/get'),\n    keys = require('lodash/keys'),\n    isEmpty = require('lodash/isEmpty'),\n    isArray = require('lodash/isArray'),\n    isFunction = require('lodash/isFunction'),\n    isObject = require('lodash/isObject'),\n    xor = require('lodash/xor'),\n    debounce = require('lodash/debounce'),\n    flattenDeep = require('lodash/flattenDeep'),\n    keyBy = require('lodash/keyBy'),\n    map = require('lodash/map'),\n    reduce = require('lodash/reduce');\n\nvar updateSelection = require('selection-update');\n\nvar scrollTabs = require('scroll-tabs').default;\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar HIDE_CLASS = 'bpp-hidden';\nvar DEBOUNCE_DELAY = 300;\n\n\nfunction isToggle(node) {\n  return node.type === 'checkbox' || node.type === 'radio';\n}\n\nfunction isSelect(node) {\n  return node.type === 'select-one';\n}\n\nfunction isContentEditable(node) {\n  return domAttr(node, 'contenteditable');\n}\n\nfunction getPropertyPlaceholders(node) {\n  var selector = 'input[name], textarea[name], [data-value], [contenteditable]';\n  var placeholders = domQueryAll(selector, node);\n  if ((!placeholders || !placeholders.length) && domMatches(node, selector)) {\n    placeholders = [ node ];\n  }\n  return placeholders;\n}\n\n/**\n * Return all active form controls.\n * This excludes the invisible controls unless all is true\n *\n * @param {Element} node\n * @param {Boolean} [all=false]\n */\nfunction getFormControls(node, all) {\n  var controls = domQueryAll('input[name], textarea[name], select[name], [contenteditable]', node);\n\n  if (!controls || !controls.length) {\n    controls = domMatches(node, 'option') ? [ node ] : controls;\n  }\n\n  if (!all) {\n    controls = filter(controls, function(node) {\n      return !domClosest(node, '.' + HIDE_CLASS);\n    });\n  }\n\n  return controls;\n}\n\nfunction getFormControlValuesInScope(entryNode) {\n  var values = {};\n\n  var controlNodes = getFormControls(entryNode);\n\n  forEach(controlNodes, function(controlNode) {\n    var value = controlNode.value;\n\n    var name = domAttr(controlNode, 'name') || domAttr(controlNode, 'data-name');\n\n    // take toggle state into account for radio / checkboxes\n    if (isToggle(controlNode)) {\n      if (controlNode.checked) {\n        if (!domAttr(controlNode, 'value')) {\n          value = true;\n        } else {\n          value = controlNode.value;\n        }\n      } else {\n        value = null;\n      }\n    } else\n    if (isContentEditable(controlNode)) {\n      value = controlNode.innerText;\n    }\n\n    if (value !== null) {\n\n      // return the actual value\n      // handle serialization in entry provider\n      // (ie. if empty string should be serialized or not)\n      values[name] = value;\n    }\n  });\n\n  return values;\n\n}\n\n/**\n * Extract input values from entry node\n *\n * @param  {DOMElement} entryNode\n * @returns {Object}\n */\nfunction getFormControlValues(entryNode) {\n\n  var values;\n\n  var listContainer = domQuery('[data-list-entry-container]', entryNode);\n  if (listContainer) {\n    values = [];\n    var listNodes = listContainer.children || [];\n    forEach(listNodes, function(listNode) {\n      values.push(getFormControlValuesInScope(listNode));\n    });\n  } else {\n    values = getFormControlValuesInScope(entryNode);\n  }\n\n  return values;\n}\n\n/**\n * Return true if the given form extracted value equals\n * to an old cached version.\n *\n * @param {Object} value\n * @param {Object} oldValue\n * @return {Boolean}\n */\nfunction valueEqual(value, oldValue) {\n\n  if (value && !oldValue) {\n    return false;\n  }\n\n  var allKeys = keys(value).concat(keys(oldValue));\n\n  return allKeys.every(function(key) {\n    return value[key] === oldValue[key];\n  });\n}\n\n/**\n * Return true if the given form extracted value(s)\n * equal an old cached version.\n *\n * @param {Array<Object>|Object} values\n * @param {Array<Object>|Object} oldValues\n * @return {Boolean}\n */\nfunction valuesEqual(values, oldValues) {\n\n  if (isArray(values)) {\n\n    if (values.length !== oldValues.length) {\n      return false;\n    }\n\n    return values.every(function(v, idx) {\n      return valueEqual(v, oldValues[idx]);\n    });\n  }\n\n  return valueEqual(values, oldValues);\n}\n\n/**\n * Return a mapping of { id: entry } for all entries in the given groups in the given tabs.\n *\n * @param {Object} tabs\n * @return {Object}\n */\nfunction extractEntries(tabs) {\n  return keyBy(flattenDeep(map(flattenDeep(map(tabs, 'groups')), 'entries')), 'id');\n}\n\n/**\n * Return a mapping of { id: group } for all groups in the given tabs.\n *\n * @param {Object} tabs\n * @return {Object}\n */\nfunction extractGroups(tabs) {\n  return keyBy(flattenDeep(map(tabs, 'groups')), 'id');\n}\n\n/**\n * A properties panel implementation.\n *\n * To use it provide a `propertiesProvider` component that knows\n * about which properties to display.\n *\n * Properties edit state / visibility can be intercepted\n * via a custom {@link PropertiesActivator}.\n *\n * @class\n * @constructor\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n * @param {PropertiesProvider} propertiesProvider\n * @param {Canvas} canvas\n * @param {CommandStack} commandStack\n */\nfunction PropertiesPanel(config, eventBus, modeling, propertiesProvider, commandStack, canvas) {\n\n  this._eventBus = eventBus;\n  this._modeling = modeling;\n  this._commandStack = commandStack;\n  this._canvas = canvas;\n  this._propertiesProvider = propertiesProvider;\n\n  this._init(config);\n}\n\nPropertiesPanel.$inject = [\n  'config.propertiesPanel',\n  'eventBus',\n  'modeling',\n  'propertiesProvider',\n  'commandStack',\n  'canvas'\n];\n\nmodule.exports = PropertiesPanel;\n\n\nPropertiesPanel.prototype._init = function(config) {\n\n  var canvas = this._canvas,\n      eventBus = this._eventBus;\n\n  var self = this;\n\n  /**\n   * Select the root element once it is added to the canvas\n   */\n  eventBus.on('root.added', function(e) {\n    var element = e.element;\n\n    if (isImplicitRoot(element)) {\n      return;\n    }\n\n    self.update(element);\n  });\n\n  eventBus.on('selection.changed', function(e) {\n    var newElement = e.newSelection[0];\n\n    var rootElement = canvas.getRootElement();\n\n    if (isImplicitRoot(rootElement)) {\n      return;\n    }\n\n    self.update(newElement);\n  });\n\n  // add / update tab-bar scrolling\n  eventBus.on([\n    'propertiesPanel.changed',\n    'propertiesPanel.resized'\n  ], function(event) {\n\n    var tabBarNode = domQuery('.bpp-properties-tab-bar', self._container);\n\n    if (!tabBarNode) {\n      return;\n    }\n\n    var scroller = scrollTabs.get(tabBarNode);\n\n    if (!scroller) {\n\n      // we did not initialize yet, do that\n      // now and make sure we select the active\n      // tab on scroll update\n      scroller = scrollTabs(tabBarNode, {\n        selectors: {\n          tabsContainer: '.bpp-properties-tabs-links',\n          tab: '.bpp-properties-tabs-links li',\n          ignore: '.bpp-hidden',\n          active: '.bpp-active'\n        }\n      });\n\n\n      scroller.on('scroll', function(newActiveNode, oldActiveNode, direction) {\n\n        var linkNode = domQuery('[data-tab-target]', newActiveNode);\n\n        var tabId = domAttr(linkNode, 'data-tab-target');\n\n        self.activateTab(tabId);\n      });\n    }\n\n    // react on tab changes and or tabContainer resize\n    // and make sure the active tab is shown completely\n    scroller.update();\n  });\n\n  eventBus.on('elements.changed', function(e) {\n\n    var current = self._current;\n    var element = current && current.element;\n\n    if (element) {\n      if (e.elements.indexOf(element) !== -1) {\n        self.update(element);\n      }\n    }\n  });\n\n  eventBus.on('elementTemplates.changed', function() {\n    var current = self._current;\n    var element = current && current.element;\n\n    if (element) {\n      self.update(element);\n    }\n  });\n\n  eventBus.on('diagram.destroy', function() {\n    self.detach();\n  });\n\n  this._container = domify('<div class=\"bpp-properties-panel\"></div>');\n\n  this._bindListeners(this._container);\n\n  if (config && config.parent) {\n    this.attachTo(config.parent);\n  }\n};\n\n\nPropertiesPanel.prototype.attachTo = function(parentNode) {\n\n  if (!parentNode) {\n    throw new Error('parentNode required');\n  }\n\n  // ensure we detach from the\n  // previous, old parent\n  this.detach();\n\n  // unwrap jQuery if provided\n  if (parentNode.get && parentNode.constructor.prototype.jquery) {\n    parentNode = parentNode.get(0);\n  }\n\n  if (typeof parentNode === 'string') {\n    parentNode = domQuery(parentNode);\n  }\n\n  var container = this._container;\n\n  parentNode.appendChild(container);\n\n  this._emit('attach');\n};\n\nPropertiesPanel.prototype.detach = function() {\n\n  var container = this._container,\n      parentNode = container.parentNode;\n\n  if (!parentNode) {\n    return;\n  }\n\n  this._emit('detach');\n\n  parentNode.removeChild(container);\n};\n\n\n/**\n * Activate tab. Fall back to first visible tab.\n *\n * @param {Object|string} tabId\n */\nPropertiesPanel.prototype.activateTab = function(tabId) {\n  if (isObject(tabId)) {\n    tabId = tabId.id;\n  }\n\n  var tabs = domQueryAll('.bpp-properties-tab', this._current.panel),\n      tabLinks = domQueryAll('.bpp-properties-tab-link', this._current.panel);\n\n  // (1) Deactivate all tabs\n  forEach(tabs, function(tab) {\n    domClasses(tab).remove('bpp-active');\n  });\n\n  forEach(tabLinks, function(tabLink) {\n    domClasses(tabLink).remove('bpp-active');\n  });\n\n  // (2) Activate tab, fall back to first visible tab\n  var visibleTabs = filter(tabs, function(tab) {\n    return !domClasses(tab).has(HIDE_CLASS);\n  });\n\n  var activeTab = reduce(visibleTabs, function(activeTab, tab) {\n    if (domAttr(tab, 'data-tab') === tabId) {\n      return tab;\n    }\n\n    return activeTab;\n  }, visibleTabs[ 0 ]);\n\n  if (activeTab) {\n    domClasses(activeTab).add('bpp-active');\n  }\n\n  var visibleTabLinks = filter(tabLinks, function(tabLink) {\n    return !domClasses(tabLink).has(HIDE_CLASS);\n  });\n\n  var activeTabLink = reduce(visibleTabLinks, function(activeTabLink, tabLink) {\n    if (domAttr(domQuery('a[data-tab-target]', tabLink), 'data-tab-target') === tabId) {\n      return tabLink;\n    }\n\n    return activeTabLink;\n  }, visibleTabLinks[ 0 ]);\n\n  if (activeTabLink) {\n    domClasses(activeTabLink).add('bpp-active');\n  }\n};\n\n/**\n * Update properties panel to show properties of element. Create new properties panel if no previous\n * properties panel, element has changed or element has not changed but entries have.\n *\n * @param {ModdleElement|undefined} element\n */\nPropertiesPanel.prototype.update = function(element) {\n\n  // (1) Fall back to root element\n  if (!element) {\n    element = this._canvas.getRootElement();\n  }\n\n  // (2) Get tabs\n  var tabs = this._propertiesProvider.getTabs(element);\n\n  var activeTabId,\n      activeTabNode;\n\n  if (this._current) {\n    activeTabNode = domQuery('.bpp-properties-tab.bpp-active', this._current.panel);\n\n    if (activeTabNode) {\n      activeTabId = domAttr(activeTabNode, 'data-tab');\n    }\n  }\n\n  // (3) Create new properties panel if necessary\n  if (!this._current\n    || this._current.element !== element\n    || this._entriesChanged(this._current.entries, extractEntries(tabs))) {\n\n    if (this._current) {\n      domRemove(this._current.panel);\n    }\n\n    this._current = this._create(element, tabs);\n  }\n\n  // (4) Update visibility of tabs, groups and entries\n  this._updateActivation(this._current);\n\n  // (5) Update active tab\n  if (activeTabId) {\n    this.activateTab(activeTabId);\n  } else {\n    this.activateTab(this._current.tabs[ 0 ]);\n  }\n\n  this._emit('changed');\n};\n\n\n/**\n * Check whether entries have changes.\n *\n * @param  {Array} prevEntries\n * @param  {Array} entries\n *\n * @returns {Boolean}\n */\nPropertiesPanel.prototype._entriesChanged = function(prevEntries, entries) {\n  var prevEntryIds = keys(prevEntries),\n      entryIds = keys(entries);\n\n  return !isEmpty(xor(prevEntryIds, entryIds));\n};\n\nPropertiesPanel.prototype._emit = function(event) {\n  this._eventBus.fire('propertiesPanel.' + event, { panel: this, current: this._current });\n};\n\nPropertiesPanel.prototype._bindListeners = function(container) {\n\n  var self = this;\n\n  // handles a change for a given event\n  var handleChange = function handleChange(event) {\n\n    // see if we handle a change inside a [data-entry] element.\n    // if not, drop out\n    var inputNode = event.delegateTarget,\n        entryNode = domClosest(inputNode, '[data-entry]'),\n        entryId, entry;\n\n    // change from outside a [data-entry] element, simply ignore\n    if (!entryNode) {\n      return;\n    }\n\n    entryId = domAttr(entryNode, 'data-entry');\n    entry = self.getEntry(entryId);\n\n    var values = getFormControlValues(entryNode);\n\n    if (event.type === 'change') {\n\n      // - if the \"data-on-change\" attribute is present and a value is changed,\n      //   then the associated action is performed.\n      // - if the associated action returns \"true\" then an update to the business\n      //   object is done\n      // - if it does not return \"true\", then only the DOM content is updated\n      var onChangeAction = domAttr(inputNode, 'data-on-change');\n\n      if (onChangeAction) {\n        var isEntryDirty = self.executeAction(entry, entryNode, onChangeAction, event);\n\n        if (!isEntryDirty) {\n          return self.update(self._current.element);\n        }\n      }\n    }\n    self.applyChanges(entry, values, entryNode);\n    self.updateState(entry, entryNode);\n  };\n\n  // debounce update only elements that are target of key events,\n  // i.e. INPUT and TEXTAREA. SELECTs will trigger an immediate update anyway.\n  domDelegate.bind(container, 'input, textarea, [contenteditable]', 'input', debounce(handleChange, DEBOUNCE_DELAY));\n  domDelegate.bind(container, 'input, textarea, select, [contenteditable]', 'change', handleChange);\n\n  // paste as plain text only\n  domDelegate.bind(container, '[contenteditable]', 'paste', handlePaste);\n\n  function handlePaste(event) {\n    var text = (event.clipboardData || window.clipboardData).getData('text');\n    document.execCommand('insertText', false, text);\n\n    event.preventDefault();\n  }\n\n  // handle key events\n  domDelegate.bind(container, 'select', 'keydown', function(e) {\n\n    // DEL\n    if (e.keyCode === 46) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  });\n\n  function handleSuggestItems(event) {\n\n    // triggers on all inputs\n    var inputNode = event.delegateTarget;\n\n    var entryNode = domClosest(inputNode, '[data-entry]');\n\n    // only work on data entries\n    if (!entryNode) {\n      return;\n    }\n\n    var action = domAttr(inputNode, 'data-auto-suggest'),\n        entryId = domAttr(entryNode, 'data-entry');\n\n    var entry = self.getEntry(entryId);\n\n    self.executeAction(entry, entryNode, action, event);\n  }\n\n  domDelegate.bind(container, '[data-auto-suggest]', 'input', handleSuggestItems, true);\n\n  domDelegate.bind(container, '[data-action]', 'click', function onClick(event) {\n\n    // triggers on all inputs\n    var inputNode = event.delegateTarget,\n        entryNode = domClosest(inputNode, '[data-entry]');\n\n    var actionId = domAttr(inputNode, 'data-action'),\n        entryId = domAttr(entryNode, 'data-entry');\n\n    var entry = self.getEntry(entryId);\n\n    var isEntryDirty = self.executeAction(entry, entryNode, actionId, event);\n\n    if (!isEntryDirty) {\n      return self.update(self._current.element);\n    }\n\n    var values = getFormControlValues(entryNode);\n\n    self.applyChanges(entry, values, entryNode);\n    self.updateState(entry, entryNode);\n  });\n\n  function handleInput(event, element) {\n\n    // triggers on all inputs\n    var inputNode = event.delegateTarget;\n\n    var entryNode = domClosest(inputNode, '[data-entry]');\n\n    // only work on data entries\n    if (!entryNode) {\n      return;\n    }\n\n    var eventHandlerId = domAttr(inputNode, 'data-blur'),\n        entryId = domAttr(entryNode, 'data-entry');\n\n    var entry = self.getEntry(entryId);\n\n    var isEntryDirty = self.executeAction(entry, entryNode, eventHandlerId, event);\n\n    if (isEntryDirty) {\n      var values = getFormControlValues(entryNode);\n\n      self.applyChanges(entry, values, entryNode);\n    }\n\n    self.updateState(entry, entryNode);\n  }\n\n  domDelegate.bind(container, '[data-blur]', 'blur', handleInput, true);\n\n  // make tab links interactive\n  domDelegate.bind(container, '.bpp-properties-tabs-links [data-tab-target]', 'click', function(event) {\n    event.preventDefault();\n\n    var delegateTarget = event.delegateTarget;\n\n    var tabId = domAttr(delegateTarget, 'data-tab-target');\n\n    // activate tab on link click\n    self.activateTab(tabId);\n  });\n\n};\n\nPropertiesPanel.prototype.updateState = function(entry, entryNode) {\n  this.updateShow(entry, entryNode);\n  this.updateDisable(entry, entryNode);\n};\n\n/**\n * Update the visibility of the entry node in the DOM\n */\nPropertiesPanel.prototype.updateShow = function(entry, node) {\n\n  var current = this._current;\n\n  if (!current) {\n    return;\n  }\n\n  var showNodes = domQueryAll('[data-show]', node) || [];\n\n  forEach(showNodes, function(showNode) {\n\n    var expr = domAttr(showNode, 'data-show');\n    var fn = get(entry, expr);\n    if (fn) {\n      var scope = domClosest(showNode, '[data-scope]') || node;\n      var shouldShow = fn(current.element, node, showNode, scope) || false;\n      if (shouldShow) {\n        domClasses(showNode).remove(HIDE_CLASS);\n      } else {\n        domClasses(showNode).add(HIDE_CLASS);\n      }\n    }\n  });\n};\n\n/**\n * Evaluates a given function. If it returns true, then the\n * node is marked as \"disabled\".\n */\nPropertiesPanel.prototype.updateDisable = function(entry, node) {\n  var current = this._current;\n\n  if (!current) {\n    return;\n  }\n\n  var nodes = domQueryAll('[data-disable]', node) || [];\n\n  forEach(nodes, function(currentNode) {\n    var expr = domAttr(currentNode, 'data-disable');\n    var fn = get(entry, expr);\n    if (fn) {\n      var scope = domClosest(currentNode, '[data-scope]') || node;\n      var shouldDisable = fn(current.element, node, currentNode, scope) || false;\n      domAttr(currentNode, 'disabled', shouldDisable ? '' : null);\n    }\n  });\n};\n\nPropertiesPanel.prototype.executeAction = function(entry, entryNode, actionId, event) {\n  var current = this._current;\n\n  if (!current) {\n    return;\n  }\n\n  var fn = get(entry, actionId);\n  if (fn) {\n    var scopeNode = domClosest(event.target, '[data-scope]') || entryNode;\n    return fn.apply(entry, [ current.element, entryNode, event, scopeNode ]);\n  }\n};\n\n/**\n * Apply changes to the business object by executing a command\n */\nPropertiesPanel.prototype.applyChanges = function(entry, values, containerElement) {\n\n  var element = this._current.element;\n\n  // ensure we only update the model if we got dirty changes\n  if (valuesEqual(values, entry.oldValues)) {\n    return;\n  }\n\n  var command = entry.set(element, values, containerElement);\n\n  var commandToExecute;\n\n  if (isArray(command)) {\n    if (command.length) {\n      commandToExecute = {\n        cmd: 'properties-panel.multi-command-executor',\n        context: flattenDeep(command)\n      };\n    }\n  } else {\n    commandToExecute = command;\n  }\n\n  if (commandToExecute) {\n    this._commandStack.execute(commandToExecute.cmd, commandToExecute.context || { element : element });\n  } else {\n    this.update(element);\n  }\n};\n\n\n/**\n * apply validation errors in the DOM and show or remove an error message near the entry node.\n */\nPropertiesPanel.prototype.applyValidationErrors = function(validationErrors, entryNode) {\n\n  var valid = true;\n\n  var controlNodes = getFormControls(entryNode, true);\n\n  forEach(controlNodes, function(controlNode) {\n\n    var name = domAttr(controlNode, 'name') || domAttr(controlNode, 'data-name');\n\n    var error = validationErrors && validationErrors[name];\n\n    var errorMessageNode = domQuery('.bpp-error-message', controlNode.parentNode);\n\n    if (error) {\n      valid = false;\n\n      if (!errorMessageNode) {\n        errorMessageNode = domify('<div></div>');\n\n        domClasses(errorMessageNode).add('bpp-error-message');\n\n        // insert errorMessageNode after controlNode\n        controlNode.parentNode.insertBefore(errorMessageNode, controlNode.nextSibling);\n      }\n\n      errorMessageNode.textContent = error;\n\n      domClasses(controlNode).add('invalid');\n    } else {\n      domClasses(controlNode).remove('invalid');\n\n      if (errorMessageNode) {\n        controlNode.parentNode.removeChild(errorMessageNode);\n      }\n    }\n  });\n\n  return valid;\n};\n\n\n/**\n * Check if the entry contains valid input\n */\nPropertiesPanel.prototype.validate = function(entry, values, entryNode) {\n  var self = this;\n\n  var current = this._current;\n\n  var valid = true;\n\n  entryNode = entryNode || domQuery('[data-entry=\"' + entry.id + '\"]', current.panel);\n\n  if (values instanceof Array) {\n    var listContainer = domQuery('[data-list-entry-container]', entryNode),\n        listEntryNodes = listContainer.children || [];\n\n    // create new elements\n    for (var i = 0; i < values.length; i++) {\n      var listValue = values[i];\n\n      if (entry.validateListItem) {\n\n        var validationErrors = entry.validateListItem(current.element, listValue, entryNode, i),\n            listEntryNode = listEntryNodes[i];\n\n        valid = self.applyValidationErrors(validationErrors, listEntryNode) && valid;\n      }\n    }\n  } else {\n    if (entry.validate) {\n      this.validationErrors = entry.validate(current.element, values, entryNode);\n\n      valid = self.applyValidationErrors(this.validationErrors, entryNode) && valid;\n    }\n  }\n\n  return valid;\n};\n\nPropertiesPanel.prototype.getEntry = function(id) {\n  return this._current && this._current.entries[id];\n};\n\nPropertiesPanel.prototype._create = function(element, tabs) {\n\n  if (!element) {\n    return null;\n  }\n\n  var containerNode = this._container;\n\n  var panelNode = this._createPanel(element, tabs);\n\n  containerNode.appendChild(panelNode);\n\n  var entries = extractEntries(tabs);\n  var groups = extractGroups(tabs);\n\n  return {\n    tabs: tabs,\n    groups: groups,\n    entries: entries,\n    element: element,\n    panel: panelNode\n  };\n};\n\n/**\n * Update variable parts of the entry node on element changes.\n *\n * @param {djs.model.Base} element\n * @param {EntryDescriptor} entry\n * @param {Object} values\n * @param {HTMLElement} entryNode\n * @param {Number} idx\n */\nPropertiesPanel.prototype._bindTemplate = function(element, entry, values, entryNode, idx) {\n\n  var eventBus = this._eventBus;\n\n  function isPropertyEditable(entry, propertyName) {\n    return eventBus.fire('propertiesPanel.isPropertyEditable', {\n      entry: entry,\n      propertyName: propertyName,\n      element: element\n    });\n  }\n\n  var inputNodes = getPropertyPlaceholders(entryNode);\n\n  forEach(inputNodes, function(node) {\n\n    var name,\n        newValue,\n        editable;\n\n    // we deal with an input element\n    if ('value' in node || isContentEditable(node) === 'true') {\n      name = domAttr(node, 'name') || domAttr(node, 'data-name');\n      newValue = values[name];\n\n      editable = isPropertyEditable(entry, name);\n      if (editable && entry.editable) {\n        editable = entry.editable(element, entryNode, node, name, newValue, idx);\n      }\n\n      domAttr(node, 'readonly', editable ? null : '');\n      domAttr(node, 'disabled', editable ? null : '');\n\n      // take full control over setting the value\n      // and possibly updating the input in entry#setControlValue\n      if (entry.setControlValue) {\n        entry.setControlValue(element, entryNode, node, name, newValue, idx);\n      } else if (isToggle(node)) {\n        setToggleValue(node, newValue);\n      } else if (isSelect(node)) {\n        setSelectValue(node, newValue);\n      } else {\n        setInputValue(node, newValue);\n      }\n    }\n\n    // we deal with some non-editable html element\n    else {\n      name = domAttr(node, 'data-value');\n      newValue = values[name];\n      if (entry.setControlValue) {\n        entry.setControlValue(element, entryNode, node, name, newValue, idx);\n      } else {\n        setTextValue(node, newValue);\n      }\n    }\n  });\n};\n\n// TODO(nikku): WTF freaking name? Change / clarify.\nPropertiesPanel.prototype._updateActivation = function(current) {\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var element = current.element;\n\n  function isEntryVisible(entry, group, tab) {\n    return eventBus.fire('propertiesPanel.isEntryVisible', {\n      element: element,\n      entry: entry,\n      group: group,\n      tab: tab\n    });\n  }\n\n  function isGroupVisible(group, element, groupNode) {\n    if (isFunction(group.enabled)) {\n      return group.enabled(element, groupNode);\n    } else {\n      return true;\n    }\n  }\n\n  function isTabVisible(tab, element) {\n    if (isFunction(tab.enabled)) {\n      return tab.enabled(element);\n    } else {\n      return true;\n    }\n  }\n\n  function toggleVisible(node, visible) {\n    domClasses(node).toggle(HIDE_CLASS, !visible);\n  }\n\n  function updateLabel(element, selector, text) {\n    var labelNode = domQuery(selector, element);\n\n    if (!labelNode) {\n      return;\n    }\n\n    labelNode.textContent = text;\n  }\n\n  var panelNode = current.panel;\n\n  forEach(current.tabs, function(tab) {\n\n    var tabNode = domQuery('[data-tab=' + tab.id + ']', panelNode);\n    var tabLinkNode = domQuery('[data-tab-target=' + tab.id + ']', panelNode).parentNode;\n\n    var tabVisible = false;\n\n    forEach(tab.groups, function(group) {\n\n      var groupVisible = false;\n\n      var groupNode = domQuery('[data-group=' + group.id + ']', tabNode);\n\n      forEach(group.entries, function(entry) {\n\n        var entryNode = domQuery('[data-entry=\"' + entry.id + '\"]', groupNode);\n\n        var entryVisible = isEntryVisible(entry, group, tab);\n\n        groupVisible = groupVisible || entryVisible;\n\n        toggleVisible(entryNode, entryVisible);\n\n        var values = 'get' in entry ? entry.get(element, entryNode) : {};\n\n        if (values instanceof Array) {\n          var listEntryContainer = domQuery('[data-list-entry-container]', entryNode);\n          var existingElements = listEntryContainer.children || [];\n\n          for (var i = 0; i < values.length; i++) {\n            var listValue = values[i];\n            var listItemNode = existingElements[i];\n            if (!listItemNode) {\n              listItemNode = domify(entry.createListEntryTemplate(listValue, i, listEntryContainer));\n              listEntryContainer.appendChild(listItemNode);\n            }\n            domAttr(listItemNode, 'data-index', i);\n\n            self._bindTemplate(element, entry, listValue, listItemNode, i);\n          }\n\n          var entriesToRemove = existingElements.length - values.length;\n\n          for (var j = 0; j < entriesToRemove; j++) {\n\n            // remove orphaned element\n            listEntryContainer.removeChild(listEntryContainer.lastChild);\n          }\n\n        } else {\n          self._bindTemplate(element, entry, values, entryNode);\n        }\n\n        // update conditionally visible elements\n        self.updateState(entry, entryNode);\n        self.validate(entry, values, entryNode);\n\n        // remember initial state for later dirty checking\n        entry.oldValues = getFormControlValues(entryNode);\n      });\n\n      if (typeof group.label === 'function') {\n        updateLabel(groupNode, '.group-label', group.label(element, groupNode));\n      }\n\n      groupVisible = groupVisible && isGroupVisible(group, element, groupNode);\n\n      tabVisible = tabVisible || groupVisible;\n\n      toggleVisible(groupNode, groupVisible);\n    });\n\n    tabVisible = tabVisible && isTabVisible(tab, element);\n\n    toggleVisible(tabNode, tabVisible);\n    toggleVisible(tabLinkNode, tabVisible);\n  });\n\n  // inject elements id into header\n  updateLabel(panelNode, '[data-label-id]', getBusinessObject(element).id || '');\n};\n\nPropertiesPanel.prototype._createPanel = function(element, tabs) {\n  var self = this;\n\n  var panelNode = domify('<div class=\"bpp-properties\"></div>'),\n      headerNode = domify('<div class=\"bpp-properties-header\">' +\n        '<div class=\"label\" data-label-id></div>' +\n      '</div>'),\n      tabBarNode = domify('<div class=\"bpp-properties-tab-bar\"></div>'),\n      tabLinksNode = domify('<ul class=\"bpp-properties-tabs-links\"></ul>'),\n      tabContainerNode = domify('<div class=\"bpp-properties-tabs-container\"></div>');\n\n  panelNode.appendChild(headerNode);\n\n  forEach(tabs, function(tab, tabIndex) {\n\n    if (!tab.id) {\n      throw new Error('tab must have an id');\n    }\n\n    var tabNode = domify('<div class=\"bpp-properties-tab\" data-tab=\"' + escapeHTML(tab.id) + '\"></div>'),\n        tabLinkNode = domify('<li class=\"bpp-properties-tab-link\">' +\n          '<a href data-tab-target=\"' + escapeHTML(tab.id) + '\">' + escapeHTML(tab.label) + '</a>' +\n        '</li>');\n\n    var groups = tab.groups;\n\n    forEach(groups, function(group) {\n\n      if (!group.id) {\n        throw new Error('group must have an id');\n      }\n\n      var groupNode = domify('<div class=\"bpp-properties-group\" data-group=\"' + escapeHTML(group.id) + '\">' +\n          '<span class=\"group-toggle\"></span>' +\n          '<div class=\"group-header\">' +\n            '<span class=\"group-label\">' + escapeHTML(group.label) + '</span>' +\n          '</div>' +\n        '</div>');\n\n      if (group.dropdown) {\n        domQuery('.group-header', groupNode).appendChild(createDropdown(group.dropdown));\n      }\n\n      // TODO(nre): use event delegation to handle that...\n      groupNode.querySelector('.group-toggle').addEventListener('click', function(evt) {\n        domClasses(groupNode).toggle('group-closed');\n        evt.preventDefault();\n        evt.stopPropagation();\n      });\n      groupNode.addEventListener('click', function(evt) {\n        if (!evt.defaultPrevented && domClasses(groupNode).has('group-closed')) {\n          domClasses(groupNode).remove('group-closed');\n        }\n      });\n\n      forEach(group.entries, function(entry) {\n\n        if (!entry.id) {\n          throw new Error('entry must have an id');\n        }\n\n        var html = entry.html;\n\n        if (typeof html === 'string') {\n          html = domify(html);\n        }\n\n        // unwrap jquery\n        if (html.get && html.constructor.prototype.jquery) {\n          html = html.get(0);\n        }\n\n        var entryNode = domify('<div class=\"bpp-properties-entry\" data-entry=\"' + escapeHTML(entry.id) + '\"></div>');\n\n        forEach(entry.cssClasses || [], function(cssClass) {\n          domClasses(entryNode).add(cssClass);\n        });\n\n        entryNode.appendChild(html);\n\n        groupNode.appendChild(entryNode);\n\n        // update conditionally visible elements\n        self.updateState(entry, entryNode);\n      });\n\n      tabNode.appendChild(groupNode);\n    });\n\n    tabLinksNode.appendChild(tabLinkNode);\n    tabContainerNode.appendChild(tabNode);\n  });\n\n  tabBarNode.appendChild(tabLinksNode);\n\n  panelNode.appendChild(tabBarNode);\n  panelNode.appendChild(tabContainerNode);\n\n  return panelNode;\n};\n\n\n\nfunction setInputValue(node, value) {\n\n  var contentEditable = isContentEditable(node);\n\n  var oldValue = contentEditable ? node.innerText : node.value;\n\n  var selection;\n\n  // prevents input fields from having the value 'undefined'\n  if (value === undefined) {\n    value = '';\n  }\n\n  if (oldValue === value) {\n    return;\n  }\n\n  // update selection on undo/redo\n  if (document.activeElement === node) {\n    selection = updateSelection(getSelection(node), oldValue, value);\n  }\n\n  if (contentEditable) {\n    node.innerText = value;\n  } else {\n    node.value = value;\n  }\n\n  if (selection) {\n    setSelection(node, selection);\n  }\n}\n\nfunction setSelectValue(node, value) {\n  if (value !== undefined) {\n    node.value = value;\n  }\n}\n\nfunction setToggleValue(node, value) {\n  var nodeValue = node.value;\n\n  node.checked = (value === nodeValue) || (!domAttr(node, 'value') && value);\n}\n\nfunction setTextValue(node, value) {\n  node.textContent = value;\n}\n\nfunction getSelection(node) {\n\n  return isContentEditable(node) ? getContentEditableSelection(node) : {\n    start: node.selectionStart,\n    end: node.selectionEnd\n  };\n}\n\nfunction getContentEditableSelection(node) {\n\n  var selection = window.getSelection();\n\n  var focusNode = selection.focusNode,\n      focusOffset = selection.focusOffset,\n      anchorOffset = selection.anchorOffset;\n\n  if (!focusNode) {\n    throw new Error('not selected');\n  }\n\n  // verify we have selection on the current element\n  if (!node.contains(focusNode)) {\n    throw new Error('not selected');\n  }\n\n  return {\n    start: Math.min(focusOffset, anchorOffset),\n    end: Math.max(focusOffset, anchorOffset)\n  };\n}\n\nfunction setSelection(node, selection) {\n\n  if (isContentEditable(node)) {\n    setContentEditableSelection(node, selection);\n  } else {\n    node.selectionStart = selection.start;\n    node.selectionEnd = selection.end;\n  }\n}\n\nfunction setContentEditableSelection(node, selection) {\n\n  var focusNode,\n      domRange,\n      domSelection;\n\n  focusNode = node.firstChild || node,\n  domRange = document.createRange();\n  domRange.setStart(focusNode, selection.start);\n  domRange.setEnd(focusNode, selection.end);\n\n  domSelection = window.getSelection();\n  domSelection.removeAllRanges();\n  domSelection.addRange(domRange);\n}\n\nfunction isImplicitRoot(element) {\n  return element.id === '__implicitroot';\n}","'use strict';\n\nvar forEach = require('lodash/forEach');\n\n/**\n * A handler that combines and executes multiple commands.\n *\n * All updates are bundled on the command stack and executed in one step.\n * This also makes it possible to revert the changes in one step.\n *\n * Example use case: remove the camunda:formKey attribute and in addition\n * add all form fields needed for the camunda:formData property.\n *\n * @class\n * @constructor\n */\nfunction MultiCommandHandler(commandStack) {\n  this._commandStack = commandStack;\n}\n\nMultiCommandHandler.$inject = [ 'commandStack' ];\n\nmodule.exports = MultiCommandHandler;\n\nMultiCommandHandler.prototype.preExecute = function(context) {\n\n  var commandStack = this._commandStack;\n\n  forEach(context, function(command) {\n    commandStack.execute(command.cmd, command.context);\n  });\n};","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    forEach = require('lodash/forEach');\n\nvar EventDefinitionHelper = {};\n\nmodule.exports = EventDefinitionHelper;\n\nEventDefinitionHelper.getEventDefinition = function(element, eventType) {\n\n  var bo = getBusinessObject(element),\n      eventDefinition = null;\n\n  if (bo.eventDefinitions) {\n    forEach(bo.eventDefinitions, function(event) {\n      if (is(event, eventType)) {\n        eventDefinition = event;\n      }\n    });\n  }\n\n  return eventDefinition;\n};\n\nEventDefinitionHelper.getTimerEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:TimerEventDefinition');\n};\n\nEventDefinitionHelper.getMessageEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:MessageEventDefinition');\n};\n\nEventDefinitionHelper.getSignalEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:SignalEventDefinition');\n};\n\nEventDefinitionHelper.getErrorEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:ErrorEventDefinition');\n};\n\nEventDefinitionHelper.getEscalationEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:EscalationEventDefinition');\n};\n\nEventDefinitionHelper.getCompensateEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:CompensateEventDefinition');\n};\n\nEventDefinitionHelper.getLinkEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:LinkEventDefinition');\n};\n\nEventDefinitionHelper.getConditionalEventDefinition = function(element) {\n  return this.getEventDefinition(element, 'bpmn:ConditionalEventDefinition');\n};\n","/** Used to match wrap detail comments. */\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\n\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\nfunction insertWrapDetails(source, details) {\n  var length = details.length;\n  if (!length) {\n    return source;\n  }\n  var lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n\nmodule.exports = insertWrapDetails;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('./CmdHelper');\n\n\nvar ParticipantHelper = {};\n\nmodule.exports = ParticipantHelper;\n\nParticipantHelper.modifyProcessBusinessObject = function(element, property, values) {\n  if (!is(element, 'bpmn:Participant')) {\n    return {};\n  }\n\n  var bo = getBusinessObject(element).get('processRef'),\n      properties = {};\n\n  properties[property] = values[property];\n\n  return cmdHelper.updateBusinessObject(element, bo, properties);\n};\n\nParticipantHelper.getProcessBusinessObject = function(element, propertyName) {\n  if (!is(element, 'bpmn:Participant')) {\n    return {};\n  }\n\n  var bo = getBusinessObject(element).get('processRef'),\n      properties = {};\n\n  properties[propertyName] = bo.get(propertyName);\n\n  return properties;\n};","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var escapeHTML = require('../../../../Utils').escapeHTML;\r\n\r\nvar getTemplateId = require('../Helper').getTemplateId;\r\n\r\nvar domClasses = require('min-dom').classes,\r\n    domEvent = require('min-dom').event,\r\n    domify = require('min-dom').domify,\r\n    domQuery = require('min-dom').query;\r\n\r\nvar isUndefined = require('lodash/isUndefined');\r\n\r\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\r\n\r\nvar getVersionOrDateFromTemplate = require('./Helper').getVersionOrDateFromTemplate;\r\n\r\nvar MAX_DESCRIPTION_LENGTH = 200;\r\n\r\nmodule.exports = function(\r\n    element,\r\n    commandStack,\r\n    elementTemplates,\r\n    modeling,\r\n    replace,\r\n    selection,\r\n    translate) {\r\n  var currentElementTemplate = elementTemplates.get(element);\r\n\r\n  var entries = [];\r\n\r\n  var description,\r\n      newestElementTemplate;\r\n\r\n  if (currentElementTemplate) {\r\n    newestElementTemplate = findNewestElementTemplate(elementTemplates, currentElementTemplate);\r\n\r\n    if (newestElementTemplate) {\r\n      entries.push({\r\n        id: 'element-template-update',\r\n        cssClasses: [ 'bpp-entry--warning' ],\r\n        html: createUpdateTemplateEntry(element, currentElementTemplate, newestElementTemplate, commandStack, translate)\r\n      });\r\n    }\r\n\r\n    description = currentElementTemplate.description;\r\n\r\n    if (description) {\r\n      entries.push(createDescriptionEntry(description, translate));\r\n    }\r\n  } else {\r\n    entries.push({\r\n      id: 'element-template-not-found',\r\n      cssClasses: [ 'bpp-entry--warning' ],\r\n      html: createTemplateNotFoundEntry(element, modeling, translate)\r\n    });\r\n  }\r\n\r\n  if (currentElementTemplate) {\r\n    entries.push({\r\n      id: 'element-template-version',\r\n      html: '<p>' + getVersionOrDateFromTemplate(currentElementTemplate) + '</p>'\r\n    });\r\n  }\r\n\r\n  return {\r\n    id: 'elementTemplateDescription',\r\n    label: currentElementTemplate ? currentElementTemplate.name : translate('Missing Template'),\r\n    dropdown: {\r\n      menu: [\r\n        {\r\n          id: 'element-template-unlink',\r\n          label: translate('Unlink'),\r\n          onClick: function() {\r\n            modeling.updateProperties(element, {\r\n              'camunda:modelerTemplate': null,\r\n              'camunda:modelerTemplateVersion': null\r\n            });\r\n          }\r\n        },\r\n        {\r\n          id: 'element-template-remove',\r\n          label: translate('Remove'),\r\n          onClick: function() {\r\n            var businessObject = getBusinessObject(element);\r\n\r\n            var type = businessObject.$type,\r\n                eventDefinitionType = getEventDefinitionType(businessObject);\r\n\r\n            var newElement = replace.replaceElement(element, {\r\n              type: type,\r\n              eventDefinitionType: eventDefinitionType\r\n            });\r\n\r\n            selection.select(newElement);\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    entries: entries\r\n  };\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction createDescriptionEntry(description, translate) {\r\n  description = escapeHTML(description);\r\n\r\n  var html = domify('<p class=\"description description--expanded\"></p>');\r\n\r\n  var descriptionText = domify('<span class=\"description__text\">' + description + '</span>');\r\n\r\n  html.appendChild(descriptionText);\r\n\r\n  function toggleExpanded(expanded) {\r\n    if (expanded) {\r\n      domClasses(html).add('description--expanded');\r\n\r\n      descriptionText.textContent = description + ' ';\r\n\r\n      expand.textContent = translate('Less');\r\n    } else {\r\n      domClasses(html).remove('description--expanded');\r\n\r\n      descriptionText.textContent = descriptionShortened + ' ... ';\r\n\r\n      expand.textContent = translate('More');\r\n    }\r\n  }\r\n\r\n  var descriptionShortened,\r\n      expand,\r\n      expanded = false;\r\n\r\n  if (description.length > MAX_DESCRIPTION_LENGTH) {\r\n    descriptionShortened = description.slice(0, MAX_DESCRIPTION_LENGTH);\r\n\r\n    expand = domify(\r\n      '<span class=\"bpp-entry-link description__expand\">' +\r\n        translate('More') +\r\n      '</span>'\r\n    );\r\n\r\n    domEvent.bind(expand, 'click', function() {\r\n      expanded = !expanded;\r\n\r\n      toggleExpanded(expanded);\r\n    });\r\n\r\n    html.appendChild(expand);\r\n\r\n    toggleExpanded(expanded);\r\n  }\r\n\r\n  return {\r\n    id: 'element-template-description',\r\n    html: html\r\n  };\r\n}\r\n\r\nfunction getEventDefinitionType(businessObject) {\r\n  if (!businessObject.eventDefinitions) {\r\n    return null;\r\n  }\r\n\r\n  var eventDefinition = businessObject.eventDefinitions[ 0 ];\r\n\r\n  if (!eventDefinition) {\r\n    return null;\r\n  }\r\n\r\n  return eventDefinition.$type;\r\n}\r\n\r\nfunction createTemplateNotFoundEntry(element, modeling, translate) {\r\n  var templateId = getTemplateId(element);\r\n\r\n  var html = domify(\r\n    '<p>' +\r\n    translate(\r\n      'The applied Template &lt;{templateId}&gt; was not found and therefore its data is not accessible.' +\r\n      '<br />' +\r\n      '<br />' +\r\n      'Unlink in order to access the data.', { templateId: templateId }\r\n    ) +\r\n    '</p>' +\r\n    '<p style=\"text-align: right;\">' +\r\n    '<a class=\"bpp-entry-link bpp-entry-link-button\">Unlink</a>' +\r\n    '</p>'\r\n  );\r\n\r\n  domQuery('.bpp-entry-link', html).addEventListener('click', function() {\r\n    modeling.updateProperties(element, {\r\n      'camunda:modelerTemplate': null\r\n    });\r\n  });\r\n\r\n  return html;\r\n}\r\n\r\nfunction createUpdateTemplateEntry(element, oldElementTemplate, newElementTemplate, commandStack, translate) {\r\n  var newElementTemplateVersion = getVersionOrDateFromTemplate(newElementTemplate);\r\n\r\n  var html = domify(\r\n    '<p>' +\r\n    translate(\r\n      'A new version of the Template ({newElementTemplateVersion}) is available.',\r\n      { newElementTemplateVersion: newElementTemplateVersion }\r\n    ) +\r\n    '</p>' +\r\n    '<p style=\"text-align: right;\">' +\r\n    '<a class=\"bpp-entry-link bpp-entry-link-button\">Update</a>' +\r\n    '</p>'\r\n  );\r\n\r\n  domQuery('.bpp-entry-link', html).addEventListener('click', function() {\r\n    commandStack.execute('propertiesPanel.camunda.changeTemplate', {\r\n      element: element,\r\n      newTemplate: newElementTemplate,\r\n      oldTemplate: oldElementTemplate\r\n    });\r\n  });\r\n\r\n  return html;\r\n}\r\n\r\nfunction findNewestElementTemplate(elementTemplates, currentElementTemplate) {\r\n  if (isUndefined(currentElementTemplate.version)) {\r\n    return null;\r\n  }\r\n\r\n  return elementTemplates\r\n    .getAll()\r\n    .filter(function(elementTemplate) {\r\n      return currentElementTemplate.id === elementTemplate.id && !isUndefined(elementTemplate.version);\r\n    })\r\n    .reduce(function(newestElementTemplate, elementTemplate) {\r\n      if (currentElementTemplate.version < elementTemplate.version) {\r\n        return elementTemplate;\r\n      }\r\n\r\n      if (newestElementTemplate && newestElementTemplate.version < elementTemplate.version) {\r\n        return elementTemplate;\r\n      }\r\n\r\n      return newestElementTemplate;\r\n    }, null);\r\n}","'use strict';\n\nvar escapeHTML = require('../Utils').escapeHTML;\n\nvar domify = require('min-dom').domify,\n    domQuery = require('min-dom').query;\n\nvar forEach = require('lodash/forEach');\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\n\nvar isList = function(list) {\n  return !(!list || Object.prototype.toString.call(list) !== '[object Array]');\n};\n\nvar addEmptyParameter = function(list) {\n  return list.concat([ { name: '', value: '' } ]);\n};\n\nvar createOption = function(option) {\n  return '<option value=\"' + option.value + '\">' + option.name + '</option>';\n};\n\n/**\n * @param  {Object} options\n * @param  {string} options.id\n * @param  {string} [options.label]\n * @param  {Array<Object>} options.selectOptions\n * @param  {string} options.modelProperty\n * @param  {boolean} options.emptyParameter\n * @param  {function} options.disabled\n * @param  {function} options.hidden\n * @param  {Object} defaultParameters\n *\n * @return {Object}\n */\nvar selectbox = function(translate, options, defaultParameters) {\n  var resource = defaultParameters,\n      label = options.label || resource.id,\n      selectOptions = options.selectOptions || [ { name: '', value: '' } ],\n      modelProperty = options.modelProperty,\n      emptyParameter = options.emptyParameter,\n      canBeDisabled = !!options.disabled && typeof options.disabled === 'function',\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      description = options.description;\n\n\n  if (emptyParameter) {\n    selectOptions = addEmptyParameter(selectOptions);\n  }\n\n\n  resource.html =\n    domify('<label for=\"camunda-' + escapeHTML(resource.id) + '\"' +\n    (canBeDisabled ? 'data-disable=\"isDisabled\" ' : '') +\n    (canBeHidden ? 'data-show=\"isHidden\" ' : '') +\n    '>' + escapeHTML(label) + '</label>' +\n    '<select id=\"camunda-' + escapeHTML(resource.id) + '-select\" name=\"' +\n    escapeHTML(modelProperty) + '\"' +\n    (canBeDisabled ? 'data-disable=\"isDisabled\" ' : '') +\n    (canBeHidden ? 'data-show=\"isHidden\" ' : '') +\n    ' data-value></select>');\n\n  var select = domQuery('select', resource.html);\n\n  if (isList(selectOptions)) {\n    forEach(selectOptions, function(option) {\n      select.appendChild(\n        domify(\n          '<option value=\"' + escapeHTML(option.value) +\n          (option.title ? '\" title=\"' + escapeHTML(option.title) : '') +\n          '\">' +\n          (option.name ? escapeHTML(option.name) : '') +\n          '</option>'\n        )\n      );\n    });\n  }\n\n  // add description below select box entry field\n  if (description && typeof options.showCustomInput !== 'function') {\n    resource.html.appendChild(entryFieldDescription(translate, description, { show: canBeHidden && 'isHidden' }));\n  }\n\n  /**\n   * Fill the select box options dynamically.\n   *\n   * Calls the defined function #selectOptions in the entry to get the\n   * values for the options and set the value to the inputNode.\n   *\n   * @param {djs.model.Base} element\n   * @param {HTMLElement} entryNode\n   * @param {EntryDescriptor} inputNode\n   * @param {Object} inputName\n   * @param {Object} newValue\n   */\n  resource.setControlValue = function(element, entryNode, inputNode, inputName, newValue) {\n    if (typeof selectOptions === 'function') {\n\n      var options = selectOptions(element, inputNode);\n\n      if (options) {\n\n        // remove existing options\n        while (inputNode.firstChild) {\n          inputNode.removeChild(inputNode.firstChild);\n        }\n\n        // add options\n        forEach(options, function(option) {\n          var template = domify(createOption(option));\n\n          inputNode.appendChild(template);\n        });\n\n\n      }\n    }\n\n    // set select value\n    if (newValue !== undefined) {\n      inputNode.value = newValue;\n    }\n\n  };\n\n  if (canBeDisabled) {\n    resource.isDisabled = function() {\n      return options.disabled.apply(resource, arguments);\n    };\n  }\n\n  if (canBeHidden) {\n    resource.isHidden = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.cssClasses = ['bpp-dropdown'];\n\n  return resource;\n};\n\nmodule.exports = selectbox;\n","'use strict';\n\nvar reduce = require('lodash/transform'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    keys = require('lodash/keys'),\n    forEach = require('lodash/forEach');\n\n/**\n * A handler that implements a BPMN 2.0 property update\n * for business objects which are not represented in the\n * diagram.\n *\n * This is useful in the context of the properties panel in\n * order to update child elements of elements visible in\n * the diagram.\n *\n * Example: perform an update of a specific event definition\n * of an intermediate event.\n *\n * @class\n * @constructor\n */\nfunction UpdateBusinessObjectHandler(elementRegistry) {\n  this._elementRegistry = elementRegistry;\n}\n\nUpdateBusinessObjectHandler.$inject = [ 'elementRegistry' ];\n\nmodule.exports = UpdateBusinessObjectHandler;\n\n/**\n * returns the root element\n */\nfunction getRoot(businessObject) {\n  var parent = businessObject;\n  while (parent.$parent) {\n    parent = parent.$parent;\n  }\n  return parent;\n}\n\nfunction getProperties(businessObject, propertyNames) {\n  return reduce(propertyNames, function(result, key) {\n    result[key] = businessObject.get(key);\n    return result;\n  }, {});\n}\n\n\nfunction setProperties(businessObject, properties) {\n  forEach(properties, function(value, key) {\n    businessObject.set(key, value);\n  });\n}\n\n\n// api /////////////////////////////////////////////\n\n/**\n * Updates a business object with a list of new properties\n *\n * @method  UpdateBusinessObjectHandler#execute\n *\n * @param {Object} context\n * @param {djs.model.Base} context.element the element which has a child business object updated\n * @param {moddle.businessObject} context.businessObject the businessObject to update\n * @param {Object} context.properties a list of properties to set on the businessObject\n *\n * @return {Array<djs.mode.Base>} the updated element\n */\nUpdateBusinessObjectHandler.prototype.execute = function(context) {\n\n  var element = context.element,\n      businessObject = context.businessObject,\n      rootElements = getRoot(businessObject).rootElements,\n      referenceType = context.referenceType,\n      referenceProperty = context.referenceProperty,\n      changed = [ element ]; // this will not change any diagram-js elements\n\n  if (!element) {\n    throw new Error('element required');\n  }\n\n  if (!businessObject) {\n    throw new Error('businessObject required');\n  }\n\n  var properties = context.properties,\n      oldProperties = context.oldProperties || getProperties(businessObject, keys(properties));\n\n  // check if there the update needs an external element for reference\n  if (typeof referenceType !== 'undefined' && typeof referenceProperty !== 'undefined') {\n    forEach(rootElements, function(rootElement) {\n      if (is(rootElement, referenceType)) {\n        if (rootElement.id === properties[referenceProperty]) {\n          properties[referenceProperty] = rootElement;\n        }\n      }\n    });\n  }\n\n  // update properties\n  setProperties(businessObject, properties);\n\n  // store old values\n  context.oldProperties = oldProperties;\n  context.changed = changed;\n\n  // indicate changed on objects affected by the update\n  return changed;\n};\n\n/**\n * Reverts the update\n *\n * @method  UpdateBusinessObjectHandler#revert\n *\n * @param {Object} context\n *\n * @return {djs.mode.Base} the updated element\n */\nUpdateBusinessObjectHandler.prototype.revert = function(context) {\n\n  var oldProperties = context.oldProperties,\n      businessObject = context.businessObject;\n\n  // update properties\n  setProperties(businessObject, oldProperties);\n\n  return context.changed;\n};\n","'use strict';\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    is = ModelUtil.is,\n    getBusinessObject = ModelUtil.getBusinessObject;\n\nvar eventDefinitionHelper = require('./EventDefinitionHelper');\nvar extensionsElementHelper = require('./ExtensionElementsHelper');\n\nvar ImplementationTypeHelper = {};\n\nmodule.exports = ImplementationTypeHelper;\n\n/**\n * Returns 'true' if the given element is 'camunda:ServiceTaskLike'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isServiceTaskLike = function(element) {\n  return is(element, 'camunda:ServiceTaskLike');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:DmnCapable'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isDmnCapable = function(element) {\n  return is(element, 'camunda:DmnCapable');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:ExternalCapable'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isExternalCapable = function(element) {\n  return is(element, 'camunda:ExternalCapable');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:TaskListener'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isTaskListener = function(element) {\n  return is(element, 'camunda:TaskListener');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:ExecutionListener'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isExecutionListener = function(element) {\n  return is(element, 'camunda:ExecutionListener');\n};\n\n/**\n * Returns 'true' if the given element is 'camunda:ExecutionListener' or\n * 'camunda:TaskListener'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isListener = function(element) {\n  return this.isTaskListener(element) || this.isExecutionListener(element);\n};\n\n/**\n * Returns 'true' if the given element is 'bpmn:SequenceFlow'\n *\n * @param {djs.model.Base} element\n *\n * @return {boolean} a boolean value\n */\nImplementationTypeHelper.isSequenceFlow = function(element) {\n  return is(element, 'bpmn:SequenceFlow');\n};\n\n/**\n * Get a 'camunda:ServiceTaskLike' business object.\n *\n * If the given element is not a 'camunda:ServiceTaskLike', then 'false'\n * is returned.\n *\n * @param {djs.model.Base} element\n *\n * @return {ModdleElement} the 'camunda:ServiceTaskLike' business object\n */\nImplementationTypeHelper.getServiceTaskLikeBusinessObject = function(element) {\n\n  if (is(element, 'bpmn:IntermediateThrowEvent') || is(element, 'bpmn:EndEvent')) {\n\n    // change business object to 'messageEventDefinition' when\n    // the element is a message intermediate throw event or message end event\n    // because the camunda extensions (e.g. camunda:class) are in the message\n    // event definition tag and not in the intermediate throw event or end event tag\n    var messageEventDefinition = eventDefinitionHelper.getMessageEventDefinition(element);\n    if (messageEventDefinition) {\n      element = messageEventDefinition;\n    }\n  }\n\n  return this.isServiceTaskLike(element) && getBusinessObject(element);\n\n};\n\n/**\n * Returns the implementation type of the given element.\n *\n * Possible implementation types are:\n * - dmn\n * - connector\n * - external\n * - class\n * - expression\n * - delegateExpression\n * - script\n * - or undefined, when no matching implementation type is found\n *\n * @param  {djs.model.Base} element\n *\n * @return {String} the implementation type\n */\nImplementationTypeHelper.getImplementationType = function(element) {\n\n  var bo = this.getServiceTaskLikeBusinessObject(element);\n\n  if (!bo) {\n    if (this.isListener(element)) {\n      bo = element;\n    } else {\n      return;\n    }\n  }\n\n  if (this.isDmnCapable(bo)) {\n    var decisionRef = bo.get('camunda:decisionRef');\n    if (typeof decisionRef !== 'undefined') {\n      return 'dmn';\n    }\n  }\n\n  if (this.isServiceTaskLike(bo)) {\n    var connectors = extensionsElementHelper.getExtensionElements(bo, 'camunda:Connector');\n    if (typeof connectors !== 'undefined') {\n      return 'connector';\n    }\n  }\n\n  if (this.isExternalCapable(bo)) {\n    var type = bo.get('camunda:type');\n    if (type === 'external') {\n      return 'external';\n    }\n  }\n\n  var cls = bo.get('camunda:class');\n  if (typeof cls !== 'undefined') {\n    return 'class';\n  }\n\n  var expression = bo.get('camunda:expression');\n  if (typeof expression !== 'undefined') {\n    return 'expression';\n  }\n\n  var delegateExpression = bo.get('camunda:delegateExpression');\n  if (typeof delegateExpression !== 'undefined') {\n    return 'delegateExpression';\n  }\n\n  if (this.isListener(bo)) {\n    var script = bo.get('script');\n    if (typeof script !== 'undefined') {\n      return 'script';\n    }\n  }\n\n};\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var getVariablesForScope = require('@bpmn-io/extract-process-variables').getVariablesForScope;\n\nvar groupBy = require('min-dash').groupBy,\n    flatten = require('min-dash').flatten,\n    forEach = require('min-dash').forEach,\n    keys = require('min-dash').keys,\n    map = require('min-dash').map,\n    sortBy = require('min-dash').sortBy;\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\n\nvar escapeHTML = require('../../../../Utils').escapeHTML;\n\nvar factory = require('../../../../factory/EntryFactory');\n\nvar entryFieldDescription = require('../../../../factory/EntryFieldDescription');\n\n\nmodule.exports = function(element, translate) {\n\n  var entries = [];\n\n  function createVariablesList(variables, scope) {\n    var scopePrefix = scope ? scope + '-' : '';\n\n    return flatten(map(variables, function(variable, idx) {\n\n      var name = variable.name,\n          origin = variable.origin,\n          variableEntries = [];\n\n      // title ///////////////////\n\n      var collapsible = factory.collapsible({\n        id: scopePrefix + 'variable- ' + idx + '-collapsible',\n        title: escapeHTML(name),\n        description: origin.toString(),\n        open: false,\n        get: function() {\n          return {\n            title: escapeHTML(name),\n            description: origin.toString()\n          };\n        }\n      });\n\n      var isOpen = collapsible.isOpen;\n\n      variableEntries.push(collapsible);\n\n      // created in //////////////////\n\n      var createdInHtml = '<div data-show=\"show\">' +\n        '<b>' + escapeHTML(translate('Created in')) + '</b>' +\n        createdInList(origin) +\n      '</div>';\n\n      variableEntries.push({\n        id: scopePrefix + 'variable- ' + idx + '-created-in',\n        html: createdInHtml,\n        cssClasses: [\n          'bpp-process-variables',\n          'bpp-process-variables__created-in'\n        ],\n        show: function() {\n          return isOpen();\n        }\n      });\n\n      return variableEntries;\n    }));\n  }\n\n\n  if (!canHaveProcessVariables(element)) {\n    return entries;\n  }\n\n  var businessObject = getBusinessObject(element),\n      rootElement = getRootElement(businessObject),\n      scope = getScope(element);\n\n  var variables = getVariablesForScope(scope, rootElement),\n      sorted = sortByName(variables),\n      withNames = populateElementNames(sorted),\n      byScope = groupByScope(withNames);\n\n  // (1) tab description entry\n  var description = entryFieldDescription(translate, translate('Available process variables, identified in the diagram.'));\n\n  entries.push({\n    id: 'process-variables-description',\n    html: description,\n    cssClasses: [\n      'bpp-process-variables',\n      'bpp-process-variables__description'\n    ]\n  });\n\n  // (2) empty list placeholder\n  if (!withNames.length) {\n    var placeholder = entryFieldDescription(translate, translate('No variables found.'));\n\n    entries.push({\n      id: 'process-variables-placeholder',\n      html: placeholder\n    });\n\n    return entries;\n  }\n\n  if (keys(byScope).length > 1) {\n\n    // (3a) multiple scopes variables lists\n\n    // assumption: variables extractor fetches parent variables first\n    forEach(reverse(keys(byScope)), function(scope) {\n      var variables = byScope[scope];\n\n      entries.push({\n        id: scope + '-scope-title',\n        html: '<div>' + escapeHTML(translate('Scope: ')) + scope + '</div>',\n        cssClasses: [\n          'bpp-process-variables',\n          'bpp-process-variables__scope-title',\n          'bpp-collapsible-break'\n        ]\n      });\n\n      entries = entries.concat(createVariablesList(variables, scope));\n    });\n  } else {\n\n    // (3b) single scope variables list\n    entries = entries.concat(createVariablesList(withNames));\n  }\n\n\n  return entries;\n};\n\n\n// helpers //////////\n\nfunction getRootElement(element) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(businessObject, 'bpmn:Participant')) {\n    return businessObject.processRef;\n  }\n\n  if (is(businessObject, 'bpmn:Process')) {\n    return businessObject;\n  }\n\n  var parent = businessObject;\n\n  while (parent.$parent && !is(parent, 'bpmn:Process')) {\n    parent = parent.$parent;\n  }\n\n  return parent;\n}\n\nfunction getScope(element) {\n  if (is(element, 'bpmn:Participant')) {\n    return getBusinessObject(element).processRef.id;\n  }\n\n  return element.id;\n}\n\nfunction sortByName(variables) {\n  return sortBy(variables, function(variable) {\n    return variable.name;\n  });\n}\n\nfunction populateElementNames(variables) {\n  forEach(variables, function(variable) {\n    var names = map(variable.origin, function(element) {\n      return element.name || element.id;\n    });\n\n    variable.origin = names;\n    variable.scope = variable.scope.name || variable.scope.id;\n  });\n\n  return variables;\n}\n\nfunction canHaveProcessVariables(element) {\n  var businessObject = getBusinessObject(element);\n\n  return (\n    isAny(element, ['bpmn:Process', 'bpmn:SubProcess']) ||\n      (is(element, 'bpmn:Participant') && businessObject.get('processRef'))\n  );\n}\n\nfunction groupByScope(variables) {\n  return groupBy(variables, 'scope');\n}\n\nfunction createdInList(origin) {\n  var html = '';\n\n  forEach(origin, function(o) {\n    html += '<p class=\"bpp-process-variables__created-in-item\">' + o + '</p>';\n  });\n  return html;\n}\n\nfunction reverse(array) {\n  return map(array, function(a, i) {\n    return array[array.length - 1 - i];\n  });\n}","'use strict';\n\nvar assign = require('lodash/assign');\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar asyncCapableHelper = require('../../../../helper/AsyncCapableHelper'),\n    eventDefinitionHelper = require('../../../../helper/EventDefinitionHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nfunction isAsyncBefore(bo) {\n  return asyncCapableHelper.isAsyncBefore(bo);\n}\n\nfunction isAsyncAfter(bo) {\n  return asyncCapableHelper.isAsyncAfter(bo);\n}\n\nfunction isExclusive(bo) {\n  return asyncCapableHelper.isExclusive(bo);\n}\n\nfunction removeFailedJobRetryTimeCycle(bo, element) {\n  return asyncCapableHelper.removeFailedJobRetryTimeCycle(bo, element);\n}\n\nfunction canRemoveFailedJobRetryTimeCycle(element) {\n  return !eventDefinitionHelper.getTimerEventDefinition(element);\n}\n\nmodule.exports = function(element, bpmnFactory, options, translate) {\n\n  var getBusinessObject = options.getBusinessObject;\n\n  var idPrefix = options.idPrefix || '',\n      labelPrefix = options.labelPrefix || '';\n\n\n  var asyncBeforeEntry = entryFactory.checkbox(translate, {\n    id: idPrefix + 'asyncBefore',\n    label: labelPrefix + translate('Asynchronous Before'),\n    modelProperty: 'asyncBefore',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        asyncBefore: isAsyncBefore(bo)\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      var asyncBefore = !!values.asyncBefore;\n\n      var props = {\n        'camunda:asyncBefore': asyncBefore,\n        'camunda:async': false\n      };\n\n      var commands = [];\n      if (!isAsyncAfter(bo) && !asyncBefore) {\n        props = assign({ 'camunda:exclusive' : true }, props);\n        if (canRemoveFailedJobRetryTimeCycle(element)) {\n          commands.push(removeFailedJobRetryTimeCycle(bo, element));\n        }\n      }\n\n      commands.push(cmdHelper.updateBusinessObject(element, bo, props));\n      return commands;\n    }\n  });\n\n\n  var asyncAfterEntry = entryFactory.checkbox(translate, {\n    id: idPrefix + 'asyncAfter',\n    label: labelPrefix + translate('Asynchronous After'),\n    modelProperty: 'asyncAfter',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return {\n        asyncAfter: isAsyncAfter(bo)\n      };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      var asyncAfter = !!values.asyncAfter;\n\n      var props = {\n        'camunda:asyncAfter': asyncAfter\n      };\n\n      var commands = [];\n      if (!isAsyncBefore(bo) && !asyncAfter) {\n        props = assign({ 'camunda:exclusive' : true }, props);\n        if (canRemoveFailedJobRetryTimeCycle(element)) {\n          commands.push(removeFailedJobRetryTimeCycle(bo, element));\n        }\n      }\n\n      commands.push(cmdHelper.updateBusinessObject(element, bo, props));\n      return commands;\n    }\n  });\n\n\n  var exclusiveEntry = entryFactory.checkbox(translate, {\n    id: idPrefix + 'exclusive',\n    label: labelPrefix + translate('Exclusive'),\n    modelProperty: 'exclusive',\n\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n      return { exclusive: isExclusive(bo) };\n    },\n\n    set: function(element, values) {\n      var bo = getBusinessObject(element);\n      return cmdHelper.updateBusinessObject(element, bo, { 'camunda:exclusive': !!values.exclusive });\n    },\n\n    hidden: function(element) {\n      var bo = getBusinessObject(element);\n      return bo && !isAsyncAfter(bo) && !isAsyncBefore(bo);\n    }\n  });\n\n  return [ asyncBeforeEntry, asyncAfterEntry, exclusiveEntry ];\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\n\nvar find = require('lodash/find');\n\nvar TEMPLATE_ID_ATTR = 'camunda:modelerTemplate',\n    TEMPLATE_VERSION_ATTR = 'camunda:modelerTemplateVersion';\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template ID is stored.\n *\n * @type {String}\n */\nmodule.exports.TEMPLATE_ID_ATTR = TEMPLATE_ID_ATTR;\n\n/**\n * The BPMN 2.0 extension attribute name under\n * which the element template version is stored.\n *\n * @type {String}\n */\nmodule.exports.TEMPLATE_VERSION_ATTR = TEMPLATE_VERSION_ATTR;\n\n\n/**\n * Get template id for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nfunction getTemplateId(element) {\n\n  var bo = getBusinessObject(element);\n\n  if (bo) {\n    return bo.get(TEMPLATE_ID_ATTR);\n  }\n}\n\nmodule.exports.getTemplateId = getTemplateId;\n\n/**\n * Get template version for a given diagram element.\n *\n * @param {djs.model.Base} element\n *\n * @return {String}\n */\nfunction getTemplateVersion(element) {\n\n  var bo = getBusinessObject(element);\n\n  if (bo) {\n    return bo.get(TEMPLATE_VERSION_ATTR);\n  }\n}\n\nmodule.exports.getTemplateVersion = getTemplateVersion;\n\n\n/**\n * Find extension with given type in\n * BPMN element, diagram element or ExtensionElement.\n *\n * @param {ModdleElement|djs.model.Base} element\n * @param {String} type\n *\n * @return {ModdleElement} the extension\n */\nfunction findExtension(element, type) {\n  var bo = getBusinessObject(element);\n\n  var extensionElements;\n\n  if (is(bo, 'bpmn:ExtensionElements')) {\n    extensionElements = bo;\n  } else {\n    extensionElements = bo.extensionElements;\n  }\n\n  if (!extensionElements) {\n    return null;\n  }\n\n  return find(extensionElements.get('values'), function(e) {\n    return is(e, type);\n  });\n}\n\nmodule.exports.findExtension = findExtension;\n\n\nfunction findExtensions(element, types) {\n  var extensionElements = getExtensionElements(element);\n\n  if (!extensionElements) {\n    return [];\n  }\n\n  return extensionElements.get('values').filter(function(e) {\n    return isAny(e, types);\n  });\n}\n\nmodule.exports.findExtensions = findExtensions;\n\n\nfunction findCamundaInOut(element, binding) {\n\n  var extensionElements = getExtensionElements(element);\n\n  if (!extensionElements) {\n    return;\n  }\n\n  var matcher;\n\n  if (binding.type === 'camunda:in') {\n    matcher = function(e) {\n      return is(e, 'camunda:In') && isInOut(e, binding);\n    };\n  } else\n  if (binding.type === 'camunda:out') {\n    matcher = function(e) {\n      return is(e, 'camunda:Out') && isInOut(e, binding);\n    };\n  } else\n  if (binding.type === 'camunda:in:businessKey') {\n    matcher = function(e) {\n      return is(e, 'camunda:In') && 'businessKey' in e;\n    };\n  }\n\n  return find(extensionElements.get('values'), matcher);\n}\n\nmodule.exports.findCamundaInOut = findCamundaInOut;\n\nfunction findCamundaProperty(camundaProperties, binding) {\n  return find(camundaProperties.get('values'), function(p) {\n    return p.name === binding.name;\n  });\n}\n\nmodule.exports.findCamundaProperty = findCamundaProperty;\n\n\nfunction findInputParameter(inputOutput, binding) {\n  var parameters = inputOutput.get('inputParameters');\n\n  return find(parameters, function(p) {\n    return p.name === binding.name;\n  });\n}\n\nmodule.exports.findInputParameter = findInputParameter;\n\n\nfunction findOutputParameter(inputOutput, binding) {\n  var parameters = inputOutput.get('outputParameters');\n\n  return find(parameters, function(p) {\n    var value = p.value;\n\n    if (!binding.scriptFormat) {\n      return value === binding.source;\n    }\n\n    var definition = p.definition;\n\n    if (!definition || binding.scriptFormat !== definition.scriptFormat) {\n      return false;\n    }\n\n    return definition.value === binding.source;\n  });\n}\n\nmodule.exports.findOutputParameter = findOutputParameter;\n\n\n\n// helpers /////////////////////////////////\n\nfunction getExtensionElements(element) {\n  var bo = getBusinessObject(element);\n\n  if (is(bo, 'bpmn:ExtensionElements')) {\n    return bo;\n  } else {\n    return bo.extensionElements;\n  }\n}\n\n\nfunction isInOut(element, binding) {\n\n  if (binding.type === 'camunda:in') {\n\n    // find based on target attribute\n    if (binding.target) {\n      return element.target === binding.target;\n    }\n  }\n\n  if (binding.type === 'camunda:out') {\n\n    // find based on source / sourceExpression\n    if (binding.source) {\n      return element.source === binding.source;\n    }\n\n    if (binding.sourceExpression) {\n      return element.sourceExpression === binding.sourceExpression;\n    }\n  }\n\n  // find based variables / local combination\n  if (binding.variables) {\n    return element.variables === 'all' && (\n      binding.variables !== 'local' || element.local\n    );\n  }\n}\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is;\n\n/**\n * This function catches the <moddleCopy.canCopyProperty> event\n * and only allows the copy of the modelerTemplate property\n * if the element's type or its parent's is in\n * the list of elements the template applies to.\n */\nfunction ReplaceBehavior(elementTemplates, eventBus) {\n  eventBus.on('moddleCopy.canCopyProperty', function(context) {\n    var parent = context.parent;\n    var property = context.property;\n    var propertyName = context.propertyName;\n\n    if (propertyName !== 'modelerTemplate') {\n      return;\n    }\n\n    var elementTemplate = elementTemplates.get(property);\n\n    if (!elementTemplate) {\n      return false;\n    }\n\n    var appliesTo = elementTemplate.appliesTo;\n\n    var allowed = appliesTo.reduce(function(allowed, type) {\n      return allowed || is(parent, type);\n    }, false);\n\n    if (!allowed) {\n      return false;\n    }\n  });\n}\n\nReplaceBehavior.$inject = ['elementTemplates', 'eventBus'];\n\nmodule.exports = ReplaceBehavior;","var isLaziable = require('./_isLaziable'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & WRAP_CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n  if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n    bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n  }\n  var newData = [\n    func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n    newHoldersRight, argPos, ary, arity\n  ];\n\n  var result = wrapFunc.apply(undefined, newData);\n  if (isLaziable(func)) {\n    setData(result, newData);\n  }\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n\nmodule.exports = createRecurry;\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\n// input entities\nvar textInputField = require('./TextInputEntryFactory'),\n    checkboxField = require('./CheckboxEntryFactory'),\n    selectBoxField = require('./SelectEntryFactory'),\n    comboBoxField = require('./ComboEntryFactory'),\n    textBoxField = require('./TextBoxEntryFactory'),\n    validationAwareTextInputField = require('./ValidationAwareTextInput'),\n    tableField = require('./TableEntryFactory'),\n    labelEntry = require('./LabelFactory'),\n    link = require('./LinkEntryFactory'),\n    autoSuggestTextBoxField = require('./AutoSuggestTextBoxFactory'),\n    collapsible = require('./CollapsibleEntryFactory'),\n    toggleSwitch = require('./ToggleSwitchEntryFactory');\n\nvar cmdHelper = require('../helper/CmdHelper');\n\n// helpers ////////////////////////////////////////\n\nfunction ensureNotNull(prop) {\n  if (!prop) {\n    throw new Error(prop + ' must be set.');\n  }\n\n  return prop;\n}\n\n/**\n * sets the default parameters which are needed to create an entry\n *\n * @param options\n * @returns {{id: *, description: (*|string), get: (*|Function), set: (*|Function),\n *            validate: (*|Function), html: string}}\n */\nvar setDefaultParameters = function(options) {\n\n  // default method to fetch the current value of the input field\n  var defaultGet = function(element) {\n    var bo = getBusinessObject(element),\n        res = {},\n        prop = ensureNotNull(options.modelProperty);\n    res[prop] = bo.get(prop);\n\n    return res;\n  };\n\n  // default method to set a new value to the input field\n  var defaultSet = function(element, values) {\n    var res = {},\n        prop = ensureNotNull(options.modelProperty);\n    if (values[prop] !== '') {\n      res[prop] = values[prop];\n    } else {\n      res[prop] = undefined;\n    }\n\n    return cmdHelper.updateProperties(element, res);\n  };\n\n  // default validation method\n  var defaultValidate = function() {\n    return {};\n  };\n\n  return {\n    id : options.id,\n    description : (options.description || ''),\n    get : (options.get || defaultGet),\n    set : (options.set || defaultSet),\n    validate : (options.validate || defaultValidate),\n    html: ''\n  };\n};\n\nfunction EntryFactory() {\n\n}\n\n/**\n * Generates an text input entry object for a property panel.\n * options are:\n * - id: id of the entry - String\n *\n * - description: description of the property - String\n *\n * - label: label for the input field - String\n *\n * - set: setter method - Function\n *\n * - get: getter method - Function\n *\n * - validate: validation mehtod - Function\n *\n * - modelProperty: name of the model property - String\n *\n * - buttonAction: Object which contains the following properties: - Object\n * ---- name: name of the [data-action] callback - String\n * ---- method: callback function for [data-action] - Function\n *\n * - buttonShow: Object which contains the following properties: - Object\n * ---- name: name of the [data-show] callback - String\n * ---- method: callback function for [data-show] - Function\n *\n * @param options\n * @returns the propertyPanel entry resource object\n */\nEntryFactory.textField = function(translate, options) {\n  return textInputField(translate, options, setDefaultParameters(options));\n};\n\nEntryFactory.validationAwareTextField = function(translate, options) {\n  return validationAwareTextInputField(translate, options, setDefaultParameters(options));\n};\n\n/**\n * Generates a checkbox input entry object for a property panel.\n * options are:\n * - id: id of the entry - String\n *\n * - description: description of the property - String\n *\n * - label: label for the input field - String\n *\n * - set: setter method - Function\n *\n * - get: getter method - Function\n *\n * - validate: validation method - Function\n *\n * - modelProperty: name of the model property - String\n *\n * @param options\n * @returns the propertyPanel entry resource object\n */\nEntryFactory.checkbox = function(translate, options) {\n  return checkboxField(translate, options, setDefaultParameters(options));\n};\n\nEntryFactory.textBox = function(translate, options) {\n  return textBoxField(translate, options, setDefaultParameters(options));\n};\n\nEntryFactory.selectBox = function(translate, options) {\n  return selectBoxField(translate, options, setDefaultParameters(options));\n};\n\nEntryFactory.comboBox = function(translate, options) {\n  return comboBoxField(translate, options);\n};\n\nEntryFactory.table = function(translate, options) {\n  return tableField(translate, options);\n};\n\nEntryFactory.label = function(options) {\n  return labelEntry(options);\n};\n\nEntryFactory.link = function(translate, options) {\n  return link(translate, options);\n};\n\nEntryFactory.autoSuggest = function(translate, options) {\n  return autoSuggestTextBoxField(translate, options, setDefaultParameters(options));\n};\n\nEntryFactory.collapsible = function(options) {\n  return collapsible(options);\n};\n\nEntryFactory.toggleSwitch = function(translate, options) {\n  return toggleSwitch(translate, options, setDefaultParameters(options));\n};\n\nmodule.exports = EntryFactory;\n","/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\nmodule.exports = replaceHolders;\n","var baseSetData = require('./_baseSetData'),\n    createBind = require('./_createBind'),\n    createCurry = require('./_createCurry'),\n    createHybrid = require('./_createHybrid'),\n    createPartial = require('./_createPartial'),\n    getData = require('./_getData'),\n    mergeData = require('./_mergeData'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString'),\n    toInteger = require('./toInteger');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *    1 - `_.bind`\n *    2 - `_.bindKey`\n *    4 - `_.curry` or `_.curryRight` of a bound function\n *    8 - `_.curry`\n *   16 - `_.curryRight`\n *   32 - `_.partial`\n *   64 - `_.partialRight`\n *  128 - `_.rearg`\n *  256 - `_.ary`\n *  512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n  var data = isBindKey ? undefined : getData(func);\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  if (data) {\n    mergeData(newData, data);\n  }\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] === undefined\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setWrapToString(setter(result, newData), func, bitmask);\n}\n\nmodule.exports = createWrap;\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable explicit method chain sequences.\n */\nfunction LodashWrapper(value, chainAll) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__chain__ = !!chainAll;\n  this.__index__ = 0;\n  this.__values__ = undefined;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nmodule.exports = LodashWrapper;\n","/**\n * Checks if `value` is `null`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n * @example\n *\n * _.isNull(null);\n * // => true\n *\n * _.isNull(void 0);\n * // => false\n */\nfunction isNull(value) {\n  return value === null;\n}\n\nmodule.exports = isNull;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * The base implementation of methods like `_.xor`, without support for\n * iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of values.\n */\nfunction baseXor(arrays, iteratee, comparator) {\n  var length = arrays.length;\n  if (length < 2) {\n    return length ? baseUniq(arrays[0]) : [];\n  }\n  var index = -1,\n      result = Array(length);\n\n  while (++index < length) {\n    var array = arrays[index],\n        othIndex = -1;\n\n    while (++othIndex < length) {\n      if (othIndex != index) {\n        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n      }\n    }\n  }\n  return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n}\n\nmodule.exports = baseXor;\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar candidateStarter = require('./implementation/CandidateStarter');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'camunda:Process') ||\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n\n    group.entries = group.entries.concat(candidateStarter(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        var bo = getBusinessObject(element);\n\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n\n        return bo.get('processRef');\n      }\n    }, translate));\n\n  }\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    getExtensionElements = require('../../../helper/ExtensionElementsHelper').getExtensionElements,\n    removeEntry = require('../../../helper/ExtensionElementsHelper').removeEntry,\n    extensionElements = require('./implementation/ExtensionElements'),\n    properties = require('./implementation/Properties'),\n    entryFactory = require('../../../factory/EntryFactory'),\n    elementHelper = require('../../../helper/ElementHelper'),\n    cmdHelper = require('../../../helper/CmdHelper'),\n    formHelper = require('../../../helper/FormHelper'),\n    utils = require('../../../Utils'),\n    is = require('bpmn-js/lib/util/ModelUtil').is,\n    find = require('lodash/find'),\n    each = require('lodash/forEach');\n\nfunction generateValueId() {\n  return utils.nextId('Value_');\n}\n\n/**\n * Generate a form field specific textField using entryFactory.\n *\n * @param {Function} translate\n * @param {string} options.id\n * @param {string} options.label\n * @param {string} options.modelProperty\n * @param {Function} options.validate\n *\n * @return {Object} an entryFactory.textField object\n */\nfunction formFieldTextField(translate, options, getSelectedFormField) {\n\n  var id = options.id,\n      label = options.label,\n      modelProperty = options.modelProperty,\n      validate = options.validate;\n\n  return entryFactory.textField(translate, {\n    id: id,\n    label: label,\n    modelProperty: modelProperty,\n    get: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node) || {},\n          values = {};\n\n      values[modelProperty] = selectedFormField[modelProperty];\n\n      return values;\n    },\n\n    set: function(element, values, node) {\n      var commands = [];\n\n      if (typeof options.set === 'function') {\n        var cmd = options.set(element, values, node);\n\n        if (cmd) {\n          commands.push(cmd);\n        }\n      }\n\n      var formField = getSelectedFormField(element, node),\n          properties = {};\n\n      properties[modelProperty] = values[modelProperty] || undefined;\n\n      commands.push(cmdHelper.updateBusinessObject(element, formField, properties));\n\n      return commands;\n    },\n    hidden: function(element, node) {\n      return !getSelectedFormField(element, node);\n    },\n    validate: validate\n  });\n}\n\nfunction ensureFormKeyAndDataSupported(element) {\n  return (\n    is(element, 'bpmn:StartEvent') && !is(element.parent, 'bpmn:SubProcess')\n  ) || is(element, 'bpmn:UserTask');\n}\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n\n  if (!ensureFormKeyAndDataSupported(element)) {\n    return;\n  }\n\n\n  /**\n   * Return the currently selected form field querying the form field select box\n   * from the DOM.\n   *\n   * @param  {djs.model.Base} element\n   * @param  {DOMElement} node - DOM element of any form field text input\n   *\n   * @return {ModdleElement} the currently selected form field\n   */\n  function getSelectedFormField(element, node) {\n    var selected = formFieldsEntry.getSelected(element, node.parentNode);\n\n    if (selected.idx === -1) {\n      return;\n    }\n\n    return formHelper.getFormField(element, selected.idx);\n  }\n\n  // [FormKey] form key text input field\n  group.entries.push(entryFactory.textField(translate, {\n    id : 'form-key',\n    label : translate('Form Key'),\n    modelProperty: 'formKey',\n    get: function(element, node) {\n      var bo = getBusinessObject(element);\n\n      return {\n        formKey: bo.get('camunda:formKey')\n      };\n    },\n    set: function(element, values, node) {\n      var bo = getBusinessObject(element),\n          formKey = values.formKey || undefined;\n\n      return cmdHelper.updateBusinessObject(element, bo, { 'camunda:formKey': formKey });\n    }\n  }));\n\n  // [FormData] form field select box\n  var formFieldsEntry = extensionElements(element, bpmnFactory, {\n    id: 'form-fields',\n    label: translate('Form Fields'),\n    modelProperty: 'id',\n    prefix: 'FormField',\n    createExtensionElement: function(element, extensionElements, value) {\n      var bo = getBusinessObject(element), commands = [];\n\n      if (!extensionElements) {\n        extensionElements = elementHelper.createElement('bpmn:ExtensionElements', { values: [] }, bo, bpmnFactory);\n        commands.push(cmdHelper.updateProperties(element, { extensionElements: extensionElements }));\n      }\n\n      var formData = formHelper.getFormData(element);\n\n      if (!formData) {\n        formData = elementHelper.createElement('camunda:FormData', { fields: [] }, extensionElements, bpmnFactory);\n        commands.push(cmdHelper.addAndRemoveElementsFromList(\n          element,\n          extensionElements,\n          'values',\n          'extensionElements',\n          [formData],\n          []\n        ));\n      }\n\n      var field = elementHelper.createElement('camunda:FormField', { id: value }, formData, bpmnFactory);\n      if (typeof formData.fields !== 'undefined') {\n        commands.push(cmdHelper.addElementsTolist(element, formData, 'fields', [ field ]));\n      } else {\n        commands.push(cmdHelper.updateBusinessObject(element, formData, {\n          fields: [ field ]\n        }));\n      }\n      return commands;\n    },\n    removeExtensionElement: function(element, extensionElements, value, idx) {\n      var formData = getExtensionElements(getBusinessObject(element), 'camunda:FormData')[0],\n          entry = formData.fields[idx],\n          commands = [];\n\n      if (formData.fields.length < 2) {\n        commands.push(removeEntry(getBusinessObject(element), element, formData));\n      } else {\n        commands.push(cmdHelper.removeElementsFromList(element, formData, 'fields', null, [entry]));\n\n        if (entry.id === formData.get('businessKey')) {\n          commands.push(cmdHelper.updateBusinessObject(element, formData, { 'businessKey': undefined }));\n        }\n      }\n\n      return commands;\n    },\n    getExtensionElements: function(element) {\n      return formHelper.getFormFields(element);\n    },\n    hideExtensionElements: function(element, node) {\n      return false;\n    }\n  });\n  group.entries.push(formFieldsEntry);\n\n  // [FormData] business key form field select box\n  var formBusinessKeyFormFieldEntry = entryFactory.selectBox(translate, {\n    id: 'form-business-key',\n    label: translate('Business Key'),\n    modelProperty: 'businessKey',\n    selectOptions: function(element, inputNode) {\n      var selectOptions = [{ name: '', value: '' }];\n      var formFields = formHelper.getFormFields(element);\n      each(formFields, function(field) {\n        if (field.type !== 'boolean') {\n          selectOptions.push({ name: field.id, value: field.id });\n        }\n      });\n      return selectOptions;\n    },\n    get: function(element, node) {\n      var result = { businessKey: '' };\n      var bo = getBusinessObject(element);\n      var formDataExtension = getExtensionElements(bo, 'camunda:FormData');\n      if (formDataExtension) {\n        var formData = formDataExtension[0];\n        var storedValue = formData.get('businessKey');\n        result = { businessKey: storedValue };\n      }\n      return result;\n    },\n    set: function(element, values, node) {\n      var formData = getExtensionElements(getBusinessObject(element), 'camunda:FormData')[0];\n      return cmdHelper.updateBusinessObject(element, formData, { 'businessKey': values.businessKey || undefined });\n    },\n    hidden: function(element, node) {\n      var isStartEvent = is(element,'bpmn:StartEvent');\n      return !(isStartEvent && formHelper.getFormFields(element).length > 0);\n    }\n  });\n  group.entries.push(formBusinessKeyFormFieldEntry);\n\n  // [FormData] Form Field label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-header',\n    labelText: translate('Form Field'),\n    showLabel: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] form field id text input field\n  group.entries.push(entryFactory.validationAwareTextField(translate, {\n    id: 'form-field-id',\n    label: translate('ID (process variable name)'),\n    modelProperty: 'id',\n\n    getProperty: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node) || {};\n\n      return selectedFormField.id;\n    },\n\n    setProperty: function(element, properties, node) {\n      var formField = getSelectedFormField(element, node);\n\n      return cmdHelper.updateBusinessObject(element, formField, properties);\n    },\n\n    hidden: function(element, node) {\n      return !getSelectedFormField(element, node);\n    },\n\n    validate: function(element, values, node) {\n\n      var formField = getSelectedFormField(element, node);\n\n      if (formField) {\n\n        var idValue = values.id;\n\n        if (!idValue || idValue.trim() === '') {\n          return { id: 'Form field id must not be empty' };\n        }\n\n        var formFields = formHelper.getFormFields(element);\n\n        var existingFormField = find(formFields, function(f) {\n          return f !== formField && f.id === idValue;\n        });\n\n        if (existingFormField) {\n          return { id: 'Form field id already used in form data.' };\n        }\n      }\n    }\n  }));\n\n  // [FormData] form field type combo box\n  group.entries.push(entryFactory.comboBox(translate, {\n    id: 'form-field-type',\n    label: translate('Type'),\n    selectOptions: [\n      { name: 'string', value: 'string' },\n      { name: 'long', value: 'long' },\n      { name: 'boolean', value: 'boolean' },\n      { name: 'date', value: 'date' },\n      { name: 'enum', value: 'enum' }\n    ],\n    modelProperty: 'type',\n    emptyParameter: true,\n\n    get: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      if (selectedFormField) {\n        return { type: selectedFormField.type };\n      } else {\n        return {};\n      }\n    },\n    set: function(element, values, node) {\n      var selectedFormField = getSelectedFormField(element, node),\n          formData = getExtensionElements(getBusinessObject(element), 'camunda:FormData')[0],\n          commands = [];\n\n      if (selectedFormField.type === 'enum' && values.type !== 'enum') {\n\n        // delete camunda:value objects from formField.values when switching from type enum\n        commands.push(cmdHelper.updateBusinessObject(element, selectedFormField, { values: undefined }));\n      }\n      if (values.type === 'boolean' && selectedFormField.get('id') === formData.get('businessKey')) {\n        commands.push(cmdHelper.updateBusinessObject(element, formData, { 'businessKey': undefined }));\n      }\n      commands.push(cmdHelper.updateBusinessObject(element, selectedFormField, values));\n\n      return commands;\n    },\n    hidden: function(element, node) {\n      return !getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] form field label text input field\n  group.entries.push(formFieldTextField(translate, {\n    id: 'form-field-label',\n    label: translate('Label'),\n    modelProperty: 'label'\n  }, getSelectedFormField));\n\n  // [FormData] form field defaultValue text input field\n  group.entries.push(formFieldTextField(translate, {\n    id: 'form-field-defaultValue',\n    label: translate('Default Value'),\n    modelProperty: 'defaultValue'\n  }, getSelectedFormField));\n\n\n  // [FormData] form field enum values label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-enum-values-header',\n    labelText: translate('Values'),\n    divider: true,\n    showLabel: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      return selectedFormField && selectedFormField.type === 'enum';\n    }\n  }));\n\n  // [FormData] form field enum values table\n  group.entries.push(entryFactory.table(translate, {\n    id: 'form-field-enum-values',\n    labels: [ translate('Id'), translate('Name') ],\n    modelProperties: [ 'id', 'name' ],\n    show: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      return selectedFormField && selectedFormField.type === 'enum';\n    },\n    getElements: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node);\n\n      return formHelper.getEnumValues(selectedFormField);\n    },\n    addElement: function(element, node) {\n      var selectedFormField = getSelectedFormField(element, node),\n          id = generateValueId();\n\n      var enumValue = elementHelper.createElement(\n        'camunda:Value',\n        { id: id, name: undefined },\n        getBusinessObject(element),\n        bpmnFactory\n      );\n\n      return cmdHelper.addElementsTolist(element, selectedFormField, 'values', [enumValue]);\n    },\n    removeElement: function(element, node, idx) {\n      var selectedFormField = getSelectedFormField(element, node),\n          enumValue = selectedFormField.values[idx];\n\n      return cmdHelper.removeElementsFromList(element, selectedFormField, 'values', null, [enumValue]);\n    },\n    updateElement: function(element, value, node, idx) {\n      var selectedFormField = getSelectedFormField(element, node),\n          enumValue = selectedFormField.values[idx];\n\n      value.name = value.name || undefined;\n      return cmdHelper.updateBusinessObject(element, enumValue, value);\n    },\n    validate: function(element, value, node, idx) {\n\n      var selectedFormField = getSelectedFormField(element, node),\n          enumValue = selectedFormField.values[idx];\n\n      if (enumValue) {\n\n        // check if id is valid\n        var validationError = utils.isIdValid(enumValue, value.id, translate);\n\n        if (validationError) {\n          return { id: validationError };\n        }\n      }\n    }\n  }));\n\n  // [FormData] Validation label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-validation-header',\n    labelText: translate('Validation'),\n    divider: true,\n    showLabel: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] form field constraints table\n  group.entries.push(entryFactory.table(translate, {\n    id: 'constraints-list',\n    modelProperties: [ 'name', 'config' ],\n    labels: [ translate('Name'), translate('Config') ],\n    addLabel: translate('Add Constraint'),\n    getElements: function(element, node) {\n      var formField = getSelectedFormField(element, node);\n\n      return formHelper.getConstraints(formField);\n    },\n    addElement: function(element, node) {\n\n      var commands = [],\n          formField = getSelectedFormField(element, node),\n          validation = formField.validation;\n\n      if (!validation) {\n\n        // create validation business object and add it to form data, if it doesn't exist\n        validation = elementHelper.createElement('camunda:Validation', {}, getBusinessObject(element), bpmnFactory);\n\n        commands.push(cmdHelper.updateBusinessObject(element, formField, { 'validation': validation }));\n      }\n\n      var newConstraint = elementHelper.createElement(\n        'camunda:Constraint',\n        { name: undefined, config: undefined },\n        validation,\n        bpmnFactory\n      );\n\n      commands.push(cmdHelper.addElementsTolist(element, validation, 'constraints', [ newConstraint ]));\n\n      return commands;\n    },\n    updateElement: function(element, value, node, idx) {\n      var formField = getSelectedFormField(element, node),\n          constraint = formHelper.getConstraints(formField)[idx];\n\n      value.name = value.name || undefined;\n      value.config = value.config || undefined;\n\n      return cmdHelper.updateBusinessObject(element, constraint, value);\n    },\n    removeElement: function(element, node, idx) {\n      var commands = [],\n          formField = getSelectedFormField(element, node),\n          constraints = formHelper.getConstraints(formField),\n          currentConstraint = constraints[idx];\n\n      commands.push(cmdHelper.removeElementsFromList(\n        element,\n        formField.validation,\n        'constraints',\n        null,\n        [ currentConstraint ]\n      ));\n\n      if (constraints.length === 1) {\n\n        // remove camunda:validation if the last existing constraint has been removed\n        commands.push(cmdHelper.updateBusinessObject(element, formField, { validation: undefined }));\n      }\n\n      return commands;\n    },\n    show: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] Properties label\n  group.entries.push(entryFactory.label({\n    id: 'form-field-properties-header',\n    labelText: translate('Properties'),\n    divider: true,\n    showLabel: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }));\n\n  // [FormData] camunda:properties table\n  group.entries.push(properties(element, bpmnFactory, {\n    id: 'form-field-properties',\n    modelProperties: [ 'id', 'value' ],\n    labels: [ translate('Id'), translate('Value') ],\n    getParent: function(element, node) {\n      return getSelectedFormField(element, node);\n    },\n    show: function(element, node) {\n      return !!getSelectedFormField(element, node);\n    }\n  }, translate));\n};\n","'use strict';\r\n\r\nvar entryFactory = require('../../../../factory/EntryFactory');\r\n\r\nvar cmdHelper = require('../../../../helper/CmdHelper');\r\n\r\nmodule.exports = function(element, bpmnFactory, options, translate) {\r\n\r\n  var getBusinessObject = options.getBusinessObject;\r\n\r\n  var isStartableInTasklistEntry = entryFactory.checkbox(translate, {\r\n    id: 'isStartableInTasklist',\r\n    label: translate('Startable'),\r\n    modelProperty: 'isStartableInTasklist',\r\n\r\n    get: function(element, node) {\r\n      var bo = getBusinessObject(element);\r\n      var isStartableInTasklist = bo.get('camunda:isStartableInTasklist');\r\n\r\n      return {\r\n        isStartableInTasklist: isStartableInTasklist ? isStartableInTasklist : ''\r\n      };\r\n    },\r\n\r\n    set: function(element, values) {\r\n      var bo = getBusinessObject(element);\r\n      return cmdHelper.updateBusinessObject(element, bo, {\r\n        'camunda:isStartableInTasklist': !!values.isStartableInTasklist\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return [\r\n    isStartableInTasklistEntry\r\n  ];\r\n};\r\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar entryFactory = require('../../../factory/EntryFactory');\n\nvar participantHelper = require('../../../helper/ParticipantHelper');\n\nmodule.exports = function(group, element, translate) {\n\n  var bo = getBusinessObject(element);\n\n  if (!bo) {\n    return;\n  }\n\n  if (is(element, 'bpmn:Process') || (is(element, 'bpmn:Participant') && bo.get('processRef'))) {\n\n    var executableEntry = entryFactory.checkbox(translate, {\n      id: 'process-is-executable',\n      label: translate('Executable'),\n      modelProperty: 'isExecutable'\n    });\n\n    // in participants we have to change the default behavior of set and get\n    if (is(element, 'bpmn:Participant')) {\n      executableEntry.get = function(element) {\n        return participantHelper.getProcessBusinessObject(element, 'isExecutable');\n      };\n\n      executableEntry.set = function(element, values) {\n        return participantHelper.modifyProcessBusinessObject(element, 'isExecutable', values);\n      };\n    }\n\n    group.entries.push(executableEntry);\n  }\n\n};\n","'use strict';\r\n\r\nvar find = require('lodash/find'),\r\n    isUndefined = require('lodash/isUndefined');\r\n\r\nvar isAny = require('bpmn-js/lib/features/modeling/util/ModelingUtil').isAny;\r\n\r\nvar ELEMENT_TEMPLATE_OPTION_EMPTY = 'element-template-option-empty';\r\n\r\nmodule.exports.ELEMENT_TEMPLATE_OPTION_EMPTY = ELEMENT_TEMPLATE_OPTION_EMPTY;\r\n\r\nvar emptyOption = {\r\n  name: '',\r\n  value: ELEMENT_TEMPLATE_OPTION_EMPTY\r\n};\r\n\r\n/**\r\n * Get options for given element and templates.\r\n *\r\n * @param {dj.model.Base} element\r\n * @param {ElementTemplates} elementTemplates\r\n * @param {Translate} translate\r\n */\r\nfunction getOptions(element, elementTemplates, translate) {\r\n  var options = [ emptyOption ];\r\n\r\n  var defaultTemplate = elementTemplates.getDefault(element);\r\n\r\n  if (defaultTemplate) {\r\n    options.push(option('element-template-option-0', defaultTemplate, translate));\r\n\r\n    return options;\r\n  }\r\n\r\n  var index = 0;\r\n\r\n  elementTemplates.getAll().forEach(function(template) {\r\n    if (!isAny(element, template.appliesTo)) {\r\n      return;\r\n    }\r\n\r\n    options.push(option('element-template-option-' + index, template, translate));\r\n\r\n    index++;\r\n  });\r\n\r\n  return options;\r\n}\r\n\r\nmodule.exports.getOptions = getOptions;\r\n\r\nfunction getOption(optionId, options) {\r\n  return find(options, function(option) {\r\n    return optionId === option.value;\r\n  });\r\n}\r\n\r\nmodule.exports.getOption = getOption;\r\n\r\nfunction option(value, template, translate) {\r\n  var name = translate(template.name);\r\n\r\n  if (template.version) {\r\n    name += ' (v' + template.version + ')';\r\n  }\r\n\r\n  var option = {\r\n    id: template.id,\r\n    name: name,\r\n    value: value\r\n  };\r\n\r\n  if (template.version) {\r\n    option.version = template.version;\r\n  }\r\n\r\n  return option;\r\n}\r\n\r\nmodule.exports.getVersionOrDateFromTemplate = function(template) {\r\n  var metadata = template.metadata,\r\n      version = template.version;\r\n\r\n  if (metadata) {\r\n    if (!isUndefined(metadata.created)) {\r\n      return 'Version ' + toDateString(metadata.created);\r\n    } else if (!isUndefined(metadata.updated)) {\r\n      return 'Version ' + toDateString(metadata.updated);\r\n    }\r\n  }\r\n\r\n  if (isUndefined(version)) {\r\n    return null;\r\n  }\r\n\r\n  return 'Version ' + version;\r\n};\r\n\r\nfunction toDateString(timestamp) {\r\n  var date = new Date(timestamp);\r\n\r\n  var year = date.getFullYear();\r\n\r\n  var month = leftPad(String(date.getMonth() + 1), 2, '0');\r\n\r\n  var day = leftPad(String(date.getDate()), 2, '0');\r\n\r\n  return day + '.' + month + '.' + year;\r\n}\r\n\r\nfunction leftPad(string, length, character) {\r\n  while (string.length < length) {\r\n    string = character + string;\r\n  }\r\n\r\n  return string;\r\n}","'use strict';\n\nvar entryFactory = require('../../../../factory/EntryFactory'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, escalationEventDefinition, showEscalationCodeVariable, translate) {\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, escalationEventDefinition, bpmnFactory, {\n    label: translate('Escalation'),\n    elementName: 'escalation',\n    elementType: 'bpmn:Escalation',\n    referenceProperty: 'escalationRef',\n    newElementIdPrefix: 'Escalation_'\n  }));\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, escalationEventDefinition, bpmnFactory, translate, {\n      id: 'escalation-element-name',\n      label: translate('Escalation Name'),\n      referenceProperty: 'escalationRef',\n      modelProperty: 'name',\n      shouldValidate: true\n    })\n  );\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, escalationEventDefinition, bpmnFactory, translate, {\n      id: 'escalation-element-code',\n      label: translate('Escalation Code'),\n      referenceProperty: 'escalationRef',\n      modelProperty: 'escalationCode'\n    })\n  );\n\n\n  if (showEscalationCodeVariable) {\n    group.entries.push(entryFactory.textField(translate, {\n      id : 'escalationCodeVariable',\n      label : translate('Escalation Code Variable'),\n      modelProperty : 'escalationCodeVariable',\n\n      get: function(element) {\n        var codeVariable = escalationEventDefinition.get('camunda:escalationCodeVariable');\n        return {\n          escalationCodeVariable: codeVariable\n        };\n      },\n\n      set: function(element, values) {\n        return cmdHelper.updateBusinessObject(element, escalationEventDefinition, {\n          'camunda:escalationCodeVariable': values.escalationCodeVariable || undefined\n        });\n      }\n    }));\n  }\n};\n","'use strict';\n\nvar getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject,\n    cmdHelper = require('../helper/CmdHelper'),\n    escapeHTML = require('../Utils').escapeHTML;\n\nvar entryFieldDescription = require('./EntryFieldDescription');\n\nvar domify = require('min-dom').domify;\n\nvar toggleSwitch = function(translate, options, defaultParameters) {\n  var resource = defaultParameters,\n      id = resource.id,\n      label = options.label || id,\n      canBeHidden = !!options.hidden && typeof options.hidden === 'function',\n      isOn = options.isOn,\n      descriptionOn = options.descriptionOn,\n      descriptionOff = options.descriptionOff,\n      labelOn = options.labelOn,\n      labelOff = options.labelOff;\n\n  resource.html = document.createDocumentFragment();\n\n  resource.html.appendChild(domify('<label for=\"' + escapeHTML(id) + '\" ' +\n      (canBeHidden ? 'data-show=\"shouldShow\"' : '') +\n      '>' + escapeHTML(label) + '</label>' +\n    '<div class=\"bpp-field-wrapper\"' +\n    (canBeHidden ? 'data-show=\"shouldShow\"' : '') +\n    '>' +\n      '<label class=\"bpp-toggle-switch__switcher\">' +\n        '<input id=\"' + escapeHTML(id) + '\" ' +\n            'type=\"checkbox\" ' +\n            'name=\"' + escapeHTML(options.modelProperty) + '\" />' +\n        '<span class=\"bpp-toggle-switch__slider\"></span>' +\n      '</label>' +\n      '<p class=\"bpp-toggle-switch__label\" data-show=\"isOn\">' +\n        escapeHTML(labelOn) +\n      '</p>' +\n      '<p class=\"bpp-toggle-switch__label\" data-show=\"isOff\">' +\n        escapeHTML(labelOff) +\n      '</p>' +\n    '</div>'));\n\n  if (descriptionOn) {\n    resource.html.appendChild(entryFieldDescription(translate, descriptionOn, { show: 'isOn' }));\n  }\n\n  if (descriptionOff) {\n    resource.html.appendChild(entryFieldDescription(translate, descriptionOff, { show: 'isOff' }));\n  }\n\n  resource.get = function(element) {\n    var bo = getBusinessObject(element),\n        res = {};\n\n    res[options.modelProperty] = bo.get(options.modelProperty);\n\n    return res;\n  };\n\n  resource.set = function(element, values) {\n    var res = {};\n\n    res[options.modelProperty] = !!values[options.modelProperty];\n\n    return cmdHelper.updateProperties(element, res);\n  };\n\n  if (typeof options.set === 'function') {\n    resource.set = options.set;\n  }\n\n  if (typeof options.get === 'function') {\n    resource.get = options.get;\n  }\n\n  if (canBeHidden) {\n    resource.shouldShow = function() {\n      return !options.hidden.apply(resource, arguments);\n    };\n  }\n\n  resource.isOn = function() {\n    if (canBeHidden && !resource.shouldShow()) {\n      return false;\n    }\n\n    return isOn.apply(resource, arguments);\n  };\n\n  resource.isOff = function() {\n    if (canBeHidden && !resource.shouldShow()) {\n      return false;\n    }\n\n    return !resource.isOn();\n  };\n\n  resource.cssClasses = ['bpp-toggle-switch'];\n\n  return resource;\n};\n\nmodule.exports = toggleSwitch;\n","var baseSetData = require('./_baseSetData'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity\n * function to avoid garbage collection pauses in V8. See\n * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = shortOut(baseSetData);\n\nmodule.exports = setData;\n","'use strict';\n\nvar cmdHelper = require('../../../../helper/CmdHelper');\n\nvar domQuery = require('min-dom').query,\n    domify = require('min-dom').domify,\n    domAttr = require('min-dom').attr;\n\nvar forEach = require('lodash/forEach'),\n    find = require('lodash/find');\n\nvar elementHelper = require('../../../../helper/ElementHelper');\nvar utils = require('../../../../Utils'),\n    escapeHTML = utils.escapeHTML;\n\nvar selector = 'select[name=selectedElement]';\n\n/**\n * Get select box containing all elements.\n *\n * @param {DOMElement} node\n *\n * @return {DOMElement} the select box\n */\nfunction getSelectBox(node) {\n  return domQuery(selector, node.parentElement);\n}\n\n/**\n * Find element by given id.\n *\n * @param {ModdleElement} eventDefinition\n *\n * @return {ModdleElement} an element\n */\nfunction findElementById(eventDefinition, type, id) {\n  var elements = utils.findRootElementsByType(eventDefinition, type);\n  return find(elements, function(element) {\n    return element.id === id;\n  });\n}\n\n/**\n * Create an entry to modify the reference to an element from an\n * event definition.\n *\n * @param  {djs.model.Base} element\n * @param  {ModdleElement} definition\n * @param  {BpmnFactory} bpmnFactory\n * @param  {Object} options\n * @param  {string} options.label the label of the entry\n * @param  {string} options.description the description of the entry\n * @param  {string} options.elementName the name of the element\n * @param  {string} options.elementType the type of the element\n * @param  {string} options.referenceProperty the name of referencing property\n * @param  {string} options.newElementIdPrefix the prefix of a new created element\n *\n * @return {Array<Object>} return an array containing the entries\n */\nmodule.exports = function(element, definition, bpmnFactory, options) {\n\n  var elementName = options.elementName || '',\n      elementType = options.elementType,\n      referenceProperty = options.referenceProperty;\n\n  var newElementIdPrefix = options.newElementIdPrefix || 'elem_';\n\n  var label = options.label || '',\n      description = options.description || '';\n\n  var entries = [];\n\n  entries.push({\n\n    id: 'event-definitions-' + elementName,\n    description: description,\n    html: '<div class=\"bpp-row bpp-select\">' +\n             '<label for=\"camunda-' + escapeHTML(elementName) + '\">' + escapeHTML(label) + '</label>' +\n             '<div class=\"bpp-field-wrapper\">' +\n               '<select id=\"camunda-' + escapeHTML(elementName) + '\" name=\"selectedElement\" data-value>' +\n               '</select>' +\n               '<button class=\"action-button add\" id=\"addElement\" data-action=\"addElement\"><span>+</span></button>' +\n             '</div>' +\n          '</div>',\n\n    get: function(element, entryNode) {\n      utils.updateOptionsDropDown(selector, definition, elementType, entryNode);\n      var reference = definition.get(referenceProperty);\n      return {\n        selectedElement: (reference && reference.id) || ''\n      };\n    },\n\n    set: function(element, values) {\n      var selection = values.selectedElement;\n\n      var props = {};\n\n      if (!selection || typeof selection === 'undefined') {\n\n        // remove reference to element\n        props[referenceProperty] = undefined;\n        return cmdHelper.updateBusinessObject(element, definition, props);\n      }\n\n      var commands = [];\n\n      var selectedElement = findElementById(definition, elementType, selection);\n      if (!selectedElement) {\n        var root = utils.getRoot(definition);\n\n        // create a new element\n        selectedElement = elementHelper.createElement(elementType, { name: selection }, root, bpmnFactory);\n        commands.push(cmdHelper.addAndRemoveElementsFromList(element, root, 'rootElements', null, [ selectedElement ]));\n      }\n\n      // update reference to element\n      props[referenceProperty] = selectedElement;\n      commands.push(cmdHelper.updateBusinessObject(element, definition, props));\n\n      return commands;\n    },\n\n    addElement: function(element, inputNode) {\n\n      // note: this generated id will be used as name\n      // of the element and not as id\n      var id = utils.nextId(newElementIdPrefix);\n\n      var optionTemplate = domify('<option value=\"' + escapeHTML(id) + '\"> (id='+escapeHTML(id)+')' + '</option>');\n\n      // add new option\n      var selectBox = getSelectBox(inputNode);\n      selectBox.insertBefore(optionTemplate, selectBox.firstChild);\n\n      // select new element in the select box\n      forEach(selectBox, function(option) {\n        if (option.value === id) {\n          domAttr(option, 'selected', 'selected');\n        } else {\n          domAttr(option, 'selected', null);\n        }\n      });\n\n      return true;\n    }\n\n  });\n\n  return entries;\n\n};\n","'use strict';\n\nvar eventDefinitionReference = require('./EventDefinitionReference'),\n    elementReferenceProperty = require('./ElementReferenceProperty');\n\n\nmodule.exports = function(group, element, bpmnFactory, messageEventDefinition, translate) {\n\n  group.entries = group.entries.concat(eventDefinitionReference(element, messageEventDefinition, bpmnFactory, {\n    label: translate('Message'),\n    elementName: 'message',\n    elementType: 'bpmn:Message',\n    referenceProperty: 'messageRef',\n    newElementIdPrefix: 'Message_'\n  }));\n\n\n  group.entries = group.entries.concat(\n    elementReferenceProperty(element, messageEventDefinition, bpmnFactory, translate, {\n      id: 'message-element-name',\n      label: translate('Message Name'),\n      referenceProperty: 'messageRef',\n      modelProperty: 'name',\n      shouldValidate: true\n    })\n  );\n\n};\n","'use strict';\n\nvar is = require('bpmn-js/lib/util/ModelUtil').is,\n    getBusinessObject = require('bpmn-js/lib/util/ModelUtil').getBusinessObject;\n\nvar jobPriority = require('./implementation/JobPriority'),\n    jobRetryTimeCycle = require('./implementation/JobRetryTimeCycle');\n\nmodule.exports = function(group, element, bpmnFactory, translate) {\n  var businessObject = getBusinessObject(element);\n\n  if (is(element, 'camunda:JobPriorized') ||\n      is(element, 'bpmn:Participant') && businessObject.get('processRef')) {\n\n    group.entries = group.entries.concat(jobPriority(element, bpmnFactory, {\n      getBusinessObject: function(element) {\n        var bo = getBusinessObject(element);\n\n        if (!is(bo, 'bpmn:Participant')) {\n          return bo;\n        }\n\n        return bo.get('processRef');\n      }\n    }, translate));\n  }\n\n  if (is(element, 'camunda:AsyncCapable')) {\n    group.entries = group.entries.concat(jobRetryTimeCycle(element, bpmnFactory, {\n      getBusinessObject: getBusinessObject\n    }, translate));\n  }\n\n};\n","'use strict';\n\nvar extensionElementsHelper = require('../../../../helper/ExtensionElementsHelper'),\n    elementHelper = require('../../../../helper/ElementHelper'),\n    cmdHelper = require('../../../../helper/CmdHelper');\n\nvar utils = require('../../../../Utils');\n\nvar entryFactory = require('../../../../factory/EntryFactory');\n\nvar extensionElementsEntry = require('./ExtensionElements');\n\nvar ModelUtil = require('bpmn-js/lib/util/ModelUtil'),\n    getBusinessObject = ModelUtil.getBusinessObject;\n\nvar assign = require('lodash/assign');\n\n\nvar DEFAULT_PROPS = {\n  'stringValue': undefined,\n  'string': undefined,\n  'expression': undefined\n};\n\nvar CAMUNDA_FIELD_EXTENSION_ELEMENT = 'camunda:Field';\n\nmodule.exports = function(element, bpmnFactory, translate, options) {\n\n  options = options || {};\n\n  var insideListener = !!options.insideListener,\n      idPrefix = options.idPrefix || '',\n      getSelectedListener = options.getSelectedListener,\n      businessObject = options.businessObject || getBusinessObject(element);\n\n  var entries = [];\n\n  var isSelected = function(element, node) {\n    return getSelectedField(element, node);\n  };\n\n  function getSelectedField(element, node) {\n    var selected = fieldEntry.getSelected(element, node.parentNode);\n\n    if (selected.idx === -1) {\n      return;\n    }\n\n    var fields = getCamundaFields(element, node);\n\n    return fields[selected.idx];\n  }\n\n  function getCamundaFields(element, node) {\n    if (!insideListener) {\n      return (\n        businessObject &&\n        extensionElementsHelper.getExtensionElements(businessObject, CAMUNDA_FIELD_EXTENSION_ELEMENT)\n      ) || [];\n    }\n    return getCamundaListenerFields(element, node);\n  }\n\n  function getCamundaListenerFields(element, node) {\n    var selectedListener = getSelectedListener(element, node);\n    return selectedListener && selectedListener.fields || [];\n  }\n\n  function getFieldType(bo) {\n    var fieldType = 'string';\n\n    var expressionValue = bo && bo.expression;\n    var stringValue = bo && (bo.string || bo.stringValue);\n\n    if (typeof stringValue !== 'undefined') {\n      fieldType = 'string';\n    } else if (typeof expressionValue !== 'undefined') {\n      fieldType = 'expression';\n    }\n\n    return fieldType;\n  }\n\n  var setOptionLabelValue = function() {\n    return function(element, node, option, property, value, idx) {\n      var camundaFields = getCamundaFields(element, node);\n      var field = camundaFields[idx];\n\n      value = (field.name) ? field.name : '<empty>';\n\n      var label = idx + ' : ' + value;\n\n      option.text = label;\n    };\n  };\n\n  var newElement = function() {\n    return function(element, extensionElements, value, node) {\n\n      var props = {\n        name: '',\n        string: ''\n      };\n\n      var newFieldElem;\n\n      if (!insideListener) {\n\n        newFieldElem = elementHelper.createElement(CAMUNDA_FIELD_EXTENSION_ELEMENT, props, extensionElements, bpmnFactory);\n        return cmdHelper.addElementsTolist(element, extensionElements, 'values', [ newFieldElem ]);\n\n      } else {\n\n        var selectedListener = getSelectedListener(element, node);\n        newFieldElem = elementHelper.createElement(CAMUNDA_FIELD_EXTENSION_ELEMENT, props, selectedListener, bpmnFactory);\n        return cmdHelper.addElementsTolist(element, selectedListener, 'fields', [ newFieldElem ]);\n\n      }\n\n    };\n  };\n\n  var removeElement = function() {\n    return function(element, extensionElements, value, idx, node) {\n      var camundaFields= getCamundaFields(element, node);\n      var field = camundaFields[idx];\n      if (field) {\n        if (!insideListener) {\n          return extensionElementsHelper.removeEntry(businessObject, element, field);\n        }\n        var selectedListener = getSelectedListener(element, node);\n        return cmdHelper.removeElementsFromList(element, selectedListener, 'fields', null, [ field ]);\n      }\n    };\n  };\n\n\n  var fieldEntry = extensionElementsEntry(element, bpmnFactory, {\n    id : idPrefix + 'fields',\n    label : translate('Fields'),\n    modelProperty: 'fieldName',\n    idGeneration: 'false',\n\n    businessObject: businessObject,\n\n    createExtensionElement: newElement(),\n    removeExtensionElement: removeElement(),\n\n    getExtensionElements: function(element, node) {\n      return getCamundaFields(element, node);\n    },\n\n    setOptionLabelValue: setOptionLabelValue()\n\n  });\n  entries.push(fieldEntry);\n\n\n  entries.push(entryFactory.validationAwareTextField(translate, {\n    id: idPrefix + 'field-name',\n    label: translate('Name'),\n    modelProperty: 'fieldName',\n\n    getProperty: function(element, node) {\n      return (getSelectedField(element, node) || {}).name;\n    },\n\n    setProperty: function(element, values, node) {\n      var selectedField = getSelectedField(element, node);\n      return cmdHelper.updateBusinessObject(element, selectedField, { name : values.fieldName });\n    },\n\n    validate: function(element, values, node) {\n      var bo = getSelectedField(element, node);\n\n      var validation = {};\n      if (bo) {\n        var nameValue = values.fieldName;\n\n        if (nameValue) {\n          if (utils.containsSpace(nameValue)) {\n            validation.fieldName = translate('Name must not contain spaces');\n          }\n        } else {\n          validation.fieldName = translate('Parameter must have a name');\n        }\n      }\n\n      return validation;\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n  var fieldTypeOptions = [\n    {\n      name: translate('String'),\n      value: 'string'\n    },\n    {\n      name: translate('Expression'),\n      value: 'expression'\n    }\n  ];\n\n  entries.push(entryFactory.selectBox(translate, {\n    id: idPrefix + 'field-type',\n    label: translate('Type'),\n    selectOptions: fieldTypeOptions,\n    modelProperty: 'fieldType',\n\n    get: function(element, node) {\n      var bo = getSelectedField(element, node);\n\n      var fieldType = getFieldType(bo);\n\n      return {\n        fieldType: fieldType\n      };\n    },\n\n    set: function(element, values, node) {\n      var props = assign({}, DEFAULT_PROPS);\n\n      var fieldType = values.fieldType;\n\n      if (fieldType === 'string') {\n        props.string = '';\n      }\n      else if (fieldType === 'expression') {\n        props.expression = '';\n      }\n\n      return cmdHelper.updateBusinessObject(element, getSelectedField(element, node), props);\n    },\n\n    hidden: function(element, node) {\n      return !isSelected(element, node);\n    }\n\n  }));\n\n\n  entries.push(entryFactory.textBox(translate, {\n    id: idPrefix + 'field-value',\n    label: translate('Value'),\n    modelProperty: 'fieldValue',\n\n    get: function(element, node) {\n      var bo = getSelectedField(element, node);\n      var fieldType = getFieldType(bo);\n\n      var fieldValue;\n\n      if (fieldType === 'string') {\n        fieldValue = bo && (bo.string || bo.stringValue);\n      }\n      else if (fieldType === 'expression') {\n        fieldValue = bo && bo.expression;\n      }\n\n      return {\n        fieldValue: fieldValue\n      };\n    },\n\n    set: function(element, values, node) {\n      var bo = getSelectedField(element, node);\n      var fieldType = getFieldType(bo);\n\n      var props = assign({}, DEFAULT_PROPS);\n\n      var fieldValue = values.fieldValue || undefined;\n\n      if (fieldType === 'string') {\n        props.string = fieldValue;\n      }\n      else if (fieldType === 'expression') {\n        props.expression = fieldValue;\n      }\n\n      return cmdHelper.updateBusinessObject(element, bo, props);\n\n    },\n\n    validate: function(element, values, node) {\n      var bo = getSelectedField(element, node);\n\n      var validation = {};\n      if (bo) {\n        if (!values.fieldValue) {\n          validation.fieldValue = translate('Must provide a value');\n        }\n      }\n\n      return validation;\n    },\n\n    show: function(element, node) {\n      return isSelected(element, node);\n    }\n\n  }));\n\n  return entries;\n\n};\n","'use strict';\n\nvar textField = require('./TextInputEntryFactory');\n\n/**\n * This function is a wrapper around TextInputEntryFactory.\n * It adds functionality to cache an invalid value entered in the\n * text input, instead of setting it on the business object.\n */\nvar validationAwareTextField = function(translate, options, defaultParameters) {\n\n  var modelProperty = options.modelProperty;\n\n  defaultParameters.get = function(element, node) {\n    var value = this.__lastInvalidValue;\n\n    delete this.__lastInvalidValue;\n\n    var properties = {};\n\n    properties[modelProperty] = value !== undefined ? value : options.getProperty(element, node);\n\n    return properties;\n  };\n\n  defaultParameters.set = function(element, values, node) {\n    var validationErrors = validate.apply(this, [ element, values, node ]),\n        propertyValue = values[modelProperty];\n\n    // make sure we do not update the id\n    if (validationErrors && validationErrors[modelProperty]) {\n      this.__lastInvalidValue = propertyValue;\n\n      return options.setProperty(element, {}, node);\n    } else {\n      var properties = {};\n\n      properties[modelProperty] = propertyValue;\n\n      return options.setProperty(element, properties, node);\n    }\n  };\n\n  var validate = defaultParameters.validate = function(element, values, node) {\n    var value = values[modelProperty] || this.__lastInvalidValue;\n\n    var property = {};\n    property[modelProperty] = value;\n\n    return options.validate(element, property, node);\n  };\n\n  return textField(translate, options, defaultParameters);\n};\n\nmodule.exports = validationAwareTextField;\n","var arrayEach = require('./_arrayEach'),\n    arrayIncludes = require('./_arrayIncludes');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256,\n    WRAP_FLIP_FLAG = 512;\n\n/** Used to associate wrap methods with their bit flags. */\nvar wrapFlags = [\n  ['ary', WRAP_ARY_FLAG],\n  ['bind', WRAP_BIND_FLAG],\n  ['bindKey', WRAP_BIND_KEY_FLAG],\n  ['curry', WRAP_CURRY_FLAG],\n  ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n  ['flip', WRAP_FLIP_FLAG],\n  ['partial', WRAP_PARTIAL_FLAG],\n  ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n  ['rearg', WRAP_REARG_FLAG]\n];\n\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function(pair) {\n    var value = '_.' + pair[0];\n    if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n\nmodule.exports = updateWrapDetails;\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","import {\n  domify,\n  classes as domClasses,\n  matches as domMatches,\n  delegate as domDelegate,\n  query as domQuery,\n  queryAll as domQueryAll,\n  event as domEvent,\n  attr as domAttr\n} from 'min-dom';\n\nimport {\n  filter,\n  assign\n} from 'min-dash';\n\nimport createEmitter from 'mitt';\n\nvar DEFAULT_OPTIONS = {\n  scrollSymbolLeft: '',\n  scrollSymbolRight: ''\n};\n\n\n/**\n * This component adds the functionality to scroll over a list of tabs.\n *\n * It adds scroll buttons on the left and right side of the tabs container\n * if not all tabs are visible. It also adds a mouse wheel listener on the\n * container.\n *\n * If either a button is clicked or the mouse wheel is used over the tabs,\n * a 'scroll' event is being fired. This event contains the node elements\n * of the new and old active tab, and the direction in which the tab has\n * changed relative to the old active tab.\n *\n * @example:\n * (1) provide a tabs-container:\n *\n * var $el = (\n *   <div>\n *     <!-- button added by scrollTabs -->\n *     <span class=\"scroll-tabs-button scroll-tabs-left\"></span>\n *     <ul class=\"my-tabs-container\">\n *       <li class=\"my-tab i-am-active\"></li>\n *       <li class=\"my-tab\"></li>\n *       <li class=\"my-tab ignore-me\"></li>\n *     </ul>\n *     <!-- button added by scrollTabs -->\n *     <span class=\"scroll-tabs-button scroll-tabs-right\"></span>\n *   </div>\n * );\n *\n *\n * (2) initialize scrollTabs:\n *\n *  var scroller = scrollTabs(tabBarNode, {\n *    selectors: {\n *      tabsContainer: '.my-tabs-container',\n *      tab: '.my-tab',\n *      ignore: '.ignore-me',\n *      active: '.i-am-active'\n *    }\n *  });\n *\n *\n * (3) listen to the scroll event:\n *\n * scroller.on('scroll', function(newActiveNode, oldActiveNode, direction) {\n *   // direction is any of (-1: left, 1: right)\n *   // activate the new active tab\n * });\n *\n *\n * (4) update the scroller if tabs change and or the tab container resizes:\n *\n * scroller.update();\n *\n *\n * @param  {DOMElement} el\n * @param  {Object} options\n * @param  {Object} options.selectors\n * @param  {String} options.selectors.tabsContainer the container all tabs are contained in\n * @param  {String} options.selectors.tab a single tab inside the tab container\n * @param  {String} options.selectors.ignore tabs that should be ignored during scroll left/right\n * @param  {String} options.selectors.active selector for the current active tab\n * @param  {String} [options.scrollSymbolLeft]\n * @param  {String} [options.scrollSymbolRight]\n */\nfunction ScrollTabs($el, options) {\n\n  // we are an event emitter\n  assign(this, createEmitter());\n\n  this.options = options = assign({}, DEFAULT_OPTIONS, options);\n  this.container = $el;\n\n  this._createScrollButtons($el, options);\n\n  this._bindEvents($el);\n}\n\n\n/**\n * Create a clickable scroll button\n *\n * @param {Object} options\n * @param {String} options.className\n * @param {String} options.label\n * @param {Number} options.direction\n *\n * @return {DOMElement} The created scroll button node\n */\nScrollTabs.prototype._createButton = function(parentNode, options) {\n\n  var className = options.className,\n      direction = options.direction;\n\n\n  var button = domQuery('.' + className, parentNode);\n\n  if (!button) {\n    button = domify('<span class=\"scroll-tabs-button ' + className + '\">' +\n                                options.label +\n                              '</span>');\n\n    parentNode.insertBefore(button, parentNode.childNodes[0]);\n  }\n\n  domAttr(button, 'data-direction', direction);\n\n  return button;\n};\n\n/**\n * Create both scroll buttons\n *\n * @param  {DOMElement} parentNode\n * @param  {Object} options\n * @param  {String} options.scrollSymbolLeft\n * @param  {String} options.scrollSymbolRight\n */\nScrollTabs.prototype._createScrollButtons = function(parentNode, options) {\n\n  // Create a button that scrolls to the tab left to the currently active tab\n  this._createButton(parentNode, {\n    className: 'scroll-tabs-left',\n    label: options.scrollSymbolLeft,\n    direction: -1\n  });\n\n  // Create a button that scrolls to the tab right to the currently active tab\n  this._createButton(parentNode, {\n    className: 'scroll-tabs-right',\n    label: options.scrollSymbolRight,\n    direction: 1\n  });\n};\n\n/**\n * Get the current active tab\n *\n * @return {DOMElement}\n */\nScrollTabs.prototype.getActiveTabNode = function() {\n  return domQuery(this.options.selectors.active, this.container);\n};\n\n\n/**\n * Get the container all tabs are contained in\n *\n * @return {DOMElement}\n */\nScrollTabs.prototype.getTabsContainerNode = function() {\n  return domQuery(this.options.selectors.tabsContainer, this.container);\n};\n\n\n/**\n * Get all tabs (visible and invisible ones)\n *\n * @return {Array<DOMElement>}\n */\nScrollTabs.prototype.getAllTabNodes = function() {\n  return domQueryAll(this.options.selectors.tab, this.container);\n};\n\n\n/**\n * Gets all tabs that don't have the ignore class set\n *\n * @return {Array<DOMElement>}\n */\nScrollTabs.prototype.getVisibleTabs = function() {\n  var allTabs = this.getAllTabNodes();\n\n  var ignore = this.options.selectors.ignore;\n\n  return filter(allTabs, function(tabNode) {\n    return !domMatches(tabNode, ignore);\n  });\n};\n\n\n/**\n * Get a tab relative to a reference tab.\n *\n * @param  {DOMElement} referenceTabNode\n * @param  {Number} n gets the nth tab next or previous to the reference tab\n *\n * @return {DOMElement}\n *\n * @example:\n * Visible tabs: [ A | B | C | D | E ]\n * Assume tab 'C' is the reference tab:\n * If direction === -1, it returns tab 'B',\n * if direction ===  2, it returns tab 'E'\n */\nScrollTabs.prototype.getAdjacentTab = function(referenceTabNode, n) {\n  var visibleTabs = this.getVisibleTabs();\n\n  var index = visibleTabs.indexOf(referenceTabNode);\n\n  return visibleTabs[index + n];\n};\n\nScrollTabs.prototype._bindEvents = function(node) {\n  this._bindWheelEvent(node);\n  this._bindTabClickEvents(node);\n  this._bindScrollButtonEvents(node);\n};\n\n/**\n *  Bind a click listener to a DOM node.\n *  Make sure a tab link is entirely visible after onClick.\n *\n * @param {DOMElement} node\n */\nScrollTabs.prototype._bindTabClickEvents = function(node) {\n  var selector = this.options.selectors.tab;\n\n  var self = this;\n\n  domDelegate.bind(node, selector, 'click', function onClick(event) {\n    self.scrollToTabNode(event.delegateTarget);\n  });\n};\n\n\n/**\n * Bind the wheel event listener to a DOM node\n *\n * @param {DOMElement} node\n */\nScrollTabs.prototype._bindWheelEvent = function(node) {\n  var self = this;\n\n  domEvent.bind(node, 'wheel', function(e) {\n\n    // scroll direction (-1: left, 1: right)\n    var direction = Math.sign(e.deltaY);\n\n    var oldActiveTab = self.getActiveTabNode();\n\n    var newActiveTab = self.getAdjacentTab(oldActiveTab, direction);\n\n    if (newActiveTab) {\n      self.scrollToTabNode(newActiveTab);\n      self.emit('scroll', newActiveTab, oldActiveTab, direction);\n    }\n\n    e.preventDefault();\n  });\n};\n\n/**\n * Bind scroll button events to a DOM node\n *\n * @param  {DOMElement} node\n */\nScrollTabs.prototype._bindScrollButtonEvents = function(node) {\n\n  var self = this;\n\n  domDelegate.bind(node, '.scroll-tabs-button', 'click', function(event) {\n\n    var target = event.delegateTarget;\n\n    // data-direction is either -1 or 1\n    var direction = parseInt(domAttr(target, 'data-direction'), 10);\n\n    var oldActiveTabNode = self.getActiveTabNode();\n\n    var newActiveTabNode = self.getAdjacentTab(oldActiveTabNode, direction);\n\n    if (newActiveTabNode) {\n      self.scrollToTabNode(newActiveTabNode);\n      self.emit('scroll', newActiveTabNode, oldActiveTabNode, direction);\n    }\n\n    event.preventDefault();\n  });\n};\n\n\n/**\n* Scroll to a tab if it is not entirely visible\n*\n* @param  {DOMElement} tabNode tab node to scroll to\n*/\nScrollTabs.prototype.scrollToTabNode = function(tabNode) {\n  if (!tabNode) {\n    return;\n  }\n\n  var tabsContainerNode = tabNode.parentNode;\n\n  var tabWidth = tabNode.offsetWidth,\n      tabOffsetLeft = tabNode.offsetLeft,\n      tabOffsetRight = tabOffsetLeft + tabWidth,\n      containerWidth = tabsContainerNode.offsetWidth,\n      containerScrollLeft = tabsContainerNode.scrollLeft;\n\n  if (containerScrollLeft > tabOffsetLeft) {\n    // scroll to the left, if the tab is overflowing on the left side\n    tabsContainerNode.scrollLeft = 0;\n  } else if (tabOffsetRight > containerWidth) {\n    // scroll to the right, if the tab is overflowing on the right side\n    tabsContainerNode.scrollLeft = tabOffsetRight - containerWidth;\n  }\n};\n\n\n/**\n * React on tab changes from outside (resize/show/hide/add/remove),\n * update scroll button visibility.\n */\nScrollTabs.prototype.update = function() {\n\n  var tabsContainerNode = this.getTabsContainerNode();\n\n  // check if tabs fit in container\n  var overflow = tabsContainerNode.scrollWidth > tabsContainerNode.offsetWidth;\n\n  // TODO(nikku): distinguish overflow left / overflow right?\n  var overflowClass = 'scroll-tabs-overflow';\n\n  domClasses(this.container).toggle(overflowClass, overflow);\n\n  if (overflow) {\n    // make sure the current active tab is always visible\n    this.scrollToTabNode(this.getActiveTabNode());\n  }\n};\n\n\n// exports ////////////////\n\n/**\n * Create a scrollTabs instance on the given element.\n *\n * @param {DOMElement} $el\n * @param {Object} options\n *\n * @return {ScrollTabs}\n */\nexport default function create($el, options) {\n\n  var scrollTabs = get($el);\n\n  if (!scrollTabs) {\n    scrollTabs = new ScrollTabs($el, options);\n\n    $el.__scrollTabs = scrollTabs;\n  }\n\n  return scrollTabs;\n}\n\n\n/**\n * Return the scrollTabs instance that has been previously\n * initialized on the element.\n *\n * @param {DOMElement} $el\n * @return {ScrollTabs}\n */\nfunction get($el) {\n  return $el.__scrollTabs;\n}\n\ncreate.get = get;"],"sourceRoot":""}